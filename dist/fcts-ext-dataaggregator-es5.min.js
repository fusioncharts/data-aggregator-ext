/******/ (function(modules) { // webpackBootstrap
/******/ 	// The module cache
/******/ 	var installedModules = {};
/******/
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/
/******/ 		// Check if module is in cache
/******/ 		if(installedModules[moduleId])
/******/ 			return installedModules[moduleId].exports;
/******/
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = installedModules[moduleId] = {
/******/ 			exports: {},
/******/ 			id: moduleId,
/******/ 			loaded: false
/******/ 		};
/******/
/******/ 		// Execute the module function
/******/ 		modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);
/******/
/******/ 		// Flag the module as loaded
/******/ 		module.loaded = true;
/******/
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/
/******/
/******/ 	// expose the modules object (__webpack_modules__)
/******/ 	__webpack_require__.m = modules;
/******/
/******/ 	// expose the module cache
/******/ 	__webpack_require__.c = installedModules;
/******/
/******/ 	// __webpack_public_path__
/******/ 	__webpack_require__.p = "";
/******/
/******/ 	// Load entry module and return exports
/******/ 	return __webpack_require__(0);
/******/ })
/************************************************************************/
/******/ ([
/* 0 */
/***/ function(module, exports, __webpack_require__) {

	/* WEBPACK VAR INJECTION */(function(module) {'use strict';
	
	var _typeof = typeof Symbol === "function" && typeof Symbol.iterator === "symbol" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; };
	
	var AggregatorGetter = __webpack_require__(2);
	
	;(function (env, factory) {
	  if (( false ? 'undefined' : _typeof(module)) === 'object' && module.exports) {
	    module.exports = env.document ? factory(env) : function (win) {
	      if (!win.document) {
	        throw new Error('Window with document not present');
	      }
	      return factory(win, true);
	    };
	  } else {
	    env.Aggregator = factory(env, true);
	  }
	})(typeof window !== 'undefined' ? window : undefined, function (_window, windowExists) {
	  var FC = _window.FusionCharts;
	
	  FC.register('extension', ['private', 'data-aggregator', function () {
	    FC.registerComponent('extensions', 'data-aggregator', AggregatorGetter({ FC: FC }));
	  }]);
	});
	/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(1)(module)))

/***/ },
/* 1 */
/***/ function(module, exports) {

	module.exports = function(module) {
		if(!module.webpackPolyfill) {
			module.deprecate = function() {};
			module.paths = [];
			// module.parent = undefined by default
			module.children = [];
			module.webpackPolyfill = 1;
		}
		return module;
	}


/***/ },
/* 2 */
/***/ function(module, exports) {

	'use strict';
	
	var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();
	
	function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }
	
	module.exports = function (dep) {
	  /**
	   * Class representing the Data Aggregator.
	   */
	  var Aggregator = function () {
	    /**
	     * Create a Aggregator.
	     * @typedef {object} Aggregator.aggregation
	     * @property {string} timePeriod - The time interval of aggregation.
	     * @property {number} timePeriodMultiplier - The multiplier of time interval.
	     * @property {string} aggregationMethod - The method applied to aggregate.
	     */
	    function Aggregator() {
	      _classCallCheck(this, Aggregator);
	
	      /**
	       * @private
	       */
	      this.appliedAggregation = {
	        timePeriod: null,
	        timePeriodMultiplier: null,
	        aggregationMethod: null
	      };
	      this.config = {};
	    }
	
	    /**
	     * An object representing the timePeriod, timePeriodMultiplier, aggregationMethod.
	     * @type {Aggregator.aggregation}
	     */
	
	
	    _createClass(Aggregator, [{
	      key: 'getAvailablelAggreagation',
	
	
	      /**
	       * Sets available aggregation options in configuration of extension
	       * @private
	       */
	      value: function getAvailablelAggreagation() {
	        var config = this.config,
	            dataAgg = config.dataAgg,
	            avlTimePeriods = config.avlTimePeriods = dataAgg.getAggregationTimeRules(),
	            i,
	            len;
	
	        config.avlAggMethods = dataAgg.getAllAggregationMethod();
	
	        config.avlTimeMultiplier = [];
	        len = avlTimePeriods.length;
	
	        for (i = 0; i < len; i++) {
	          config.avlTimeMultiplier.push(avlTimePeriods[i].possibleFactors);
	        }
	      }
	
	      /**
	       * Calculates valid aggregation time periods and corresponding multipliers
	       * @private
	       */
	
	    }, {
	      key: 'getValidAggregation',
	      value: function getValidAggregation() {
	        var self = this,
	            config = self.config,
	            tsObject = self.tsObject,
	            i,
	            j,
	            len1,
	            len2,
	            avlTimePeriods,
	            avlTimeMultiplier,
	
	        // minNumOfPlot = 5,
	        maxNumOfPlot = config.composition.reactiveModel.model['max-plot-point'],
	            multipliersArr,
	            currentTimeLength,
	            timePeriod,
	            time,
	            expectedTime,
	            multiplier,
	            minBinSize;
	        // maxBinSize;
	
	        config.currentTimeLength = tsObject.globalReactiveModel.model['x-axis-visible-range-end'] - tsObject.globalReactiveModel.model['x-axis-visible-range-start'];
	
	        avlTimePeriods = config.avlTimePeriods;
	        avlTimeMultiplier = config.avlTimeMultiplier;
	        currentTimeLength = config.currentTimeLength;
	
	        config.minBinSize = minBinSize = currentTimeLength / maxNumOfPlot;
	        // config.maxBinSize = maxBinSize = currentTimeLength / minNumOfPlot;
	
	        config.validTimePeriod = [];
	        config.validTimePeriodMultiplier = [];
	
	        for (i = 0, len1 = avlTimePeriods.length; i < len1; i++) {
	          timePeriod = avlTimePeriods[i].name;
	          time = avlTimePeriods[i].interval;
	          multipliersArr = [];
	
	          for (j = 0, len2 = avlTimeMultiplier[i].length; j < len2; j++) {
	            multiplier = avlTimeMultiplier[i][j];
	            expectedTime = multiplier * time;
	
	            // if ((expectedTime >= minBinSize) && (expectedTime <= maxBinSize)) {
	            if (expectedTime >= minBinSize) {
	              multipliersArr.push(avlTimeMultiplier[i][j]);
	            }
	          }
	          if (multipliersArr.length > 0) {
	            config.validTimePeriodMultiplier.push(multipliersArr);
	            config.validTimePeriod.push(timePeriod);
	          }
	        }
	        // console.log('Time Period: ', config.validTimePeriod);
	        // console.log('Number Of Multipliers: ', config.validTimePeriodMultiplier);
	        // console.log('Methods: ', config.avlAggMethods);
	      }
	    }, {
	      key: 'getCurrentAggreation',
	      value: function getCurrentAggreation() {
	        var self = this,
	            config = self.config,
	            dataAgg = config.dataAgg,
	            composition = config.composition,
	            model = composition.reactiveModel,
	            currentAggBin,
	            currentAggMethod,
	            suitableInterval,
	            binSize;
	
	        binSize = model.prop('bin-size') - 1;
	
	        if (isFinite(binSize)) {
	          suitableInterval = dataAgg.timeRules.getSuitableInterval(binSize);
	          currentAggMethod = model.prop('aggregation-fn');
	        } else {
	          suitableInterval = composition.xAxis.getScaleObj().getIntervalObj().getConfig('intervals').minor.timeUnit;
	          config.validTimePeriod.push(suitableInterval.name);
	          config.validTimePeriodMultiplier.push([suitableInterval.step]);
	          currentAggMethod = config.avlAggMethods['invalid'] = {
	            formalName: 'Invalid',
	            nickName: 'Invalid'
	          };
	        }
	
	        return {
	          timePeriod: suitableInterval.name,
	          timePeriodMultiplier: suitableInterval.step,
	          aggregationMethod: {
	            value: currentAggMethod.nickName,
	            text: currentAggMethod.formalName
	          }
	        };
	      }
	
	      /**
	       * Set Aggregation on time series
	       * @param  {object} obj
	       * @property {string} timePeriod - The time interval of aggregation.
	       * @property {number} timePeriodMultiplier - The multiplier of time interval.
	       * @property {string} aggregationMethod - The method applied to aggregate.
	       */
	
	    }, {
	      key: 'setAggregation',
	      value: function setAggregation(obj) {
	        var avlAggMethods,
	            validTimePeriod,
	            timePeriodIndex,
	            validTimePeriodMultiplier,
	            config = this.config;
	
	        avlAggMethods = config.avlAggMethods;
	        validTimePeriod = config.validTimePeriod;
	        validTimePeriodMultiplier = config.validTimePeriodMultiplier;
	
	        // if (avlAggMethods.includes(obj.aggregationMethod) && validTimePeriod.includes(obj.timePeriod)) {
	        //   timePeriodIndex = validTimePeriod.indexOf(obj.timePeriod);
	        //   if (validTimePeriodMultiplier[timePeriodIndex].includes(Number(obj.timePeriodMultiplier))) {
	        //     this.aggregation = obj;
	        //     console.log(this.aggregation);
	        //     return true;
	        //   } else {
	        //     console.log(this.aggregation);
	        //     return false;
	        //   }
	        // } else {
	        //   console.log(this.aggregation);
	        //   return false;
	        // }
	      }
	
	      /**
	       * Reset Applied Aggregation
	       */
	
	    }, {
	      key: 'resetAggregation',
	      value: function resetAggregation() {}
	    }, {
	      key: 'init',
	      value: function init(require) {
	        var self = this,
	            config = self.config,
	            toolboxComponent = config.toolboxComponent = {},
	            api,
	            store,
	            composition,
	            saveTo = 'tsObject',
	            requiredParams = ['graphics', 'globalReactiveModel', 'chart', 'spaceManagerInstance', 'chartInstance', 'smartLabel', function acquire() {
	          var i = 0,
	              ii = requiredParams.length - 1,
	              param = '';
	          self[saveTo] = self[saveTo] || {};
	          self.requiredParams = {};
	          for (i = 0; i < ii; ++i) {
	            param = requiredParams[i];
	            self[saveTo][param] = arguments[i];
	          }
	          // onInit(self[saveTo]);
	        }];
	        require(requiredParams);
	
	        api = self.tsObject.chartInstance.apiInstance;
	        store = api.getComponentStore();
	        config.composition = composition = store.getCanvasByIndex(0).composition;
	        config.dataAgg = composition.impl.getDataAggregator();
	
	        toolboxComponent.toolbox = dep.FC.getComponent('api', 'toolbox');
	        toolboxComponent.config = {};
	
	        self.toolbars = [];
	
	        self.measurement = {};
	
	        self.toolbars.push(self.createToolbar());
	
	        window.Aggregator = self;
	        return self;
	      }
	    }, {
	      key: 'createToolbar',
	      value: function createToolbar() {
	        var self = this,
	            group,
	            toolbar,
	            timeMulSelectMenu,
	            timePeriodSelectMenu,
	            aggMethodSelectMenu,
	            resetButton,
	            applyButton,
	            config = self.config,
	            tsObject = self.tsObject,
	            label,
	            toolboxComponent = config.toolboxComponent,
	            toolbox = toolboxComponent.toolbox,
	            toolboxCompConfig = toolboxComponent.config,
	            HorizontalToolbar = toolbox.HorizontalToolbar,
	            ComponentGroup = toolbox.ComponentGroup,
	            SymbolStore = toolbox.SymbolStore,
	            graphics = tsObject.graphics,
	            paper = graphics.paper,
	            container = graphics.container,
	            chart = tsObject.chart,
	            smartLabel = tsObject.smartLabel,
	            multiplierVal,
	            timeMulSelectMenuOpt = '',
	            dependencies = {
	          paper: paper,
	          chart: chart,
	          smartLabel: smartLabel,
	          chartContainer: container
	        },
	            apply = function apply() {
	          var model = config.composition.reactiveModel,
	              timePeriodVal = timePeriodSelectMenu.value(),
	              timePeriodMultiplierVal = timeMulSelectMenu.value(),
	              aggMethodSelectMenuVal = aggMethodSelectMenu.value(),
	              keys,
	              timeInterval;
	
	          var _iteratorNormalCompletion = true;
	          var _didIteratorError = false;
	          var _iteratorError = undefined;
	
	          try {
	            for (var _iterator = config.avlTimePeriods[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {
	              keys = _step.value;
	
	              if (keys.name === timePeriodVal) {
	                timeInterval = keys.interval;
	                break;
	              }
	            }
	          } catch (err) {
	            _didIteratorError = true;
	            _iteratorError = err;
	          } finally {
	            try {
	              if (!_iteratorNormalCompletion && _iterator.return) {
	                _iterator.return();
	              }
	            } finally {
	              if (_didIteratorError) {
	                throw _iteratorError;
	              }
	            }
	          }
	
	          model.lock().prop('bin-size-ext', timeInterval * Number(timePeriodMultiplierVal)).prop('aggregation-fn-ext', config.avlAggMethods[aggMethodSelectMenuVal]).unlock();
	
	          // applyButton.updateVisual('disable');
	          // applyButton.updateVisual('enable');
	        },
	            timePeriodOnChange = function timePeriodOnChange() {
	          var timePeriodVal = timePeriodSelectMenu.value(),
	              timePeriodMultiplierVal = timeMulSelectMenu.value(),
	              prevTimePeroidMulVal = timePeriodMultiplierVal,
	              validTimePeriod = config.validTimePeriod,
	              validTimePeriodMultiplier = config.validTimePeriodMultiplier,
	              indexOfTimeUnit,
	              indexOfTimeMul;
	
	          indexOfTimeUnit = validTimePeriod.indexOf(timePeriodVal);
	          indexOfTimeMul = validTimePeriodMultiplier[indexOfTimeUnit].indexOf(Number(timePeriodMultiplierVal));
	
	          // console.log(indexOfTimeUnit, indexOfTimeMul);
	          timeMulSelectMenuOpt = '';
	          var _iteratorNormalCompletion2 = true;
	          var _didIteratorError2 = false;
	          var _iteratorError2 = undefined;
	
	          try {
	            for (var _iterator2 = validTimePeriodMultiplier[indexOfTimeUnit][Symbol.iterator](), _step2; !(_iteratorNormalCompletion2 = (_step2 = _iterator2.next()).done); _iteratorNormalCompletion2 = true) {
	              multiplierVal = _step2.value;
	
	              timeMulSelectMenuOpt += '<option value="' + multiplierVal + '">' + multiplierVal + '</option>';
	            }
	          } catch (err) {
	            _didIteratorError2 = true;
	            _iteratorError2 = err;
	          } finally {
	            try {
	              if (!_iteratorNormalCompletion2 && _iterator2.return) {
	                _iterator2.return();
	              }
	            } finally {
	              if (_didIteratorError2) {
	                throw _iteratorError2;
	              }
	            }
	          }
	
	          timeMulSelectMenu.updateList(timeMulSelectMenuOpt);
	
	          if (indexOfTimeMul < 0) {
	            timeMulSelectMenu.value(validTimePeriodMultiplier[indexOfTimeUnit][0].toString());
	          } else {
	            timeMulSelectMenu.value(prevTimePeroidMulVal);
	          }
	        };
	
	        group = new ComponentGroup(dependencies);
	        toolbar = new HorizontalToolbar(dependencies);
	
	        group.setConfig({
	          fill: '#fff',
	          borderThickness: 0
	        });
	
	        toolbar.setConfig({
	          fill: '#fff',
	          borderThickness: 0
	        });
	
	        label = new toolbox.Label('Aggregate Data:', dependencies, {
	          text: {
	            style: {
	              'font-size': '14',
	              'fill': '#696969'
	            }
	          }
	        });
	
	        toolboxCompConfig.timePeriodSelectMenu = timePeriodSelectMenu = new toolbox.SelectSymbol({
	          width: 80,
	          height: 20
	        }, dependencies, {
	          innerHTML: '<option value="time">Time Period</option>'
	        }, {
	          strokeWidth: 1,
	          stroke: 'rgba(102,102,102,0.5)',
	          symbolStrokeWidth: 0,
	          btnTextStyle: {
	            fontSize: 11
	          },
	          hoverFill: '#1e1f1f'
	        });
	
	        toolboxCompConfig.timeMulSelectMenu = timeMulSelectMenu = new toolbox.SelectSymbol({
	          width: 50,
	          height: 20
	        }, dependencies, {
	          innerHTML: '<option value="number">Multiplier</option>'
	        }, {
	          strokeWidth: 1,
	          stroke: 'rgba(102,102,102,0.5)',
	          symbolStrokeWidth: 0,
	          btnTextStyle: {
	            fontSize: 11
	          },
	          hoverFill: '#1e1f1f'
	        });
	
	        toolboxCompConfig.aggMethodSelectMenu = aggMethodSelectMenu = new toolbox.SelectSymbol({
	          width: 80,
	          height: 20
	        }, dependencies, {
	          innerHTML: '<option value="Formula">Method</option>'
	        }, {
	          strokeWidth: 1,
	          stroke: 'rgba(102,102,102,0.5)',
	          symbolStrokeWidth: 0,
	          btnTextStyle: {
	            fontSize: 11
	          },
	          hoverFill: '#1e1f1f'
	        });
	
	        toolboxCompConfig.applyButton = applyButton = new toolbox.Symbol('APPLY', true, dependencies, {
	          fill: '#555',
	          labelFill: '#fff',
	          hoverFill: '#555',
	          width: 30,
	          height: 20,
	          btnTextStyle: {
	            fontSize: 11
	          }
	        }).attachEventHandlers({
	          click: function click() {
	            apply();
	          }
	        });
	        toolboxCompConfig.resetButton = resetButton = new toolbox.Symbol('RESET', true, dependencies, {
	          fill: '#898b8b',
	          labelFill: '#fff',
	          hoverFill: '#898b8b',
	          width: 30,
	          height: 20,
	          btnTextStyle: {
	            fontSize: 11
	          }
	        }).attachEventHandlers({
	          'click': function click() {
	            console.log(this);
	          }
	        });
	
	        group.addSymbol(label);
	        group.addSymbol(timeMulSelectMenu);
	        group.addSymbol(timePeriodSelectMenu);
	        group.addSymbol(aggMethodSelectMenu);
	        group.addSymbol(applyButton);
	
	        group.addSymbol(resetButton);
	
	        SymbolStore.register('textBoxIcon', function (x, y, rad, w, h, padX, padY) {
	          var x1 = x - w / 2 + padX / 2,
	              x2 = x + w / 2 - padX / 2,
	              y1 = y - h / 2 + padY / 2,
	              y2 = y + h / 2 - padY / 2;
	
	          return ['M', x1, y1, 'L', x2, y1, 'L', x2, y2, 'L', x1, y2, 'Z'];
	        });
	
	        timeMulSelectMenu.attachEventHandlers({
	          click: {
	            fn: timeMulSelectMenu.edit
	          },
	          textOnBlur: function textOnBlur() {
	            timeMulSelectMenu.blur();
	          }
	        });
	        timePeriodSelectMenu.attachEventHandlers({
	          click: {
	            fn: timePeriodSelectMenu.edit
	          },
	          textOnBlur: function textOnBlur() {
	            timePeriodSelectMenu.blur();
	          },
	          textOnChange: function textOnChange() {
	            timePeriodSelectMenu.blur();
	            timePeriodOnChange();
	          }
	        });
	        aggMethodSelectMenu.attachEventHandlers({
	          click: {
	            fn: aggMethodSelectMenu.edit
	          },
	          textOnBlur: function textOnBlur() {
	            aggMethodSelectMenu.blur();
	          }
	        });
	
	        toolbar.addComponent(group);
	
	        return toolbar;
	      }
	    }, {
	      key: 'getLogicalSpace',
	      value: function getLogicalSpace(availableWidth, availableHeight) {
	        var logicalSpace,
	            width = 0,
	            height = 0,
	            i,
	            ln;
	
	        for (i = 0, ln = this.toolbars.length; i < ln; i++) {
	          logicalSpace = this.toolbars[i].getLogicalSpace();
	          width = Math.max(logicalSpace.width, width);
	          height += logicalSpace.height;
	          this.toolbars[i].width = logicalSpace.width;
	          this.toolbars[i].height = logicalSpace.height;
	        }
	        height += this.padding;
	        return {
	          width: width > availableWidth ? 0 : width,
	          height: height > availableHeight ? 0 : height
	        };
	      }
	    }, {
	      key: 'placeInCanvas',
	      value: function placeInCanvas(containerInstance) {
	        var _self = this,
	            tsObject = _self.tsObject;
	
	        _self.padding = 5;
	        tsObject.spaceManagerInstance.add([{
	          name: function name() {
	            return 'DataAggregator';
	          },
	          ref: function ref(obj) {
	            return obj['0'];
	          },
	          self: function self() {
	            return _self;
	          },
	          priority: function priority() {
	            return 2;
	          },
	          layout: function layout(obj) {
	            return obj.inline;
	          },
	          orientation: [{
	            type: function type(obj) {
	              return obj.horizontal;
	            },
	            position: [{
	              type: function type(obj) {
	                return obj.top;
	              },
	              alignment: [{
	                type: function type(obj) {
	                  return obj.left;
	                },
	                dimensions: [function () {
	                  var parent = this.getParentComponentGroup();
	                  return _self.getLogicalSpace(parent.getWidth(), parent.getHeight());
	                }]
	              }]
	            }]
	          }]
	        }]);
	      }
	    }, {
	      key: 'setDrawingConfiguration',
	      value: function setDrawingConfiguration(x, y, width, height, group) {
	        var mes = this.measurement;
	        mes.x = x;
	        mes.y = y;
	        mes.width = width;
	        mes.height = height;
	
	        this.parentGroup = group;
	
	        return this;
	      }
	    }, {
	      key: 'draw',
	      value: function draw(x, y, width, height, group) {
	        var self = this,
	            config = self.config,
	            toolboxCompConfig = config.toolboxComponent.config,
	            timePeriodSelectMenu = toolboxCompConfig.timePeriodSelectMenu,
	            timeMulSelectMenu = toolboxCompConfig.timeMulSelectMenu,
	            aggMethodSelectMenu = toolboxCompConfig.aggMethodSelectMenu,
	            currentAggregationObj,
	            measurement = self.measurement,
	            toolbars = self.toolbars,
	            ln,
	            i,
	            toolbar,
	            model = config.composition.reactiveModel,
	            timePeriodVal,
	            timePeriodSelectMenuOpt,
	            validTimePeriod,
	            indexOfTimeUnit,
	            multiplierVal,
	            timeMulSelectMenuOpt,
	            validTimePeriodMultiplier,
	            aggVal,
	            aggMethodSelectMenuOpt,
	            avlAggMethods,
	            onChange = function onChange() {
	          self.getValidAggregation();
	          currentAggregationObj = self.getCurrentAggreation();
	
	          timePeriodSelectMenuOpt = '';
	          timeMulSelectMenuOpt = '';
	          aggMethodSelectMenuOpt = '';
	
	          validTimePeriod = config.validTimePeriod;
	          validTimePeriodMultiplier = config.validTimePeriodMultiplier;
	          avlAggMethods = config.avlAggMethods;
	
	          var _iteratorNormalCompletion3 = true;
	          var _didIteratorError3 = false;
	          var _iteratorError3 = undefined;
	
	          try {
	            for (var _iterator3 = validTimePeriod[Symbol.iterator](), _step3; !(_iteratorNormalCompletion3 = (_step3 = _iterator3.next()).done); _iteratorNormalCompletion3 = true) {
	              timePeriodVal = _step3.value;
	
	              timePeriodSelectMenuOpt += '<option value="' + timePeriodVal + '">' + timePeriodVal + '</option>';
	            }
	          } catch (err) {
	            _didIteratorError3 = true;
	            _iteratorError3 = err;
	          } finally {
	            try {
	              if (!_iteratorNormalCompletion3 && _iterator3.return) {
	                _iterator3.return();
	              }
	            } finally {
	              if (_didIteratorError3) {
	                throw _iteratorError3;
	              }
	            }
	          }
	
	          timePeriodSelectMenu.updateList(timePeriodSelectMenuOpt);
	          timePeriodSelectMenu.value(currentAggregationObj.timePeriod);
	
	          indexOfTimeUnit = validTimePeriod.indexOf(currentAggregationObj.timePeriod);
	
	          if (indexOfTimeUnit >= 0) {
	            var _iteratorNormalCompletion4 = true;
	            var _didIteratorError4 = false;
	            var _iteratorError4 = undefined;
	
	            try {
	              for (var _iterator4 = validTimePeriodMultiplier[indexOfTimeUnit][Symbol.iterator](), _step4; !(_iteratorNormalCompletion4 = (_step4 = _iterator4.next()).done); _iteratorNormalCompletion4 = true) {
	                multiplierVal = _step4.value;
	
	                timeMulSelectMenuOpt += '<option value="' + multiplierVal + '">' + multiplierVal + '</option>';
	              }
	            } catch (err) {
	              _didIteratorError4 = true;
	              _iteratorError4 = err;
	            } finally {
	              try {
	                if (!_iteratorNormalCompletion4 && _iterator4.return) {
	                  _iterator4.return();
	                }
	              } finally {
	                if (_didIteratorError4) {
	                  throw _iteratorError4;
	                }
	              }
	            }
	          }
	
	          timeMulSelectMenu.updateList(timeMulSelectMenuOpt);
	          timeMulSelectMenu.value(currentAggregationObj.timePeriodMultiplier.toString());
	
	          for (aggVal in avlAggMethods) {
	            if (avlAggMethods[aggVal].nickName === 'Invalid') {
	              aggMethodSelectMenuOpt += '<option disabled hidden value="' + avlAggMethods[aggVal].nickName + '">' + avlAggMethods[aggVal].formalName + '</option>';
	            } else {
	              aggMethodSelectMenuOpt += '<option value="' + avlAggMethods[aggVal].nickName + '">' + avlAggMethods[aggVal].formalName + '</option>';
	            }
	          }
	
	          aggMethodSelectMenu.updateList(aggMethodSelectMenuOpt);
	
	          aggMethodSelectMenu.value(currentAggregationObj.aggregationMethod.value);
	
	          // self.aggregation = {
	          //   timePeriod: currentAggregationObj.timePeriod,
	          //   timePeriodMultiplier: currentAggregationObj.timePeriodMultiplier,
	          //   aggregationMethod: currentAggregationObj.aggregationMethod.value
	          // };
	        };
	
	        self.getAvailablelAggreagation();
	
	        x = x === undefined ? measurement.x : x;
	        y = y === undefined ? measurement.y : y;
	        width = width === undefined ? measurement.width : width;
	        height = height === undefined ? measurement.height : height;
	        group = group === undefined ? self.parentGroup : group;
	        if (width && height) {
	          for (i = 0, ln = toolbars.length; i < ln; i++) {
	            toolbar = toolbars[i];
	            toolbar.draw(x, y);
	          }
	        }
	        onChange();
	
	        model.onPropsChange(['bin-size', 'aggregation-fn'], function () {
	          onChange();
	        });
	      }
	    }, {
	      key: 'rangeChangeCallback',
	      value: function rangeChangeCallback() {
	        this.getValidAggregation();
	        this.draw();
	      }
	    }, {
	      key: 'dispose',
	      value: function dispose() {
	        // dispose extension
	      }
	    }, {
	      key: 'aggregation',
	      get: function get() {
	        return this.appliedAggregation;
	      },
	      set: function set(obj) {
	        this.appliedAggregation.timePeriod = obj.timePeriod;
	        this.appliedAggregation.timePeriodMultiplier = obj.timePeriodMultiplier;
	        this.appliedAggregation.aggregationMethod = obj.aggregationMethod;
	      }
	    }]);
	
	    return Aggregator;
	  }();
	
	  return Aggregator;
	};

/***/ }
/******/ ]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAgNDNmYTI3ZmIwMGY1YTU1MGYwYWQiLCJ3ZWJwYWNrOi8vLy4vc3JjL2luZGV4LmpzIiwid2VicGFjazovLy8od2VicGFjaykvYnVpbGRpbi9tb2R1bGUuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2ZjdHMtZXh0LWFnZ3JlZ2F0b3IuanMiXSwibmFtZXMiOlsiQWdncmVnYXRvckdldHRlciIsInJlcXVpcmUiLCJlbnYiLCJmYWN0b3J5IiwibW9kdWxlIiwiZXhwb3J0cyIsImRvY3VtZW50Iiwid2luIiwiRXJyb3IiLCJBZ2dyZWdhdG9yIiwid2luZG93IiwiX3dpbmRvdyIsIndpbmRvd0V4aXN0cyIsIkZDIiwiRnVzaW9uQ2hhcnRzIiwicmVnaXN0ZXIiLCJyZWdpc3RlckNvbXBvbmVudCIsImRlcCIsImFwcGxpZWRBZ2dyZWdhdGlvbiIsInRpbWVQZXJpb2QiLCJ0aW1lUGVyaW9kTXVsdGlwbGllciIsImFnZ3JlZ2F0aW9uTWV0aG9kIiwiY29uZmlnIiwiZGF0YUFnZyIsImF2bFRpbWVQZXJpb2RzIiwiZ2V0QWdncmVnYXRpb25UaW1lUnVsZXMiLCJpIiwibGVuIiwiYXZsQWdnTWV0aG9kcyIsImdldEFsbEFnZ3JlZ2F0aW9uTWV0aG9kIiwiYXZsVGltZU11bHRpcGxpZXIiLCJsZW5ndGgiLCJwdXNoIiwicG9zc2libGVGYWN0b3JzIiwic2VsZiIsInRzT2JqZWN0IiwiaiIsImxlbjEiLCJsZW4yIiwibWF4TnVtT2ZQbG90IiwiY29tcG9zaXRpb24iLCJyZWFjdGl2ZU1vZGVsIiwibW9kZWwiLCJtdWx0aXBsaWVyc0FyciIsImN1cnJlbnRUaW1lTGVuZ3RoIiwidGltZSIsImV4cGVjdGVkVGltZSIsIm11bHRpcGxpZXIiLCJtaW5CaW5TaXplIiwiZ2xvYmFsUmVhY3RpdmVNb2RlbCIsInZhbGlkVGltZVBlcmlvZCIsInZhbGlkVGltZVBlcmlvZE11bHRpcGxpZXIiLCJuYW1lIiwiaW50ZXJ2YWwiLCJjdXJyZW50QWdnQmluIiwiY3VycmVudEFnZ01ldGhvZCIsInN1aXRhYmxlSW50ZXJ2YWwiLCJiaW5TaXplIiwicHJvcCIsImlzRmluaXRlIiwidGltZVJ1bGVzIiwiZ2V0U3VpdGFibGVJbnRlcnZhbCIsInhBeGlzIiwiZ2V0U2NhbGVPYmoiLCJnZXRJbnRlcnZhbE9iaiIsImdldENvbmZpZyIsIm1pbm9yIiwidGltZVVuaXQiLCJzdGVwIiwiZm9ybWFsTmFtZSIsIm5pY2tOYW1lIiwidmFsdWUiLCJ0ZXh0Iiwib2JqIiwidGltZVBlcmlvZEluZGV4IiwidG9vbGJveENvbXBvbmVudCIsImFwaSIsInN0b3JlIiwic2F2ZVRvIiwicmVxdWlyZWRQYXJhbXMiLCJhY3F1aXJlIiwiaWkiLCJwYXJhbSIsImFyZ3VtZW50cyIsImNoYXJ0SW5zdGFuY2UiLCJhcGlJbnN0YW5jZSIsImdldENvbXBvbmVudFN0b3JlIiwiZ2V0Q2FudmFzQnlJbmRleCIsImltcGwiLCJnZXREYXRhQWdncmVnYXRvciIsInRvb2xib3giLCJnZXRDb21wb25lbnQiLCJ0b29sYmFycyIsIm1lYXN1cmVtZW50IiwiY3JlYXRlVG9vbGJhciIsImdyb3VwIiwidG9vbGJhciIsInRpbWVNdWxTZWxlY3RNZW51IiwidGltZVBlcmlvZFNlbGVjdE1lbnUiLCJhZ2dNZXRob2RTZWxlY3RNZW51IiwicmVzZXRCdXR0b24iLCJhcHBseUJ1dHRvbiIsImxhYmVsIiwidG9vbGJveENvbXBDb25maWciLCJIb3Jpem9udGFsVG9vbGJhciIsIkNvbXBvbmVudEdyb3VwIiwiU3ltYm9sU3RvcmUiLCJncmFwaGljcyIsInBhcGVyIiwiY29udGFpbmVyIiwiY2hhcnQiLCJzbWFydExhYmVsIiwibXVsdGlwbGllclZhbCIsInRpbWVNdWxTZWxlY3RNZW51T3B0IiwiZGVwZW5kZW5jaWVzIiwiY2hhcnRDb250YWluZXIiLCJhcHBseSIsInRpbWVQZXJpb2RWYWwiLCJ0aW1lUGVyaW9kTXVsdGlwbGllclZhbCIsImFnZ01ldGhvZFNlbGVjdE1lbnVWYWwiLCJrZXlzIiwidGltZUludGVydmFsIiwibG9jayIsIk51bWJlciIsInVubG9jayIsInRpbWVQZXJpb2RPbkNoYW5nZSIsInByZXZUaW1lUGVyb2lkTXVsVmFsIiwiaW5kZXhPZlRpbWVVbml0IiwiaW5kZXhPZlRpbWVNdWwiLCJpbmRleE9mIiwidXBkYXRlTGlzdCIsInRvU3RyaW5nIiwic2V0Q29uZmlnIiwiZmlsbCIsImJvcmRlclRoaWNrbmVzcyIsIkxhYmVsIiwic3R5bGUiLCJTZWxlY3RTeW1ib2wiLCJ3aWR0aCIsImhlaWdodCIsImlubmVySFRNTCIsInN0cm9rZVdpZHRoIiwic3Ryb2tlIiwic3ltYm9sU3Ryb2tlV2lkdGgiLCJidG5UZXh0U3R5bGUiLCJmb250U2l6ZSIsImhvdmVyRmlsbCIsIlN5bWJvbCIsImxhYmVsRmlsbCIsImF0dGFjaEV2ZW50SGFuZGxlcnMiLCJjbGljayIsImNvbnNvbGUiLCJsb2ciLCJhZGRTeW1ib2wiLCJ4IiwieSIsInJhZCIsInciLCJoIiwicGFkWCIsInBhZFkiLCJ4MSIsIngyIiwieTEiLCJ5MiIsImZuIiwiZWRpdCIsInRleHRPbkJsdXIiLCJibHVyIiwidGV4dE9uQ2hhbmdlIiwiYWRkQ29tcG9uZW50IiwiYXZhaWxhYmxlV2lkdGgiLCJhdmFpbGFibGVIZWlnaHQiLCJsb2dpY2FsU3BhY2UiLCJsbiIsImdldExvZ2ljYWxTcGFjZSIsIk1hdGgiLCJtYXgiLCJwYWRkaW5nIiwiY29udGFpbmVySW5zdGFuY2UiLCJzcGFjZU1hbmFnZXJJbnN0YW5jZSIsImFkZCIsInJlZiIsInByaW9yaXR5IiwibGF5b3V0IiwiaW5saW5lIiwib3JpZW50YXRpb24iLCJ0eXBlIiwiaG9yaXpvbnRhbCIsInBvc2l0aW9uIiwidG9wIiwiYWxpZ25tZW50IiwibGVmdCIsImRpbWVuc2lvbnMiLCJwYXJlbnQiLCJnZXRQYXJlbnRDb21wb25lbnRHcm91cCIsImdldFdpZHRoIiwiZ2V0SGVpZ2h0IiwibWVzIiwicGFyZW50R3JvdXAiLCJjdXJyZW50QWdncmVnYXRpb25PYmoiLCJ0aW1lUGVyaW9kU2VsZWN0TWVudU9wdCIsImFnZ1ZhbCIsImFnZ01ldGhvZFNlbGVjdE1lbnVPcHQiLCJvbkNoYW5nZSIsImdldFZhbGlkQWdncmVnYXRpb24iLCJnZXRDdXJyZW50QWdncmVhdGlvbiIsImdldEF2YWlsYWJsZWxBZ2dyZWFnYXRpb24iLCJ1bmRlZmluZWQiLCJkcmF3Iiwib25Qcm9wc0NoYW5nZSJdLCJtYXBwaW5ncyI6IjtBQUFBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLHVCQUFlO0FBQ2Y7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7OztBQUdBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7Ozs7Ozs7QUN0Q0E7Ozs7QUFDQSxLQUFNQSxtQkFBbUIsbUJBQUFDLENBQVEsQ0FBUixDQUF6Qjs7QUFFQSxFQUFDLENBQUMsVUFBVUMsR0FBVixFQUFlQyxPQUFmLEVBQXdCO0FBQ3hCLE9BQUksZ0NBQU9DLE1BQVAsT0FBa0IsUUFBbEIsSUFBOEJBLE9BQU9DLE9BQXpDLEVBQWtEO0FBQ2hERCxZQUFPQyxPQUFQLEdBQWlCSCxJQUFJSSxRQUFKLEdBQ1pILFFBQVFELEdBQVIsQ0FEWSxHQUNHLFVBQVVLLEdBQVYsRUFBZTtBQUM5QixXQUFJLENBQUNBLElBQUlELFFBQVQsRUFBbUI7QUFDakIsZUFBTSxJQUFJRSxLQUFKLENBQVUsa0NBQVYsQ0FBTjtBQUNEO0FBQ0QsY0FBT0wsUUFBUUksR0FBUixFQUFhLElBQWIsQ0FBUDtBQUNELE1BTko7QUFPRCxJQVJELE1BUU87QUFDTEwsU0FBSU8sVUFBSixHQUFpQk4sUUFBUUQsR0FBUixFQUFhLElBQWIsQ0FBakI7QUFDRDtBQUNGLEVBWkEsRUFZRSxPQUFPUSxNQUFQLEtBQWtCLFdBQWxCLEdBQWdDQSxNQUFoQyxZQVpGLEVBWWlELFVBQVVDLE9BQVYsRUFBbUJDLFlBQW5CLEVBQWlDO0FBQ2pGLE9BQUlDLEtBQUtGLFFBQVFHLFlBQWpC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QUFVSixTQUFTbEUsQ0FBVCxDQUFWO0FBQ0FzRSxxQkFBUWlILElBQVIsQ0FBYXZELENBQWIsRUFBZ0JDLENBQWhCO0FBQ0Q7QUFDRjtBQUNEaUQ7O0FBRUFsSyxlQUFNd0ssYUFBTixDQUFvQixDQUFDLFVBQUQsRUFBYSxnQkFBYixDQUFwQixFQUNBLFlBQVk7QUFDVk47QUFDRCxVQUhEO0FBSUQ7QUE3b0IyQjtBQUFBO0FBQUEsNkNBK29CTDtBQUNyQixjQUFLQyxtQkFBTDtBQUNBLGNBQUtJLElBQUw7QUFDRDtBQWxwQjJCO0FBQUE7QUFBQSxpQ0FvcEJqQjtBQUNUO0FBQ0Q7QUF0cEIyQjtBQUFBO0FBQUEsMkJBNEJUO0FBQ2pCLGdCQUFPLEtBQUsvTCxrQkFBWjtBQUNELFFBOUIyQjtBQUFBLHlCQWdDWHVELEdBaENXLEVBZ0NOO0FBQ3BCLGNBQUt2RCxrQkFBTCxDQUF3QkMsVUFBeEIsR0FBcUNzRCxJQUFJdEQsVUFBekM7QUFDQSxjQUFLRCxrQkFBTCxDQUF3QkUsb0JBQXhCLEdBQStDcUQsSUFBSXJELG9CQUFuRDtBQUNBLGNBQUtGLGtCQUFMLENBQXdCRyxpQkFBeEIsR0FBNENvRCxJQUFJcEQsaUJBQWhEO0FBQ0Q7QUFwQzJCOztBQUFBO0FBQUE7O0FBd3BCOUIsVUFBT1osVUFBUDtBQUNELEVBenBCRCxDIiwiZmlsZSI6ImZjdHMtZXh0LWRhdGFhZ2dyZWdhdG9yLWVzNS5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyIgXHQvLyBUaGUgbW9kdWxlIGNhY2hlXG4gXHR2YXIgaW5zdGFsbGVkTW9kdWxlcyA9IHt9O1xuXG4gXHQvLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuIFx0ZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuXG4gXHRcdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuIFx0XHRpZihpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSlcbiBcdFx0XHRyZXR1cm4gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0uZXhwb3J0cztcblxuIFx0XHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuIFx0XHR2YXIgbW9kdWxlID0gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0gPSB7XG4gXHRcdFx0ZXhwb3J0czoge30sXG4gXHRcdFx0aWQ6IG1vZHVsZUlkLFxuIFx0XHRcdGxvYWRlZDogZmFsc2VcbiBcdFx0fTtcblxuIFx0XHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cbiBcdFx0bW9kdWxlc1ttb2R1bGVJZF0uY2FsbChtb2R1bGUuZXhwb3J0cywgbW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cbiBcdFx0Ly8gRmxhZyB0aGUgbW9kdWxlIGFzIGxvYWRlZFxuIFx0XHRtb2R1bGUubG9hZGVkID0gdHJ1ZTtcblxuIFx0XHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuIFx0XHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG4gXHR9XG5cblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGVzIG9iamVjdCAoX193ZWJwYWNrX21vZHVsZXNfXylcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubSA9IG1vZHVsZXM7XG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlIGNhY2hlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmMgPSBpbnN0YWxsZWRNb2R1bGVzO1xuXG4gXHQvLyBfX3dlYnBhY2tfcHVibGljX3BhdGhfX1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5wID0gXCJcIjtcblxuIFx0Ly8gTG9hZCBlbnRyeSBtb2R1bGUgYW5kIHJldHVybiBleHBvcnRzXG4gXHRyZXR1cm4gX193ZWJwYWNrX3JlcXVpcmVfXygwKTtcblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyB3ZWJwYWNrL2Jvb3RzdHJhcCA0M2ZhMjdmYjAwZjVhNTUwZjBhZCIsIid1c2Ugc3RyaWN0JztcbmNvbnN0IEFnZ3JlZ2F0b3JHZXR0ZXIgPSByZXF1aXJlKCcuL2ZjdHMtZXh0LWFnZ3JlZ2F0b3InKTtcblxuOyhmdW5jdGlvbiAoZW52LCBmYWN0b3J5KSB7XG4gIGlmICh0eXBlb2YgbW9kdWxlID09PSAnb2JqZWN0JyAmJiBtb2R1bGUuZXhwb3J0cykge1xuICAgIG1vZHVsZS5leHBvcnRzID0gZW52LmRvY3VtZW50XG4gICAgICAgPyBmYWN0b3J5KGVudikgOiBmdW5jdGlvbiAod2luKSB7XG4gICAgICAgICBpZiAoIXdpbi5kb2N1bWVudCkge1xuICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1dpbmRvdyB3aXRoIGRvY3VtZW50IG5vdCBwcmVzZW50Jyk7XG4gICAgICAgICB9XG4gICAgICAgICByZXR1cm4gZmFjdG9yeSh3aW4sIHRydWUpO1xuICAgICAgIH07XG4gIH0gZWxzZSB7XG4gICAgZW52LkFnZ3JlZ2F0b3IgPSBmYWN0b3J5KGVudiwgdHJ1ZSk7XG4gIH1cbn0pKHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnID8gd2luZG93IDogdGhpcywgZnVuY3Rpb24gKF93aW5kb3csIHdpbmRvd0V4aXN0cykge1xuICB2YXIgRkMgPSBfd2luZG93LkZ1c2lvbkNoYXJ0cztcblxuICBGQy5yZWdpc3RlcignZXh0ZW5zaW9uJywgWydwcml2YXRlJywgJ2RhdGEtYWdncmVnYXRvcicsIGZ1bmN0aW9uICgpIHtcbiAgICBGQy5yZWdpc3RlckNvbXBvbmVudCgnZXh0ZW5zaW9ucycsICdkYXRhLWFnZ3JlZ2F0b3InLCBBZ2dyZWdhdG9yR2V0dGVyKHtGQzogRkN9KSk7XG4gIH1dKTtcbn0pO1xuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vc3JjL2luZGV4LmpzIiwibW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihtb2R1bGUpIHtcblx0aWYoIW1vZHVsZS53ZWJwYWNrUG9seWZpbGwpIHtcblx0XHRtb2R1bGUuZGVwcmVjYXRlID0gZnVuY3Rpb24oKSB7fTtcblx0XHRtb2R1bGUucGF0aHMgPSBbXTtcblx0XHQvLyBtb2R1bGUucGFyZW50ID0gdW5kZWZpbmVkIGJ5IGRlZmF1bHRcblx0XHRtb2R1bGUuY2hpbGRyZW4gPSBbXTtcblx0XHRtb2R1bGUud2VicGFja1BvbHlmaWxsID0gMTtcblx0fVxuXHRyZXR1cm4gbW9kdWxlO1xufVxuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gKHdlYnBhY2spL2J1aWxkaW4vbW9kdWxlLmpzXG4vLyBtb2R1bGUgaWQgPSAxXG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIid1c2Ugc3RyaWN0JztcblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoZGVwKSB7XG4gIC8qKlxuICAgKiBDbGFzcyByZXByZXNlbnRpbmcgdGhlIERhdGEgQWdncmVnYXRvci5cbiAgICovXG4gIGNsYXNzIEFnZ3JlZ2F0b3Ige1xuICAgIC8qKlxuICAgICAqIENyZWF0ZSBhIEFnZ3JlZ2F0b3IuXG4gICAgICogQHR5cGVkZWYge29iamVjdH0gQWdncmVnYXRvci5hZ2dyZWdhdGlvblxuICAgICAqIEBwcm9wZXJ0eSB7c3RyaW5nfSB0aW1lUGVyaW9kIC0gVGhlIHRpbWUgaW50ZXJ2YWwgb2YgYWdncmVnYXRpb24uXG4gICAgICogQHByb3BlcnR5IHtudW1iZXJ9IHRpbWVQZXJpb2RNdWx0aXBsaWVyIC0gVGhlIG11bHRpcGxpZXIgb2YgdGltZSBpbnRlcnZhbC5cbiAgICAgKiBAcHJvcGVydHkge3N0cmluZ30gYWdncmVnYXRpb25NZXRob2QgLSBUaGUgbWV0aG9kIGFwcGxpZWQgdG8gYWdncmVnYXRlLlxuICAgICAqL1xuICAgIGNvbnN0cnVjdG9yICgpIHtcbiAgICAgIC8qKlxuICAgICAgICogQHByaXZhdGVcbiAgICAgICAqL1xuICAgICAgdGhpcy5hcHBsaWVkQWdncmVnYXRpb24gPSB7XG4gICAgICAgIHRpbWVQZXJpb2Q6IG51bGwsXG4gICAgICAgIHRpbWVQZXJpb2RNdWx0aXBsaWVyOiBudWxsLFxuICAgICAgICBhZ2dyZWdhdGlvbk1ldGhvZDogbnVsbFxuICAgICAgfTtcbiAgICAgIHRoaXMuY29uZmlnID0ge307XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQW4gb2JqZWN0IHJlcHJlc2VudGluZyB0aGUgdGltZVBlcmlvZCwgdGltZVBlcmlvZE11bHRpcGxpZXIsIGFnZ3JlZ2F0aW9uTWV0aG9kLlxuICAgICAqIEB0eXBlIHtBZ2dyZWdhdG9yLmFnZ3JlZ2F0aW9ufVxuICAgICAqL1xuICAgIGdldCBhZ2dyZWdhdGlvbiAoKSB7XG4gICAgICByZXR1cm4gdGhpcy5hcHBsaWVkQWdncmVnYXRpb247XG4gICAgfVxuXG4gICAgc2V0IGFnZ3JlZ2F0aW9uIChvYmopIHtcbiAgICAgIHRoaXMuYXBwbGllZEFnZ3JlZ2F0aW9uLnRpbWVQZXJpb2QgPSBvYmoudGltZVBlcmlvZDtcbiAgICAgIHRoaXMuYXBwbGllZEFnZ3JlZ2F0aW9uLnRpbWVQZXJpb2RNdWx0aXBsaWVyID0gb2JqLnRpbWVQZXJpb2RNdWx0aXBsaWVyO1xuICAgICAgdGhpcy5hcHBsaWVkQWdncmVnYXRpb24uYWdncmVnYXRpb25NZXRob2QgPSBvYmouYWdncmVnYXRpb25NZXRob2Q7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogU2V0cyBhdmFpbGFibGUgYWdncmVnYXRpb24gb3B0aW9ucyBpbiBjb25maWd1cmF0aW9uIG9mIGV4dGVuc2lvblxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgZ2V0QXZhaWxhYmxlbEFnZ3JlYWdhdGlvbiAoKSB7XG4gICAgICB2YXIgY29uZmlnID0gdGhpcy5jb25maWcsXG4gICAgICAgIGRhdGFBZ2cgPSBjb25maWcuZGF0YUFnZyxcbiAgICAgICAgYXZsVGltZVBlcmlvZHMgPSBjb25maWcuYXZsVGltZVBlcmlvZHMgPSBkYXRhQWdnLmdldEFnZ3JlZ2F0aW9uVGltZVJ1bGVzKCksXG4gICAgICAgIGksXG4gICAgICAgIGxlbjtcblxuICAgICAgY29uZmlnLmF2bEFnZ01ldGhvZHMgPSBkYXRhQWdnLmdldEFsbEFnZ3JlZ2F0aW9uTWV0aG9kKCk7XG5cbiAgICAgIGNvbmZpZy5hdmxUaW1lTXVsdGlwbGllciA9IFtdO1xuICAgICAgbGVuID0gYXZsVGltZVBlcmlvZHMubGVuZ3RoO1xuXG4gICAgICBmb3IgKGkgPSAwOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgICAgY29uZmlnLmF2bFRpbWVNdWx0aXBsaWVyLnB1c2goYXZsVGltZVBlcmlvZHNbaV0ucG9zc2libGVGYWN0b3JzKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDYWxjdWxhdGVzIHZhbGlkIGFnZ3JlZ2F0aW9uIHRpbWUgcGVyaW9kcyBhbmQgY29ycmVzcG9uZGluZyBtdWx0aXBsaWVyc1xuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgZ2V0VmFsaWRBZ2dyZWdhdGlvbiAoKSB7XG4gICAgICB2YXIgc2VsZiA9IHRoaXMsXG4gICAgICAgIGNvbmZpZyA9IHNlbGYuY29uZmlnLFxuICAgICAgICB0c09iamVjdCA9IHNlbGYudHNPYmplY3QsXG4gICAgICAgIGksXG4gICAgICAgIGosXG4gICAgICAgIGxlbjEsXG4gICAgICAgIGxlbjIsXG4gICAgICAgIGF2bFRpbWVQZXJpb2RzLFxuICAgICAgICBhdmxUaW1lTXVsdGlwbGllcixcbiAgICAgICAgLy8gbWluTnVtT2ZQbG90ID0gNSxcbiAgICAgICAgbWF4TnVtT2ZQbG90ID0gY29uZmlnLmNvbXBvc2l0aW9uLnJlYWN0aXZlTW9kZWwubW9kZWxbJ21heC1wbG90LXBvaW50J10sXG4gICAgICAgIG11bHRpcGxpZXJzQXJyLFxuICAgICAgICBjdXJyZW50VGltZUxlbmd0aCxcbiAgICAgICAgdGltZVBlcmlvZCxcbiAgICAgICAgdGltZSxcbiAgICAgICAgZXhwZWN0ZWRUaW1lLFxuICAgICAgICBtdWx0aXBsaWVyLFxuICAgICAgICBtaW5CaW5TaXplO1xuICAgICAgICAvLyBtYXhCaW5TaXplO1xuXG4gICAgICBjb25maWcuY3VycmVudFRpbWVMZW5ndGggPSB0c09iamVjdC5nbG9iYWxSZWFjdGl2ZU1vZGVsLm1vZGVsWyd4LWF4aXMtdmlzaWJsZS1yYW5nZS1lbmQnXSAtXG4gICAgICAgIHRzT2JqZWN0Lmdsb2JhbFJlYWN0aXZlTW9kZWwubW9kZWxbJ3gtYXhpcy12aXNpYmxlLXJhbmdlLXN0YXJ0J107XG5cbiAgICAgIGF2bFRpbWVQZXJpb2RzID0gY29uZmlnLmF2bFRpbWVQZXJpb2RzO1xuICAgICAgYXZsVGltZU11bHRpcGxpZXIgPSBjb25maWcuYXZsVGltZU11bHRpcGxpZXI7XG4gICAgICBjdXJyZW50VGltZUxlbmd0aCA9IGNvbmZpZy5jdXJyZW50VGltZUxlbmd0aDtcblxuICAgICAgY29uZmlnLm1pbkJpblNpemUgPSBtaW5CaW5TaXplID0gY3VycmVudFRpbWVMZW5ndGggLyBtYXhOdW1PZlBsb3Q7XG4gICAgICAvLyBjb25maWcubWF4QmluU2l6ZSA9IG1heEJpblNpemUgPSBjdXJyZW50VGltZUxlbmd0aCAvIG1pbk51bU9mUGxvdDtcblxuICAgICAgY29uZmlnLnZhbGlkVGltZVBlcmlvZCA9IFtdO1xuICAgICAgY29uZmlnLnZhbGlkVGltZVBlcmlvZE11bHRpcGxpZXIgPSBbXTtcblxuICAgICAgZm9yIChpID0gMCwgbGVuMSA9IGF2bFRpbWVQZXJpb2RzLmxlbmd0aDsgaSA8IGxlbjE7IGkrKykge1xuICAgICAgICB0aW1lUGVyaW9kID0gYXZsVGltZVBlcmlvZHNbaV0ubmFtZTtcbiAgICAgICAgdGltZSA9IGF2bFRpbWVQZXJpb2RzW2ldLmludGVydmFsO1xuICAgICAgICBtdWx0aXBsaWVyc0FyciA9IFtdO1xuXG4gICAgICAgIGZvciAoaiA9IDAsIGxlbjIgPSBhdmxUaW1lTXVsdGlwbGllcltpXS5sZW5ndGg7IGogPCBsZW4yOyBqKyspIHtcbiAgICAgICAgICBtdWx0aXBsaWVyID0gYXZsVGltZU11bHRpcGxpZXJbaV1bal07XG4gICAgICAgICAgZXhwZWN0ZWRUaW1lID0gbXVsdGlwbGllciAqIHRpbWU7XG5cbiAgICAgICAgICAvLyBpZiAoKGV4cGVjdGVkVGltZSA+PSBtaW5CaW5TaXplKSAmJiAoZXhwZWN0ZWRUaW1lIDw9IG1heEJpblNpemUpKSB7XG4gICAgICAgICAgaWYgKChleHBlY3RlZFRpbWUgPj0gbWluQmluU2l6ZSkpIHtcbiAgICAgICAgICAgIG11bHRpcGxpZXJzQXJyLnB1c2goYXZsVGltZU11bHRpcGxpZXJbaV1bal0pO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAobXVsdGlwbGllcnNBcnIubGVuZ3RoID4gMCkge1xuICAgICAgICAgIGNvbmZpZy52YWxpZFRpbWVQZXJpb2RNdWx0aXBsaWVyLnB1c2gobXVsdGlwbGllcnNBcnIpO1xuICAgICAgICAgIGNvbmZpZy52YWxpZFRpbWVQZXJpb2QucHVzaCh0aW1lUGVyaW9kKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgLy8gY29uc29sZS5sb2coJ1RpbWUgUGVyaW9kOiAnLCBjb25maWcudmFsaWRUaW1lUGVyaW9kKTtcbiAgICAgIC8vIGNvbnNvbGUubG9nKCdOdW1iZXIgT2YgTXVsdGlwbGllcnM6ICcsIGNvbmZpZy52YWxpZFRpbWVQZXJpb2RNdWx0aXBsaWVyKTtcbiAgICAgIC8vIGNvbnNvbGUubG9nKCdNZXRob2RzOiAnLCBjb25maWcuYXZsQWdnTWV0aG9kcyk7XG4gICAgfVxuXG4gICAgZ2V0Q3VycmVudEFnZ3JlYXRpb24gKCkge1xuICAgICAgdmFyIHNlbGYgPSB0aGlzLFxuICAgICAgICBjb25maWcgPSBzZWxmLmNvbmZpZyxcbiAgICAgICAgZGF0YUFnZyA9IGNvbmZpZy5kYXRhQWdnLFxuICAgICAgICBjb21wb3NpdGlvbiA9IGNvbmZpZy5jb21wb3NpdGlvbixcbiAgICAgICAgbW9kZWwgPSBjb21wb3NpdGlvbi5yZWFjdGl2ZU1vZGVsLFxuICAgICAgICBjdXJyZW50QWdnQmluLFxuICAgICAgICBjdXJyZW50QWdnTWV0aG9kLFxuICAgICAgICBzdWl0YWJsZUludGVydmFsLFxuICAgICAgICBiaW5TaXplO1xuXG4gICAgICBiaW5TaXplID0gbW9kZWwucHJvcCgnYmluLXNpemUnKSAtIDE7XG5cbiAgICAgIGlmIChpc0Zpbml0ZShiaW5TaXplKSkge1xuICAgICAgICBzdWl0YWJsZUludGVydmFsID0gZGF0YUFnZy50aW1lUnVsZXMuZ2V0U3VpdGFibGVJbnRlcnZhbChiaW5TaXplKTtcbiAgICAgICAgY3VycmVudEFnZ01ldGhvZCA9IG1vZGVsLnByb3AoJ2FnZ3JlZ2F0aW9uLWZuJyk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBzdWl0YWJsZUludGVydmFsID0gY29tcG9zaXRpb24ueEF4aXMuZ2V0U2NhbGVPYmooKS5nZXRJbnRlcnZhbE9iaigpLmdldENvbmZpZygnaW50ZXJ2YWxzJykubWlub3IudGltZVVuaXQ7XG4gICAgICAgIGNvbmZpZy52YWxpZFRpbWVQZXJpb2QucHVzaChzdWl0YWJsZUludGVydmFsLm5hbWUpO1xuICAgICAgICBjb25maWcudmFsaWRUaW1lUGVyaW9kTXVsdGlwbGllci5wdXNoKFtzdWl0YWJsZUludGVydmFsLnN0ZXBdKTtcbiAgICAgICAgY3VycmVudEFnZ01ldGhvZCA9IGNvbmZpZy5hdmxBZ2dNZXRob2RzWydpbnZhbGlkJ10gPSB7XG4gICAgICAgICAgZm9ybWFsTmFtZTogJ0ludmFsaWQnLFxuICAgICAgICAgIG5pY2tOYW1lOiAnSW52YWxpZCdcbiAgICAgICAgfTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHtcbiAgICAgICAgdGltZVBlcmlvZDogc3VpdGFibGVJbnRlcnZhbC5uYW1lLFxuICAgICAgICB0aW1lUGVyaW9kTXVsdGlwbGllcjogc3VpdGFibGVJbnRlcnZhbC5zdGVwLFxuICAgICAgICBhZ2dyZWdhdGlvbk1ldGhvZDoge1xuICAgICAgICAgIHZhbHVlOiBjdXJyZW50QWdnTWV0aG9kLm5pY2tOYW1lLFxuICAgICAgICAgIHRleHQ6IGN1cnJlbnRBZ2dNZXRob2QuZm9ybWFsTmFtZVxuICAgICAgICB9XG4gICAgICB9O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFNldCBBZ2dyZWdhdGlvbiBvbiB0aW1lIHNlcmllc1xuICAgICAqIEBwYXJhbSAge29iamVjdH0gb2JqXG4gICAgICogQHByb3BlcnR5IHtzdHJpbmd9IHRpbWVQZXJpb2QgLSBUaGUgdGltZSBpbnRlcnZhbCBvZiBhZ2dyZWdhdGlvbi5cbiAgICAgKiBAcHJvcGVydHkge251bWJlcn0gdGltZVBlcmlvZE11bHRpcGxpZXIgLSBUaGUgbXVsdGlwbGllciBvZiB0aW1lIGludGVydmFsLlxuICAgICAqIEBwcm9wZXJ0eSB7c3RyaW5nfSBhZ2dyZWdhdGlvbk1ldGhvZCAtIFRoZSBtZXRob2QgYXBwbGllZCB0byBhZ2dyZWdhdGUuXG4gICAgICovXG4gICAgc2V0QWdncmVnYXRpb24gKG9iaikge1xuICAgICAgdmFyIGF2bEFnZ01ldGhvZHMsXG4gICAgICAgIHZhbGlkVGltZVBlcmlvZCxcbiAgICAgICAgdGltZVBlcmlvZEluZGV4LFxuICAgICAgICB2YWxpZFRpbWVQZXJpb2RNdWx0aXBsaWVyLFxuICAgICAgICBjb25maWcgPSB0aGlzLmNvbmZpZztcblxuICAgICAgYXZsQWdnTWV0aG9kcyA9IGNvbmZpZy5hdmxBZ2dNZXRob2RzO1xuICAgICAgdmFsaWRUaW1lUGVyaW9kID0gY29uZmlnLnZhbGlkVGltZVBlcmlvZDtcbiAgICAgIHZhbGlkVGltZVBlcmlvZE11bHRpcGxpZXIgPSBjb25maWcudmFsaWRUaW1lUGVyaW9kTXVsdGlwbGllcjtcblxuICAgICAgLy8gaWYgKGF2bEFnZ01ldGhvZHMuaW5jbHVkZXMob2JqLmFnZ3JlZ2F0aW9uTWV0aG9kKSAmJiB2YWxpZFRpbWVQZXJpb2QuaW5jbHVkZXMob2JqLnRpbWVQZXJpb2QpKSB7XG4gICAgICAvLyAgIHRpbWVQZXJpb2RJbmRleCA9IHZhbGlkVGltZVBlcmlvZC5pbmRleE9mKG9iai50aW1lUGVyaW9kKTtcbiAgICAgIC8vICAgaWYgKHZhbGlkVGltZVBlcmlvZE11bHRpcGxpZXJbdGltZVBlcmlvZEluZGV4XS5pbmNsdWRlcyhOdW1iZXIob2JqLnRpbWVQZXJpb2RNdWx0aXBsaWVyKSkpIHtcbiAgICAgIC8vICAgICB0aGlzLmFnZ3JlZ2F0aW9uID0gb2JqO1xuICAgICAgLy8gICAgIGNvbnNvbGUubG9nKHRoaXMuYWdncmVnYXRpb24pO1xuICAgICAgLy8gICAgIHJldHVybiB0cnVlO1xuICAgICAgLy8gICB9IGVsc2Uge1xuICAgICAgLy8gICAgIGNvbnNvbGUubG9nKHRoaXMuYWdncmVnYXRpb24pO1xuICAgICAgLy8gICAgIHJldHVybiBmYWxzZTtcbiAgICAgIC8vICAgfVxuICAgICAgLy8gfSBlbHNlIHtcbiAgICAgIC8vICAgY29uc29sZS5sb2codGhpcy5hZ2dyZWdhdGlvbik7XG4gICAgICAvLyAgIHJldHVybiBmYWxzZTtcbiAgICAgIC8vIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBSZXNldCBBcHBsaWVkIEFnZ3JlZ2F0aW9uXG4gICAgICovXG4gICAgcmVzZXRBZ2dyZWdhdGlvbiAoKSB7XG5cbiAgICB9XG5cbiAgICBpbml0IChyZXF1aXJlKSB7XG4gICAgICB2YXIgc2VsZiA9IHRoaXMsXG4gICAgICAgIGNvbmZpZyA9IHNlbGYuY29uZmlnLFxuICAgICAgICB0b29sYm94Q29tcG9uZW50ID0gY29uZmlnLnRvb2xib3hDb21wb25lbnQgPSB7fSxcbiAgICAgICAgYXBpLFxuICAgICAgICBzdG9yZSxcbiAgICAgICAgY29tcG9zaXRpb24sXG4gICAgICAgIHNhdmVUbyA9ICd0c09iamVjdCcsXG4gICAgICAgIHJlcXVpcmVkUGFyYW1zID0gW1xuICAgICAgICAgICdncmFwaGljcycsXG4gICAgICAgICAgJ2dsb2JhbFJlYWN0aXZlTW9kZWwnLFxuICAgICAgICAgICdjaGFydCcsXG4gICAgICAgICAgJ3NwYWNlTWFuYWdlckluc3RhbmNlJyxcbiAgICAgICAgICAnY2hhcnRJbnN0YW5jZScsXG4gICAgICAgICAgJ3NtYXJ0TGFiZWwnLFxuICAgICAgICAgIGZ1bmN0aW9uIGFjcXVpcmUgKCkge1xuICAgICAgICAgICAgbGV0IGkgPSAwLFxuICAgICAgICAgICAgICBpaSA9IHJlcXVpcmVkUGFyYW1zLmxlbmd0aCAtIDEsXG4gICAgICAgICAgICAgIHBhcmFtID0gJyc7XG4gICAgICAgICAgICBzZWxmW3NhdmVUb10gPSBzZWxmW3NhdmVUb10gfHwge307XG4gICAgICAgICAgICBzZWxmLnJlcXVpcmVkUGFyYW1zID0ge307XG4gICAgICAgICAgICBmb3IgKGkgPSAwOyBpIDwgaWk7ICsraSkge1xuICAgICAgICAgICAgICBwYXJhbSA9IHJlcXVpcmVkUGFyYW1zW2ldO1xuICAgICAgICAgICAgICBzZWxmW3NhdmVUb11bcGFyYW1dID0gYXJndW1lbnRzW2ldO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gb25Jbml0KHNlbGZbc2F2ZVRvXSk7XG4gICAgICAgICAgfVxuICAgICAgICBdO1xuICAgICAgcmVxdWlyZShyZXF1aXJlZFBhcmFtcyk7XG5cbiAgICAgIGFwaSA9IHNlbGYudHNPYmplY3QuY2hhcnRJbnN0YW5jZS5hcGlJbnN0YW5jZTtcbiAgICAgIHN0b3JlID0gYXBpLmdldENvbXBvbmVudFN0b3JlKCk7XG4gICAgICBjb25maWcuY29tcG9zaXRpb24gPSBjb21wb3NpdGlvbiA9IHN0b3JlLmdldENhbnZhc0J5SW5kZXgoMCkuY29tcG9zaXRpb247XG4gICAgICBjb25maWcuZGF0YUFnZyA9IGNvbXBvc2l0aW9uLmltcGwuZ2V0RGF0YUFnZ3JlZ2F0b3IoKTtcblxuICAgICAgdG9vbGJveENvbXBvbmVudC50b29sYm94ID0gZGVwLkZDLmdldENvbXBvbmVudCgnYXBpJywgJ3Rvb2xib3gnKTtcbiAgICAgIHRvb2xib3hDb21wb25lbnQuY29uZmlnID0ge307XG5cbiAgICAgIHNlbGYudG9vbGJhcnMgPSBbXTtcblxuICAgICAgc2VsZi5tZWFzdXJlbWVudCA9IHt9O1xuXG4gICAgICBzZWxmLnRvb2xiYXJzLnB1c2goc2VsZi5jcmVhdGVUb29sYmFyKCkpO1xuXG4gICAgICB3aW5kb3cuQWdncmVnYXRvciA9IHNlbGY7XG4gICAgICByZXR1cm4gc2VsZjtcbiAgICB9XG5cbiAgICBjcmVhdGVUb29sYmFyICgpIHtcbiAgICAgIHZhciBzZWxmID0gdGhpcyxcbiAgICAgICAgZ3JvdXAsXG4gICAgICAgIHRvb2xiYXIsXG4gICAgICAgIHRpbWVNdWxTZWxlY3RNZW51LFxuICAgICAgICB0aW1lUGVyaW9kU2VsZWN0TWVudSxcbiAgICAgICAgYWdnTWV0aG9kU2VsZWN0TWVudSxcbiAgICAgICAgcmVzZXRCdXR0b24sXG4gICAgICAgIGFwcGx5QnV0dG9uLFxuICAgICAgICBjb25maWcgPSBzZWxmLmNvbmZpZyxcbiAgICAgICAgdHNPYmplY3QgPSBzZWxmLnRzT2JqZWN0LFxuICAgICAgICBsYWJlbCxcblxuICAgICAgICB0b29sYm94Q29tcG9uZW50ID0gY29uZmlnLnRvb2xib3hDb21wb25lbnQsXG4gICAgICAgIHRvb2xib3ggPSB0b29sYm94Q29tcG9uZW50LnRvb2xib3gsXG4gICAgICAgIHRvb2xib3hDb21wQ29uZmlnID0gdG9vbGJveENvbXBvbmVudC5jb25maWcsXG4gICAgICAgIEhvcml6b250YWxUb29sYmFyID0gdG9vbGJveC5Ib3Jpem9udGFsVG9vbGJhcixcbiAgICAgICAgQ29tcG9uZW50R3JvdXAgPSB0b29sYm94LkNvbXBvbmVudEdyb3VwLFxuICAgICAgICBTeW1ib2xTdG9yZSA9IHRvb2xib3guU3ltYm9sU3RvcmUsXG5cbiAgICAgICAgZ3JhcGhpY3MgPSB0c09iamVjdC5ncmFwaGljcyxcbiAgICAgICAgcGFwZXIgPSBncmFwaGljcy5wYXBlcixcbiAgICAgICAgY29udGFpbmVyID0gZ3JhcGhpY3MuY29udGFpbmVyLFxuICAgICAgICBjaGFydCA9IHRzT2JqZWN0LmNoYXJ0LFxuICAgICAgICBzbWFydExhYmVsID0gdHNPYmplY3Quc21hcnRMYWJlbCxcblxuICAgICAgICBtdWx0aXBsaWVyVmFsLFxuICAgICAgICB0aW1lTXVsU2VsZWN0TWVudU9wdCA9ICcnLFxuXG4gICAgICAgIGRlcGVuZGVuY2llcyA9IHtcbiAgICAgICAgICBwYXBlcjogcGFwZXIsXG4gICAgICAgICAgY2hhcnQ6IGNoYXJ0LFxuICAgICAgICAgIHNtYXJ0TGFiZWw6IHNtYXJ0TGFiZWwsXG4gICAgICAgICAgY2hhcnRDb250YWluZXI6IGNvbnRhaW5lclxuICAgICAgICB9LFxuICAgICAgICBhcHBseSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICB2YXIgbW9kZWwgPSBjb25maWcuY29tcG9zaXRpb24ucmVhY3RpdmVNb2RlbCxcbiAgICAgICAgICAgIHRpbWVQZXJpb2RWYWwgPSB0aW1lUGVyaW9kU2VsZWN0TWVudS52YWx1ZSgpLFxuICAgICAgICAgICAgdGltZVBlcmlvZE11bHRpcGxpZXJWYWwgPSB0aW1lTXVsU2VsZWN0TWVudS52YWx1ZSgpLFxuICAgICAgICAgICAgYWdnTWV0aG9kU2VsZWN0TWVudVZhbCA9IGFnZ01ldGhvZFNlbGVjdE1lbnUudmFsdWUoKSxcbiAgICAgICAgICAgIGtleXMsXG4gICAgICAgICAgICB0aW1lSW50ZXJ2YWw7XG5cbiAgICAgICAgICBmb3IgKGtleXMgb2YgY29uZmlnLmF2bFRpbWVQZXJpb2RzKSB7XG4gICAgICAgICAgICBpZiAoa2V5cy5uYW1lID09PSB0aW1lUGVyaW9kVmFsKSB7XG4gICAgICAgICAgICAgIHRpbWVJbnRlcnZhbCA9IGtleXMuaW50ZXJ2YWw7XG4gICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cblxuICAgICAgICAgIG1vZGVsXG4gICAgICAgICAgICAubG9jaygpXG4gICAgICAgICAgICAucHJvcCgnYmluLXNpemUtZXh0JywgKHRpbWVJbnRlcnZhbCAqIE51bWJlcih0aW1lUGVyaW9kTXVsdGlwbGllclZhbCkpKVxuICAgICAgICAgICAgLnByb3AoJ2FnZ3JlZ2F0aW9uLWZuLWV4dCcsIGNvbmZpZy5hdmxBZ2dNZXRob2RzW2FnZ01ldGhvZFNlbGVjdE1lbnVWYWxdKVxuICAgICAgICAgICAgLnVubG9jaygpO1xuXG4gICAgICAgICAgLy8gYXBwbHlCdXR0b24udXBkYXRlVmlzdWFsKCdkaXNhYmxlJyk7XG4gICAgICAgICAgLy8gYXBwbHlCdXR0b24udXBkYXRlVmlzdWFsKCdlbmFibGUnKTtcbiAgICAgICAgfSxcblxuICAgICAgICB0aW1lUGVyaW9kT25DaGFuZ2UgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgdmFyIHRpbWVQZXJpb2RWYWwgPSB0aW1lUGVyaW9kU2VsZWN0TWVudS52YWx1ZSgpLFxuICAgICAgICAgICAgdGltZVBlcmlvZE11bHRpcGxpZXJWYWwgPSB0aW1lTXVsU2VsZWN0TWVudS52YWx1ZSgpLFxuICAgICAgICAgICAgcHJldlRpbWVQZXJvaWRNdWxWYWwgPSB0aW1lUGVyaW9kTXVsdGlwbGllclZhbCxcbiAgICAgICAgICAgIHZhbGlkVGltZVBlcmlvZCA9IGNvbmZpZy52YWxpZFRpbWVQZXJpb2QsXG4gICAgICAgICAgICB2YWxpZFRpbWVQZXJpb2RNdWx0aXBsaWVyID0gY29uZmlnLnZhbGlkVGltZVBlcmlvZE11bHRpcGxpZXIsXG4gICAgICAgICAgICBpbmRleE9mVGltZVVuaXQsXG4gICAgICAgICAgICBpbmRleE9mVGltZU11bDtcblxuICAgICAgICAgIGluZGV4T2ZUaW1lVW5pdCA9IHZhbGlkVGltZVBlcmlvZC5pbmRleE9mKHRpbWVQZXJpb2RWYWwpO1xuICAgICAgICAgIGluZGV4T2ZUaW1lTXVsID0gdmFsaWRUaW1lUGVyaW9kTXVsdGlwbGllcltpbmRleE9mVGltZVVuaXRdLmluZGV4T2YoTnVtYmVyKHRpbWVQZXJpb2RNdWx0aXBsaWVyVmFsKSk7XG5cbiAgICAgICAgICAvLyBjb25zb2xlLmxvZyhpbmRleE9mVGltZVVuaXQsIGluZGV4T2ZUaW1lTXVsKTtcbiAgICAgICAgICB0aW1lTXVsU2VsZWN0TWVudU9wdCA9ICcnO1xuICAgICAgICAgIGZvciAobXVsdGlwbGllclZhbCBvZiB2YWxpZFRpbWVQZXJpb2RNdWx0aXBsaWVyW2luZGV4T2ZUaW1lVW5pdF0pIHtcbiAgICAgICAgICAgIHRpbWVNdWxTZWxlY3RNZW51T3B0ICs9ICc8b3B0aW9uIHZhbHVlPVwiJyArIG11bHRpcGxpZXJWYWwgKyAnXCI+JyArIG11bHRpcGxpZXJWYWwgKyAnPC9vcHRpb24+JztcbiAgICAgICAgICB9XG5cbiAgICAgICAgICB0aW1lTXVsU2VsZWN0TWVudS51cGRhdGVMaXN0KHRpbWVNdWxTZWxlY3RNZW51T3B0KTtcblxuICAgICAgICAgIGlmIChpbmRleE9mVGltZU11bCA8IDApIHtcbiAgICAgICAgICAgIHRpbWVNdWxTZWxlY3RNZW51LnZhbHVlKHZhbGlkVGltZVBlcmlvZE11bHRpcGxpZXJbaW5kZXhPZlRpbWVVbml0XVswXS50b1N0cmluZygpKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGltZU11bFNlbGVjdE1lbnUudmFsdWUocHJldlRpbWVQZXJvaWRNdWxWYWwpO1xuICAgICAgICAgIH1cbiAgICAgICAgfTtcblxuICAgICAgZ3JvdXAgPSBuZXcgQ29tcG9uZW50R3JvdXAoZGVwZW5kZW5jaWVzKTtcbiAgICAgIHRvb2xiYXIgPSBuZXcgSG9yaXpvbnRhbFRvb2xiYXIoZGVwZW5kZW5jaWVzKTtcblxuICAgICAgZ3JvdXAuc2V0Q29uZmlnKHtcbiAgICAgICAgZmlsbDogJyNmZmYnLFxuICAgICAgICBib3JkZXJUaGlja25lc3M6IDBcbiAgICAgIH0pO1xuXG4gICAgICB0b29sYmFyLnNldENvbmZpZyh7XG4gICAgICAgIGZpbGw6ICcjZmZmJyxcbiAgICAgICAgYm9yZGVyVGhpY2tuZXNzOiAwXG4gICAgICB9KTtcblxuICAgICAgbGFiZWwgPSBuZXcgdG9vbGJveC5MYWJlbCgnQWdncmVnYXRlIERhdGE6JywgZGVwZW5kZW5jaWVzLCB7XG4gICAgICAgIHRleHQ6IHtcbiAgICAgICAgICBzdHlsZToge1xuICAgICAgICAgICAgJ2ZvbnQtc2l6ZSc6ICcxNCcsXG4gICAgICAgICAgICAnZmlsbCc6ICcjNjk2OTY5J1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSk7XG5cbiAgICAgIHRvb2xib3hDb21wQ29uZmlnLnRpbWVQZXJpb2RTZWxlY3RNZW51ID0gdGltZVBlcmlvZFNlbGVjdE1lbnUgPSBuZXcgdG9vbGJveC5TZWxlY3RTeW1ib2woe1xuICAgICAgICB3aWR0aDogODAsXG4gICAgICAgIGhlaWdodDogMjBcbiAgICAgIH0sIGRlcGVuZGVuY2llcywge1xuICAgICAgICBpbm5lckhUTUw6ICc8b3B0aW9uIHZhbHVlPVwidGltZVwiPlRpbWUgUGVyaW9kPC9vcHRpb24+J1xuICAgICAgfSwge1xuICAgICAgICBzdHJva2VXaWR0aDogMSxcbiAgICAgICAgc3Ryb2tlOiAncmdiYSgxMDIsMTAyLDEwMiwwLjUpJyxcbiAgICAgICAgc3ltYm9sU3Ryb2tlV2lkdGg6IDAsXG4gICAgICAgIGJ0blRleHRTdHlsZToge1xuICAgICAgICAgIGZvbnRTaXplOiAxMVxuICAgICAgICB9LFxuICAgICAgICBob3ZlckZpbGw6ICcjMWUxZjFmJ1xuICAgICAgfSk7XG5cbiAgICAgIHRvb2xib3hDb21wQ29uZmlnLnRpbWVNdWxTZWxlY3RNZW51ID0gdGltZU11bFNlbGVjdE1lbnUgPSBuZXcgdG9vbGJveC5TZWxlY3RTeW1ib2woe1xuICAgICAgICB3aWR0aDogNTAsXG4gICAgICAgIGhlaWdodDogMjBcbiAgICAgIH0sIGRlcGVuZGVuY2llcywge1xuICAgICAgICBpbm5lckhUTUw6ICc8b3B0aW9uIHZhbHVlPVwibnVtYmVyXCI+TXVsdGlwbGllcjwvb3B0aW9uPidcbiAgICAgIH0sIHtcbiAgICAgICAgc3Ryb2tlV2lkdGg6IDEsXG4gICAgICAgIHN0cm9rZTogJ3JnYmEoMTAyLDEwMiwxMDIsMC41KScsXG4gICAgICAgIHN5bWJvbFN0cm9rZVdpZHRoOiAwLFxuICAgICAgICBidG5UZXh0U3R5bGU6IHtcbiAgICAgICAgICBmb250U2l6ZTogMTFcbiAgICAgICAgfSxcbiAgICAgICAgaG92ZXJGaWxsOiAnIzFlMWYxZidcbiAgICAgIH0pO1xuXG4gICAgICB0b29sYm94Q29tcENvbmZpZy5hZ2dNZXRob2RTZWxlY3RNZW51ID0gYWdnTWV0aG9kU2VsZWN0TWVudSA9IG5ldyB0b29sYm94LlNlbGVjdFN5bWJvbCh7XG4gICAgICAgIHdpZHRoOiA4MCxcbiAgICAgICAgaGVpZ2h0OiAyMFxuICAgICAgfSwgZGVwZW5kZW5jaWVzLCB7XG4gICAgICAgIGlubmVySFRNTDogJzxvcHRpb24gdmFsdWU9XCJGb3JtdWxhXCI+TWV0aG9kPC9vcHRpb24+J1xuICAgICAgfSwge1xuICAgICAgICBzdHJva2VXaWR0aDogMSxcbiAgICAgICAgc3Ryb2tlOiAncmdiYSgxMDIsMTAyLDEwMiwwLjUpJyxcbiAgICAgICAgc3ltYm9sU3Ryb2tlV2lkdGg6IDAsXG4gICAgICAgIGJ0blRleHRTdHlsZToge1xuICAgICAgICAgIGZvbnRTaXplOiAxMVxuICAgICAgICB9LFxuICAgICAgICBob3ZlckZpbGw6ICcjMWUxZjFmJ1xuICAgICAgfSk7XG5cbiAgICAgIHRvb2xib3hDb21wQ29uZmlnLmFwcGx5QnV0dG9uID0gYXBwbHlCdXR0b24gPSBuZXcgdG9vbGJveC5TeW1ib2woJ0FQUExZJywgdHJ1ZSwgZGVwZW5kZW5jaWVzLCB7XG4gICAgICAgIGZpbGw6ICcjNTU1JyxcbiAgICAgICAgbGFiZWxGaWxsOiAnI2ZmZicsXG4gICAgICAgIGhvdmVyRmlsbDogJyM1NTUnLFxuICAgICAgICB3aWR0aDogMzAsXG4gICAgICAgIGhlaWdodDogMjAsXG4gICAgICAgIGJ0blRleHRTdHlsZToge1xuICAgICAgICAgIGZvbnRTaXplOiAxMVxuICAgICAgICB9XG4gICAgICB9KS5hdHRhY2hFdmVudEhhbmRsZXJzKHtcbiAgICAgICAgY2xpY2s6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICBhcHBseSgpO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICAgIHRvb2xib3hDb21wQ29uZmlnLnJlc2V0QnV0dG9uID0gcmVzZXRCdXR0b24gPSBuZXcgdG9vbGJveC5TeW1ib2woJ1JFU0VUJywgdHJ1ZSwgZGVwZW5kZW5jaWVzLCB7XG4gICAgICAgIGZpbGw6ICcjODk4YjhiJyxcbiAgICAgICAgbGFiZWxGaWxsOiAnI2ZmZicsXG4gICAgICAgIGhvdmVyRmlsbDogJyM4OThiOGInLFxuICAgICAgICB3aWR0aDogMzAsXG4gICAgICAgIGhlaWdodDogMjAsXG4gICAgICAgIGJ0blRleHRTdHlsZToge1xuICAgICAgICAgIGZvbnRTaXplOiAxMVxuICAgICAgICB9XG4gICAgICB9KS5hdHRhY2hFdmVudEhhbmRsZXJzKHtcbiAgICAgICAgJ2NsaWNrJzogZnVuY3Rpb24gKCkge1xuICAgICAgICAgIGNvbnNvbGUubG9nKHRoaXMpO1xuICAgICAgICB9XG4gICAgICB9KTtcblxuICAgICAgZ3JvdXAuYWRkU3ltYm9sKGxhYmVsKTtcbiAgICAgIGdyb3VwLmFkZFN5bWJvbCh0aW1lTXVsU2VsZWN0TWVudSk7XG4gICAgICBncm91cC5hZGRTeW1ib2wodGltZVBlcmlvZFNlbGVjdE1lbnUpO1xuICAgICAgZ3JvdXAuYWRkU3ltYm9sKGFnZ01ldGhvZFNlbGVjdE1lbnUpO1xuICAgICAgZ3JvdXAuYWRkU3ltYm9sKGFwcGx5QnV0dG9uKTtcblxuICAgICAgZ3JvdXAuYWRkU3ltYm9sKHJlc2V0QnV0dG9uKTtcblxuICAgICAgU3ltYm9sU3RvcmUucmVnaXN0ZXIoJ3RleHRCb3hJY29uJywgZnVuY3Rpb24gKHgsIHksIHJhZCwgdywgaCwgcGFkWCwgcGFkWSkge1xuICAgICAgICB2YXIgeDEgPSB4IC0gdyAvIDIgKyBwYWRYIC8gMixcbiAgICAgICAgICB4MiA9IHggKyB3IC8gMiAtIHBhZFggLyAyLFxuICAgICAgICAgIHkxID0geSAtIGggLyAyICsgcGFkWSAvIDIsXG4gICAgICAgICAgeTIgPSB5ICsgaCAvIDIgLSBwYWRZIC8gMjtcblxuICAgICAgICByZXR1cm4gWydNJywgeDEsIHkxLCAnTCcsIHgyLCB5MSwgJ0wnLCB4MiwgeTIsICdMJywgeDEsIHkyLCAnWiddO1xuICAgICAgfSk7XG5cbiAgICAgIHRpbWVNdWxTZWxlY3RNZW51LmF0dGFjaEV2ZW50SGFuZGxlcnMoe1xuICAgICAgICBjbGljazoge1xuICAgICAgICAgIGZuOiB0aW1lTXVsU2VsZWN0TWVudS5lZGl0XG4gICAgICAgIH0sXG4gICAgICAgIHRleHRPbkJsdXI6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICB0aW1lTXVsU2VsZWN0TWVudS5ibHVyKCk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgICAgdGltZVBlcmlvZFNlbGVjdE1lbnUuYXR0YWNoRXZlbnRIYW5kbGVycyh7XG4gICAgICAgIGNsaWNrOiB7XG4gICAgICAgICAgZm46IHRpbWVQZXJpb2RTZWxlY3RNZW51LmVkaXRcbiAgICAgICAgfSxcbiAgICAgICAgdGV4dE9uQmx1cjogZnVuY3Rpb24gKCkge1xuICAgICAgICAgIHRpbWVQZXJpb2RTZWxlY3RNZW51LmJsdXIoKTtcbiAgICAgICAgfSxcbiAgICAgICAgdGV4dE9uQ2hhbmdlOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgdGltZVBlcmlvZFNlbGVjdE1lbnUuYmx1cigpO1xuICAgICAgICAgIHRpbWVQZXJpb2RPbkNoYW5nZSgpO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICAgIGFnZ01ldGhvZFNlbGVjdE1lbnUuYXR0YWNoRXZlbnRIYW5kbGVycyh7XG4gICAgICAgIGNsaWNrOiB7XG4gICAgICAgICAgZm46IGFnZ01ldGhvZFNlbGVjdE1lbnUuZWRpdFxuICAgICAgICB9LFxuICAgICAgICB0ZXh0T25CbHVyOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgYWdnTWV0aG9kU2VsZWN0TWVudS5ibHVyKCk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuXG4gICAgICB0b29sYmFyLmFkZENvbXBvbmVudChncm91cCk7XG5cbiAgICAgIHJldHVybiB0b29sYmFyO1xuICAgIH1cblxuICAgIGdldExvZ2ljYWxTcGFjZSAoYXZhaWxhYmxlV2lkdGgsIGF2YWlsYWJsZUhlaWdodCkge1xuICAgICAgdmFyIGxvZ2ljYWxTcGFjZSxcbiAgICAgICAgd2lkdGggPSAwLFxuICAgICAgICBoZWlnaHQgPSAwLFxuICAgICAgICBpLFxuICAgICAgICBsbjtcblxuICAgICAgZm9yIChpID0gMCwgbG4gPSB0aGlzLnRvb2xiYXJzLmxlbmd0aDsgaSA8IGxuOyBpKyspIHtcbiAgICAgICAgbG9naWNhbFNwYWNlID0gdGhpcy50b29sYmFyc1tpXS5nZXRMb2dpY2FsU3BhY2UoKTtcbiAgICAgICAgd2lkdGggPSBNYXRoLm1heChsb2dpY2FsU3BhY2Uud2lkdGgsIHdpZHRoKTtcbiAgICAgICAgaGVpZ2h0ICs9IGxvZ2ljYWxTcGFjZS5oZWlnaHQ7XG4gICAgICAgIHRoaXMudG9vbGJhcnNbaV0ud2lkdGggPSBsb2dpY2FsU3BhY2Uud2lkdGg7XG4gICAgICAgIHRoaXMudG9vbGJhcnNbaV0uaGVpZ2h0ID0gbG9naWNhbFNwYWNlLmhlaWdodDtcbiAgICAgIH1cbiAgICAgIGhlaWdodCArPSB0aGlzLnBhZGRpbmc7XG4gICAgICByZXR1cm4ge1xuICAgICAgICB3aWR0aDogd2lkdGggPiBhdmFpbGFibGVXaWR0aCA/IDAgOiB3aWR0aCxcbiAgICAgICAgaGVpZ2h0OiBoZWlnaHQgPiBhdmFpbGFibGVIZWlnaHQgPyAwIDogaGVpZ2h0XG4gICAgICB9O1xuICAgIH1cblxuICAgIHBsYWNlSW5DYW52YXMgKGNvbnRhaW5lckluc3RhbmNlKSB7XG4gICAgICB2YXIgc2VsZiA9IHRoaXMsXG4gICAgICAgIHRzT2JqZWN0ID0gc2VsZi50c09iamVjdDtcblxuICAgICAgc2VsZi5wYWRkaW5nID0gNTtcbiAgICAgIHRzT2JqZWN0LnNwYWNlTWFuYWdlckluc3RhbmNlLmFkZChbe1xuICAgICAgICBuYW1lOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgcmV0dXJuICdEYXRhQWdncmVnYXRvcic7XG4gICAgICAgIH0sXG4gICAgICAgIHJlZjogZnVuY3Rpb24gKG9iaikge1xuICAgICAgICAgIHJldHVybiBvYmpbJzAnXTtcbiAgICAgICAgfSxcbiAgICAgICAgc2VsZjogZnVuY3Rpb24gKCkge1xuICAgICAgICAgIHJldHVybiBzZWxmO1xuICAgICAgICB9LFxuICAgICAgICBwcmlvcml0eTogZnVuY3Rpb24gKCkge1xuICAgICAgICAgIHJldHVybiAyO1xuICAgICAgICB9LFxuICAgICAgICBsYXlvdXQ6IGZ1bmN0aW9uIChvYmopIHtcbiAgICAgICAgICByZXR1cm4gb2JqLmlubGluZTtcbiAgICAgICAgfSxcbiAgICAgICAgb3JpZW50YXRpb246IFt7XG4gICAgICAgICAgdHlwZTogZnVuY3Rpb24gKG9iaikge1xuICAgICAgICAgICAgcmV0dXJuIG9iai5ob3Jpem9udGFsO1xuICAgICAgICAgIH0sXG4gICAgICAgICAgcG9zaXRpb246IFt7XG4gICAgICAgICAgICB0eXBlOiBmdW5jdGlvbiAob2JqKSB7XG4gICAgICAgICAgICAgIHJldHVybiBvYmoudG9wO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGFsaWdubWVudDogW3tcbiAgICAgICAgICAgICAgdHlwZTogZnVuY3Rpb24gKG9iaikge1xuICAgICAgICAgICAgICAgIHJldHVybiBvYmoubGVmdDtcbiAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgZGltZW5zaW9uczogW2Z1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICB2YXIgcGFyZW50ID0gdGhpcy5nZXRQYXJlbnRDb21wb25lbnRHcm91cCgpO1xuICAgICAgICAgICAgICAgIHJldHVybiBzZWxmLmdldExvZ2ljYWxTcGFjZShwYXJlbnQuZ2V0V2lkdGgoKSwgcGFyZW50LmdldEhlaWdodCgpKTtcbiAgICAgICAgICAgICAgfV1cbiAgICAgICAgICAgIH1dXG4gICAgICAgICAgfV1cbiAgICAgICAgfV1cbiAgICAgIH1dKTtcbiAgICB9XG5cbiAgICBzZXREcmF3aW5nQ29uZmlndXJhdGlvbiAoeCwgeSwgd2lkdGgsIGhlaWdodCwgZ3JvdXApIHtcbiAgICAgIHZhciBtZXMgPSB0aGlzLm1lYXN1cmVtZW50O1xuICAgICAgbWVzLnggPSB4O1xuICAgICAgbWVzLnkgPSB5O1xuICAgICAgbWVzLndpZHRoID0gd2lkdGg7XG4gICAgICBtZXMuaGVpZ2h0ID0gaGVpZ2h0O1xuXG4gICAgICB0aGlzLnBhcmVudEdyb3VwID0gZ3JvdXA7XG5cbiAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cblxuICAgIGRyYXcgKHgsIHksIHdpZHRoLCBoZWlnaHQsIGdyb3VwKSB7XG4gICAgICB2YXIgc2VsZiA9IHRoaXMsXG4gICAgICAgIGNvbmZpZyA9IHNlbGYuY29uZmlnLFxuICAgICAgICB0b29sYm94Q29tcENvbmZpZyA9IGNvbmZpZy50b29sYm94Q29tcG9uZW50LmNvbmZpZyxcbiAgICAgICAgdGltZVBlcmlvZFNlbGVjdE1lbnUgPSB0b29sYm94Q29tcENvbmZpZy50aW1lUGVyaW9kU2VsZWN0TWVudSxcbiAgICAgICAgdGltZU11bFNlbGVjdE1lbnUgPSB0b29sYm94Q29tcENvbmZpZy50aW1lTXVsU2VsZWN0TWVudSxcbiAgICAgICAgYWdnTWV0aG9kU2VsZWN0TWVudSA9IHRvb2xib3hDb21wQ29uZmlnLmFnZ01ldGhvZFNlbGVjdE1lbnUsXG4gICAgICAgIGN1cnJlbnRBZ2dyZWdhdGlvbk9iaixcbiAgICAgICAgbWVhc3VyZW1lbnQgPSBzZWxmLm1lYXN1cmVtZW50LFxuICAgICAgICB0b29sYmFycyA9IHNlbGYudG9vbGJhcnMsXG4gICAgICAgIGxuLFxuICAgICAgICBpLFxuICAgICAgICB0b29sYmFyLFxuICAgICAgICBtb2RlbCA9IGNvbmZpZy5jb21wb3NpdGlvbi5yZWFjdGl2ZU1vZGVsLFxuXG4gICAgICAgIHRpbWVQZXJpb2RWYWwsXG4gICAgICAgIHRpbWVQZXJpb2RTZWxlY3RNZW51T3B0LFxuICAgICAgICB2YWxpZFRpbWVQZXJpb2QsXG4gICAgICAgIGluZGV4T2ZUaW1lVW5pdCxcblxuICAgICAgICBtdWx0aXBsaWVyVmFsLFxuICAgICAgICB0aW1lTXVsU2VsZWN0TWVudU9wdCxcbiAgICAgICAgdmFsaWRUaW1lUGVyaW9kTXVsdGlwbGllcixcblxuICAgICAgICBhZ2dWYWwsXG4gICAgICAgIGFnZ01ldGhvZFNlbGVjdE1lbnVPcHQsXG4gICAgICAgIGF2bEFnZ01ldGhvZHMsXG4gICAgICAgIG9uQ2hhbmdlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgIHNlbGYuZ2V0VmFsaWRBZ2dyZWdhdGlvbigpO1xuICAgICAgICAgIGN1cnJlbnRBZ2dyZWdhdGlvbk9iaiA9IHNlbGYuZ2V0Q3VycmVudEFnZ3JlYXRpb24oKTtcblxuICAgICAgICAgIHRpbWVQZXJpb2RTZWxlY3RNZW51T3B0ID0gJyc7XG4gICAgICAgICAgdGltZU11bFNlbGVjdE1lbnVPcHQgPSAnJztcbiAgICAgICAgICBhZ2dNZXRob2RTZWxlY3RNZW51T3B0ID0gJyc7XG5cbiAgICAgICAgICB2YWxpZFRpbWVQZXJpb2QgPSBjb25maWcudmFsaWRUaW1lUGVyaW9kO1xuICAgICAgICAgIHZhbGlkVGltZVBlcmlvZE11bHRpcGxpZXIgPSBjb25maWcudmFsaWRUaW1lUGVyaW9kTXVsdGlwbGllcjtcbiAgICAgICAgICBhdmxBZ2dNZXRob2RzID0gY29uZmlnLmF2bEFnZ01ldGhvZHM7XG5cbiAgICAgICAgICBmb3IgKHRpbWVQZXJpb2RWYWwgb2YgdmFsaWRUaW1lUGVyaW9kKSB7XG4gICAgICAgICAgICB0aW1lUGVyaW9kU2VsZWN0TWVudU9wdCArPSAnPG9wdGlvbiB2YWx1ZT1cIicgKyB0aW1lUGVyaW9kVmFsICsgJ1wiPicgKyB0aW1lUGVyaW9kVmFsICsgJzwvb3B0aW9uPic7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgdGltZVBlcmlvZFNlbGVjdE1lbnUudXBkYXRlTGlzdCh0aW1lUGVyaW9kU2VsZWN0TWVudU9wdCk7XG4gICAgICAgICAgdGltZVBlcmlvZFNlbGVjdE1lbnUudmFsdWUoY3VycmVudEFnZ3JlZ2F0aW9uT2JqLnRpbWVQZXJpb2QpO1xuXG4gICAgICAgICAgaW5kZXhPZlRpbWVVbml0ID0gdmFsaWRUaW1lUGVyaW9kLmluZGV4T2YoY3VycmVudEFnZ3JlZ2F0aW9uT2JqLnRpbWVQZXJpb2QpO1xuXG4gICAgICAgICAgaWYgKGluZGV4T2ZUaW1lVW5pdCA+PSAwKSB7XG4gICAgICAgICAgICBmb3IgKG11bHRpcGxpZXJWYWwgb2YgdmFsaWRUaW1lUGVyaW9kTXVsdGlwbGllcltpbmRleE9mVGltZVVuaXRdKSB7XG4gICAgICAgICAgICAgIHRpbWVNdWxTZWxlY3RNZW51T3B0ICs9ICc8b3B0aW9uIHZhbHVlPVwiJyArIG11bHRpcGxpZXJWYWwgKyAnXCI+JyArIG11bHRpcGxpZXJWYWwgKyAnPC9vcHRpb24+JztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG5cbiAgICAgICAgICB0aW1lTXVsU2VsZWN0TWVudS51cGRhdGVMaXN0KHRpbWVNdWxTZWxlY3RNZW51T3B0KTtcbiAgICAgICAgICB0aW1lTXVsU2VsZWN0TWVudS52YWx1ZShjdXJyZW50QWdncmVnYXRpb25PYmoudGltZVBlcmlvZE11bHRpcGxpZXIudG9TdHJpbmcoKSk7XG5cbiAgICAgICAgICBmb3IgKGFnZ1ZhbCBpbiBhdmxBZ2dNZXRob2RzKSB7XG4gICAgICAgICAgICBpZiAoYXZsQWdnTWV0aG9kc1thZ2dWYWxdLm5pY2tOYW1lID09PSAnSW52YWxpZCcpIHtcbiAgICAgICAgICAgICAgYWdnTWV0aG9kU2VsZWN0TWVudU9wdCArPSAnPG9wdGlvbiBkaXNhYmxlZCBoaWRkZW4gdmFsdWU9XCInICsgYXZsQWdnTWV0aG9kc1thZ2dWYWxdLm5pY2tOYW1lICsgJ1wiPicgK1xuICAgICAgICAgICAgICAgYXZsQWdnTWV0aG9kc1thZ2dWYWxdLmZvcm1hbE5hbWUgKyAnPC9vcHRpb24+JztcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIGFnZ01ldGhvZFNlbGVjdE1lbnVPcHQgKz0gJzxvcHRpb24gdmFsdWU9XCInICsgYXZsQWdnTWV0aG9kc1thZ2dWYWxdLm5pY2tOYW1lICsgJ1wiPicgK1xuICAgICAgICAgICAgICAgIGF2bEFnZ01ldGhvZHNbYWdnVmFsXS5mb3JtYWxOYW1lICsgJzwvb3B0aW9uPic7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgYWdnTWV0aG9kU2VsZWN0TWVudS51cGRhdGVMaXN0KGFnZ01ldGhvZFNlbGVjdE1lbnVPcHQpO1xuXG4gICAgICAgICAgYWdnTWV0aG9kU2VsZWN0TWVudS52YWx1ZShjdXJyZW50QWdncmVnYXRpb25PYmouYWdncmVnYXRpb25NZXRob2QudmFsdWUpO1xuXG4gICAgICAgICAgLy8gc2VsZi5hZ2dyZWdhdGlvbiA9IHtcbiAgICAgICAgICAvLyAgIHRpbWVQZXJpb2Q6IGN1cnJlbnRBZ2dyZWdhdGlvbk9iai50aW1lUGVyaW9kLFxuICAgICAgICAgIC8vICAgdGltZVBlcmlvZE11bHRpcGxpZXI6IGN1cnJlbnRBZ2dyZWdhdGlvbk9iai50aW1lUGVyaW9kTXVsdGlwbGllcixcbiAgICAgICAgICAvLyAgIGFnZ3JlZ2F0aW9uTWV0aG9kOiBjdXJyZW50QWdncmVnYXRpb25PYmouYWdncmVnYXRpb25NZXRob2QudmFsdWVcbiAgICAgICAgICAvLyB9O1xuICAgICAgICB9O1xuXG4gICAgICBzZWxmLmdldEF2YWlsYWJsZWxBZ2dyZWFnYXRpb24oKTtcblxuICAgICAgeCA9IHggPT09IHVuZGVmaW5lZCA/IG1lYXN1cmVtZW50LnggOiB4O1xuICAgICAgeSA9IHkgPT09IHVuZGVmaW5lZCA/IG1lYXN1cmVtZW50LnkgOiB5O1xuICAgICAgd2lkdGggPSB3aWR0aCA9PT0gdW5kZWZpbmVkID8gbWVhc3VyZW1lbnQud2lkdGggOiB3aWR0aDtcbiAgICAgIGhlaWdodCA9IGhlaWdodCA9PT0gdW5kZWZpbmVkID8gbWVhc3VyZW1lbnQuaGVpZ2h0IDogaGVpZ2h0O1xuICAgICAgZ3JvdXAgPSBncm91cCA9PT0gdW5kZWZpbmVkID8gc2VsZi5wYXJlbnRHcm91cCA6IGdyb3VwO1xuICAgICAgaWYgKHdpZHRoICYmIGhlaWdodCkge1xuICAgICAgICBmb3IgKGkgPSAwLCBsbiA9IHRvb2xiYXJzLmxlbmd0aDsgaSA8IGxuOyBpKyspIHtcbiAgICAgICAgICB0b29sYmFyID0gdG9vbGJhcnNbaV07XG4gICAgICAgICAgdG9vbGJhci5kcmF3KHgsIHkpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBvbkNoYW5nZSgpO1xuXG4gICAgICBtb2RlbC5vblByb3BzQ2hhbmdlKFsnYmluLXNpemUnLCAnYWdncmVnYXRpb24tZm4nXSxcbiAgICAgIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgb25DaGFuZ2UoKTtcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIHJhbmdlQ2hhbmdlQ2FsbGJhY2sgKCkge1xuICAgICAgdGhpcy5nZXRWYWxpZEFnZ3JlZ2F0aW9uKCk7XG4gICAgICB0aGlzLmRyYXcoKTtcbiAgICB9XG5cbiAgICBkaXNwb3NlICgpIHtcbiAgICAgIC8vIGRpc3Bvc2UgZXh0ZW5zaW9uXG4gICAgfVxuICB9XG4gIHJldHVybiBBZ2dyZWdhdG9yO1xufTtcblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL3NyYy9mY3RzLWV4dC1hZ2dyZWdhdG9yLmpzIl0sInNvdXJjZVJvb3QiOiIifQ==