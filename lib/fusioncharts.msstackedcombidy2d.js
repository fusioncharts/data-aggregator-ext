/*
 FusionCharts JavaScript Library
 Copyright FusionCharts Technologies LLP
 License Information at <http://www.fusioncharts.com/license>

 @version 3.11.3-rc.4
 FusionCharts JavaScript Library MSStackedCombiDY2D Chart
 Copyright FusionCharts Technologies LLP
 License Information at <http://www.fusioncharts.com/license>

 @version 3.11.3-rc.4
*/
(function(r,B){"object"===typeof module&&module.exports?module.exports=r.document?B(r):function(c){if(!c.document)throw Error("Window with document not present");return B(c,!0)}:r.FusionCharts=B(r,!0)})("undefined"!==typeof window?window:this,function(r,B){FusionCharts.register("module",["private","modules.renderer.js-msstepline",function(){var c=this.hcLib,d=this.window,D=!/fusioncharts\.com$/i.test(d.location.hostname),k=c.chartAPI,r=c.pluckNumber,B=c.pluck,na=d.Image,d=c.preDefStr,L=c.schedular,
G=d.line,E=c.toRaphaelColor,O=c.getFirstValue,Ha=d.configStr,Ia=d.animationObjStr,v=d.dataLabelStr,oa=c.BLANKSTRING,p=d.hiddenStr,Ja=Math.max,da=c.TOUCH_THRESHOLD_PIXELS,S=c.CLICK_THRESHOLD_PIXELS,ea=c.hasTouch?da:S,w=d.ROUND,e=d.miterStr;k("msstepline",{friendlyName:"Multi-series Step Line Chart",standaloneInit:!0,creditLabel:D,defaultDatasetType:"msstepline",defaultPlotShadow:1,applicableDSList:{msstepline:!0}},k.mscartesian,{drawverticaljoins:1,useforwardsteps:1,zeroplanethickness:1,zeroplanealpha:40,
showzeroplaneontop:0},k.areabase);FusionCharts.register("component",["dataset","MSStepLine",{type:"stepline",_addLegend:function(){var a=this.config,e=this.chart.components.legend,c=r(a.drawanchors,1),a={enabled:a.includeinlegend,type:G,drawLine:B(a.drawLine,!0),fillColor:E({color:a.anchorbgcolor,alpha:a.anchorbgalpha}),strokeColor:E({color:a.anchorbordercolor,alpha:"100"}),rawFillColor:a.anchorbgcolor,rawStrokeColor:a.anchorbordercolor,anchorSide:c?a.anchorsides:0,strokeWidth:a.anchorborderthickness,
label:O(this.JSONData.seriesname),lineWidth:a.linethickness};this.legendItemId=e.addItems(this,this.legendInteractivity,a)},draw:function(){var a=this,d=a.JSONData,x=a.chart,k=x.getJobList(),O=x.components,t=a.config,r=a.index||a.positionIndex,H=x.config,D,g,z=O.paper,Q=O.xAxis[0],M=a.yAxis,m,h,I=x.graphics;D=I.datalabelsGroup;var U,n,N,J,A,da,fa=a.components.data,u,S=a.components.removeDataArr||[],ma=S.length,ga=t.linethickness,f=a.graphics.container,V=a.graphics.trackerContainer;g=I.trackerGroup;
var La=H.connectnulldata,F=I.datasetGroup,y,I=t.shadow,C,K=a.graphics.dataLabelContainer,b={},Ca,l,b=x.get(Ha,Ia),ha=b.dummyObj,ia=b.animObj,W=b.duration,qa=a.components.pool||[],ra=function(){!1!==a.visible||!1!==a._conatinerHidden&&void 0!==a._conatinerHidden||(f.lineGroup.hide(),f.lineShadowGroup.hide(),f.anchorShadowGroup.hide(),f.anchorGroup.hide(),V.hide(),K&&K.hide(),a._conatinerHidden=!0)},Ma=function(){F.lineConnector.attr({"clip-rect":null});F.lineConnector.node&&F.lineConnector.node.removeAttribute("clip-path");
!1!==a.visible&&(f.lineShadowGroup.show(),f.anchorShadowGroup.show(),f.anchorGroup.show(),V.show(),K&&K.show())},X=!0,sa,ta=M.getAxisBase(),ta=M.yBasePos=M.getAxisPosition(ta),ja=O.canvas.config.clip,O=ja["clip-canvas-init"].slice(0),ja=ja["clip-canvas"].slice(0),ua=t.lineDashStyle,va={color:t.linecolor,alpha:t.alpha},wa,xa,aa,Y,q=[],Da=0,Z=[],ka=null,ya,ba=[],za=!1,Ea,la=a.graphics.lineElement,R=a.visible,Fa=t.drawverticaljoins,Na=t.useforwardsteps,ca,Aa=b.animType,Ba=0,Ga,x=x.config.stepatmiddle?
.5*Q.getPVR():0;t.imagesLoaded=0;F.lineConnector=F.lineConnector||z.group("line-connector",F);f||(f=a.graphics.container={lineShadowGroup:z.group("connector-shadow",F.lineConnector),anchorShadowGroup:z.group("anchor-shadow",F.lineConnector),lineGroup:z.group(G,F.lineConnector),anchorGroup:z.group("anchors",F.lineConnector)},R||(f.lineShadowGroup.hide(),f.anchorShadowGroup.hide(),f.lineGroup.hide(),f.anchorGroup.hide()));V||(V=a.graphics.trackerContainer=z.group("line-hot",g),R||V.hide());fa||(fa=
a.components.data=[]);K||(K=a.graphics.dataLabelContainer=a.graphics.dataLabelContainer||z.group(v,D),R||K.hide());R&&(f.lineShadowGroup.show(),f.anchorShadowGroup.show(),f.lineGroup.show(),f.anchorGroup.show(),V.show(),K.show());D=Q.getCategoryLen();for(g=0;g<D;g++)if(u=fa[g])l=u.config,J=l.setValue,N=l.setLink,A=l.setLevelTooltext,b=l.anchorProps,Ca=b.symbol,C=b.shadow,da=l.displayValue,n=u.graphics.element,ca=u.graphics.image,m=u.graphics.hotElement,h=u.graphics.label,u||(u=fa[g]={graphics:{}}),
null===J?(ba.length=0,La||(ka=null),n&&n.hide(),ca&&ca.hide(),h&&h.hide(),m&&m.hide()):(Y={color:l.color,alpha:l.alpha},sa=l.dashStyle,m=Q.getAxisPosition(g),h=!a.visible&&W?ta:M.getAxisPosition(J),y=l.hoverEffects,b.isAnchorHoverRadius=y.anchorRadius,Ga=Q.getLabel(g),U=H.showtooltip?l.toolText+(A?oa:l.toolTipValue):oa,l.finalTooltext=U,A=l.eventArgs||(l.eventArgs={}),A.index=g,A.link=N,A.value=J,A.displayValue=da,A.categoryLabel=Ga,A.toolText=U,A.id=t.userID,A.datasetIndex=r,A.datasetName=d.seriesname,
A.visible=R,b.imageUrl?(l.anchorImageLoaded=!1,u._xPos=m,u._yPos=h,C=new na,C.onload=this._onAnchorImageLoad(a,g,A,m,h),C.onerror=this._onErrorSetter(a,g),C.src=b.imageUrl,Ba++):(ca&&ca.hide(),J=[Ca[1]||2,m,h,b.radius,b.startAngle,b.dip],N={fill:E({color:b.bgColor,alpha:b.bgAlpha}),stroke:E({color:b.borderColor,alpha:b.borderAlpha}),"stroke-width":b.borderThickness,visibility:b.radius?R:p},n||(qa.element&&qa.element.length?n=u.graphics.element=qa.element.shift():(n=u.graphics.element=z.polypath(f.anchorGroup),
n.attr({polypath:J}))),n.show().animateWith(ha,ia,{polypath:J},W,Aa,X&&ra),n.attr(N).shadow(C,f.anchorShadowGroup),X=!1),C=u.graphics.connector,y.enabled&&(J={polypath:[y.anchorSides||2,m,h,y.anchorRadius,y.startAngle,y.dip],fill:E({color:y.anchorColor,alpha:y.anchorBgAlpha}),stroke:E({color:y.anchorBorderColor,alpha:y.anchorBorderAlpha}),"stroke-width":y.anchorBorderThickness},N={polypath:[b.sides,m,h,b.radius,b.startAngle,0],fill:E({color:b.bgColor,alpha:b.bgAlpha}),stroke:E({color:b.borderColor,
alpha:b.borderAlpha}),"stroke-width":b.borderThickness},n&&n.data("anchorRadius",b.radius).data("anchorHoverRadius",y.anchorRadius).data("setRolloverAttr",J).data("setRolloutAttr",N)),l.trackerConfig||(l.trackerConfig={}),l.trackerConfig.trackerRadius=Ja(b.radius,y&&y.anchorRadius||0,ea)+(b.borderThickness||0)/2,aa=aa!==[E(Y||va),sa||ua].join(":"),null!==ka?(ba.length&&(q=q.concat(ba),ba.length=0),q.join(oa)||q.push("M",ya,ka),Na?(q.push("H",m-x),Fa?q.push("V",h):q.push("M",m-x,h),x&&q.push("H",m)):
(Fa?q.push("V",h):q.push("M",ya,h),q.push("H",m)),aa&&(Da?Z=Z.concat(q):(C||(C=u.graphics.connector=z.path(q,f.lineGroup),za=!0),C.animateWith(ha,ia,{path:q},W,Aa,X&&ra),C.attr({"stroke-dasharray":xa,"stroke-width":ga,stroke:wa,"stroke-linecap":w,"stroke-linejoin":2<ga?w:e}).shadow(Ea,f.lineShadowGroup),X=!1),q=[]),aa||C&&C.hide()):ba.push("M",m,h),ya=m,ka=h,wa=E(Y||va),Ea=Y?{opacity:Y&&Y.alpha/100}:I,xa=sa||ua,Da=void 0===B(l.color,l.alpha,l.dashed)?1:0,aa=[wa,xa].join(":"),u._xPos=m,u._yPos=h,!b.imageUrl&&
this.drawLabel(g));t.noOfImages=t.totalImages=Ba;0===Ba&&(k.trackerDrawID.push(L.addJob(a.drawTracker,a,[],c.priorityList.tracker)),k.labelDrawID.push(L.addJob(a.drawLabel,a,[],c.priorityList.label)));q.length&&(Z=Z.concat(q));d={path:Z};N={"stroke-dasharray":ua,"stroke-width":ga,stroke:E(va),"stroke-linecap":w,"stroke-linejoin":2<=ga?w:e};la||(la=a.graphics.lineElement=z.path({path:Z},f.lineGroup),za=!0);la.show().animateWith(ha,ia,d,W,Aa,X&&ra);la.attr(N).shadow(I,f.lineShadowGroup);X=!1;W&&R&&
za&&(f.anchorGroup.hide(),f.lineShadowGroup.hide(),f.anchorShadowGroup.hide(),K.hide(),F.lineConnector.attr({"clip-rect":O}).animateWith(ha,ia,{"clip-rect":ja},W,"normal",Ma));for(g=0;g<ma;g++)a._removeDataVisuals(S.shift());a.drawn=!0}},G,{drawverticaljoins:void 0,useforwardsteps:void 0}])}]);FusionCharts.register("module",["private","modules.renderer.js-msstackedcombidy2d",function(){var c=this,d=c.window,D=c.hcLib,k=D.chartAPI,r=D.moduleCmdQueue,B=D.injectModuleDependency,na=D.pluck,L,G;G={friendlyName:"Multi-series Dual Y-Axis Stacked Combination Chart",
creditLabel:!/fusioncharts\.com$/i.test(d.location.hostname),defaultDatasetType:"column",applicableDSList:{line:!0,area:!0,column:!0,column3d:!0,msstepline:!0},_createDatasets:function(){var c=this.components,d=this.jsonData,k=d.dataset,r=k&&k.length,v,B,p,G=this.defaultDatasetType,L=this.applicableDSList,S=this.components.legend,ea=c.xAxis[0],w,e,a,P,x,T,ma=[],t={},pa=this.config,H,Ka=this.config.catLen,g,z,Q,M=0,m=pa.datasetMap||(pa.datasetMap={line:[],area:[],column:[],column3d:[],msstepline:[]}),
h,I={line:[],area:[],column:[],column3d:[],msstepline:[]},U={},n;k||this.setChartMessage();this.config.categories=d.categories&&d.categories[0].category;B=c.dataset=[];for(d=0;d<r;d++)for(n=k[d],e=(e=na(n.renderas,G))&&e.toLowerCase(),"stepline"===e||"line"===e&&Number(n.drawinstepmode)?e="msstepline":"spline"===e&&(e="line"),L[e]||(e=G),a=FusionCharts.get("component",["dataset",e]),z=n.dataset&&n.dataset.length,void 0===t[e]?t[e]=0:t[e]++,p="datasetGroup_"+e,v=FusionCharts.register("component",["datasetGroup",
e]),(w=c[p])&&ma.push(w),h=m[e],v&&!w?(w=c[p]=new v,w.chart=this,w.init()):w&&!U[e]&&w.init(),U[e]=!0,v=0,Q=z||1;v<Q;v++)p=h[0],z?(P=n.dataset[v],P.parentyaxis=n.parentyaxis):P=n,a&&(p?(H=ea.getCategoryLen(),g=Ka-H,T=p.JSONData,x=T.data&&T.data.length,T=P.data&&P.data.length||0,x-=T,g=this._getDiff(x,T,g,H),H=g.diff,g=g.startIndex,0<H&&p.removeData(g,H,!1),p.JSONData=P,p.index=M,p.configure(),h.splice(0,1)):(p=new a,p.chart=this,p.index=M,p.init(P)),w&&w.addDataSet(p,t[e],v),I[e].push(p),B.push(p),
M++);for(k in m)for(h=m[k],r=h.length,v=0;v<r;v++)S.removeItem(h[v].legendItemId),D.componentDispose.call(h[v]);pa.datasetMap=I;this.config.catLen=ea.getCategoryLen()}};L={hasLineSet:0,isstacked:!0,isdual:!0,drawverticaljoins:1,useforwardsteps:1,zeroplanethickness:1,zeroplanealpha:40,showzeroplaneontop:0,stepatmiddle:1};k.msdybasecartesian?k("msstackedcombidy2d",G,k.msdybasecartesian,L,k.areabase):(B("charts","msstackedcombidy2d",1),r.charts.unshift({cmd:"_call",obj:d,args:[function(){k.msdybasecartesian?
k("msstackedcombidy2d",G,k.msdybasecartesian,L,k.areabase):c.raiseError(c.core,"12052314141","run","JavaScriptRenderer~MSStackedCombiDY2D._call()",Error("FusionCharts.HC.Charts.js is required in order to define vizualization"))},[],d]}))}]);B&&(r.FusionCharts=FusionCharts);return FusionCharts});
