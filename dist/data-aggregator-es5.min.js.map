{"version":3,"sources":["webpack:///data-aggregator-es5.min.js","webpack:///webpack/bootstrap 6c8d12cc7cf0b6f410a8","webpack:///./src/index.js","webpack:///(webpack)/buildin/module.js","webpack:///./src/data-aggregator-ext.js"],"names":["modules","__webpack_require__","moduleId","installedModules","exports","module","id","loaded","call","m","c","p","_typeof","Symbol","iterator","obj","constructor","prototype","AggregatorGetter","env","factory","document","win","Error","Aggregator","window","undefined","_window","windowExists","FC","FusionCharts","register","registerComponent","webpackPolyfill","deprecate","paths","children","_classCallCheck","instance","Constructor","TypeError","_createClass","defineProperties","target","props","i","length","descriptor","enumerable","configurable","writable","Object","defineProperty","key","protoProps","staticProps","dep","capitalize","string","charAt","toUpperCase","slice","isPlainObject","o","mergeRecursively","recParsing","sink","source","lib","prop","extend2","this","appliedAggregation","binSize","aggregationMethod","config","value","len","dataAgg","avlTimePeriods","getAggregationTimeRules","avlTimeMultiplier","push","possibleFactors","j","len1","len2","multipliersArr","currentTimeLength","timePeriod","time","multiplier","minBinSize","self","tsObject","maxNumOfPlot","composition","reactiveModel","model","minimumConsecutiveDifference","dataset","category","globalReactiveModel","maximumAllowedTicks","validTimePeriod","validTimePeriodMultiplier","avlAggMethods","getAllAggregationMethod","name","interval","currentAggMethod","suitableInterval","isFinite","timeRules","getSuitableInterval","timePeriodMultiplier","step","nickName","text","formalName","require","api","store","toolboxComponent","saveTo","requiredParams","ii","param","arguments","usrConfig","extData","chartInstance","apiInstance","getComponentStore","getCanvasByIndex","impl","getDataAggregator","toolbox","getComponent","toolbars","measurement","createToolbar","onPropsChange","execute","setTimeout","rangeOnChange","applyClassName","state","_style","style","states","paper","cssAddRule","cb","options","sm","toolboxCompConfig","setConfig","attrs","setParentGroup","parentGroup","className","namespace","appendSelector","count","getIndividualClassNames","getClassName","classNames","dm","dropDownMenu","components","component","dropDown","container","listItem","eventListeners","event","type","attachEventHandlers","createSelectButton","d3","selectButton","createButton","button","label","labelGroup","selectMenuGroup","buttonGroup","toolbar","timeMulSelectMenu","timePeriodSelectMenu","aggMethodSelectMenu","resetButton","applyButton","multiplierVal","timeMulSelectMenuOpt","HorizontalToolbar","ComponentGroup","graphics","getInstances","chart","smartLabel","dependencies","chartContainer","timePeriodOnChange","indexOfTimeUnit","indexOfTimeMul","timePeriodVal","timePeriodMultiplierVal","prevTimePeroidMulVal","indexOf","Number","_iteratorNormalCompletion","_didIteratorError","_iteratorError","_step","_iterator","next","done","toString","err","return","updateList","onChange","currentAgg","getCurrentAggreation","removeState","setState","defaultAggMethod","hPadding","selectConf","fill","stroke","stroke-width","selected","hover","cursor","fontSize","fontFamily","arrow","radius","width","height","margin","right","defaultStyle","font-size","font-family","font-weight","background","border-color","border-radius","border-style","border-width","color","disabled","apply","strokeWidth","shadow","opacity","styles","Label","addSymbol","addComponent","availableWidth","availableHeight","logicalSpace","ln","getLogicalSpace","Math","max","padding","containerInstance","spaceManagerInstance","add","ref","priority","layout","orientation","position","alignment","dimensions","parent","getParentComponentGroup","getWidth","getHeight","x","y","group","mes","set","validTimeBin","validMethod","aggMethod","keys","timeInterval","aggregate","aggregation","canvas","drawn","_iteratorNormalCompletion3","_didIteratorError3","_iteratorError3","_step3","_iterator3","lock","unlock","timeUnit","toLowerCase","timeMultiplier","method","getValidAggregation","includes","_iteratorNormalCompletion2","_didIteratorError2","_iteratorError2","_step2","_iterator2","resetAggregation","timePeriodSelectMenuOpt","aggVal","aggMethodSelectMenuOpt","currentAggregationObj","_iteratorNormalCompletion4","_didIteratorError4","_iteratorError4","_step4","_iterator4","setPlaceHolderValue","_iteratorNormalCompletion5","_didIteratorError5","_iteratorError5","_step5","_iterator5","getAvailablelAggreagation","draw","getDefaultAggregationMethod","get"],"mappings":"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","file":"data-aggregator-es5.min.js","sourcesContent":["/******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId])\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\texports: {},\n/******/ \t\t\tid: moduleId,\n/******/ \t\t\tloaded: false\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.loaded = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(0);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t/* WEBPACK VAR INJECTION */(function(module) {'use strict';\n\t\n\tvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\t\n\tvar AggregatorGetter = __webpack_require__(2);\n\t\n\t;(function (env, factory) {\n\t  if (( false ? 'undefined' : _typeof(module)) === 'object' && module.exports) {\n\t    module.exports = env.document ? factory(env) : function (win) {\n\t      if (!win.document) {\n\t        throw new Error('Window with document not present');\n\t      }\n\t      return factory(win, true);\n\t    };\n\t  } else {\n\t    env.Aggregator = factory(env, true);\n\t  }\n\t})(typeof window !== 'undefined' ? window : undefined, function (_window, windowExists) {\n\t  var FC = _window.FusionCharts;\n\t\n\t  FC.register('extension', ['private', 'data-aggregator', function () {\n\t    FC.registerComponent('extensions', 'data-aggregator', AggregatorGetter({ FC: FC }));\n\t  }]);\n\t});\n\t/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(1)(module)))\n\n/***/ },\n/* 1 */\n/***/ function(module, exports) {\n\n\tmodule.exports = function(module) {\r\n\t\tif(!module.webpackPolyfill) {\r\n\t\t\tmodule.deprecate = function() {};\r\n\t\t\tmodule.paths = [];\r\n\t\t\t// module.parent = undefined by default\r\n\t\t\tmodule.children = [];\r\n\t\t\tmodule.webpackPolyfill = 1;\r\n\t\t}\r\n\t\treturn module;\r\n\t}\r\n\n\n/***/ },\n/* 2 */\n/***/ function(module, exports) {\n\n\t'use strict';\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\tvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tmodule.exports = function (dep) {\n\t  /**\n\t   * Capitalize the first letter of a given string and return the string\n\t   * @private\n\t   */\n\t  var capitalize = function capitalize(string) {\n\t    return string.charAt(0).toUpperCase() + string.slice(1);\n\t  },\n\t      isPlainObject = function isPlainObject(o) {\n\t    return (typeof o === 'undefined' ? 'undefined' : _typeof(o)) === 'object' && o.constructor === Object;\n\t  },\n\t      mergeRecursively = function recParsing(sink, source, lib) {\n\t    var prop;\n\t    for (prop in source) {\n\t      if (prop in sink) {\n\t        if (_typeof(source[prop]) === 'object') {\n\t          recParsing(sink[prop], source[prop], lib);\n\t        }\n\t      } else {\n\t        if (isPlainObject(source[prop])) {\n\t          sink[prop] = lib.extend2({}, source[prop]);\n\t        } else {\n\t          sink[prop] = source[prop];\n\t        }\n\t      }\n\t    }\n\t  };\n\t  /**\n\t   * Class representing the Data Aggregator.\n\t   */\n\t\n\t  var Aggregator = function () {\n\t    /**\n\t     * Create a Aggregator.\n\t     * @typedef {object} Aggregator.aggregation\n\t     * @property {string} binSize - The binSize applied to aggregate.\n\t     * @property {string} aggregationMethod - The method applied to aggregate.\n\t     */\n\t    function Aggregator() {\n\t      _classCallCheck(this, Aggregator);\n\t\n\t      /**\n\t       * @private\n\t       */\n\t      this.appliedAggregation = {\n\t        binSize: null,\n\t        aggregationMethod: null\n\t      };\n\t      this.config = {};\n\t    }\n\t\n\t    /**\n\t     * An object representing the binSize, aggregationMethod.\n\t     * @type {Aggregator.aggregation}\n\t     */\n\t\n\t\n\t    _createClass(Aggregator, [{\n\t      key: 'getAvailablelAggreagation',\n\t\n\t\n\t      /**\n\t       * Sets available aggregation options in configuration of extension\n\t       * @private\n\t       */\n\t      value: function getAvailablelAggreagation() {\n\t        var config = this.config,\n\t            dataAgg = config.dataAgg,\n\t            avlTimePeriods = config.avlTimePeriods = dataAgg.getAggregationTimeRules(),\n\t            i,\n\t            len;\n\t\n\t        config.avlTimeMultiplier = [];\n\t        len = avlTimePeriods.length;\n\t\n\t        for (i = 0; i < len; i++) {\n\t          config.avlTimeMultiplier.push(avlTimePeriods[i].possibleFactors);\n\t        }\n\t      }\n\t\n\t      /**\n\t       * Calculates valid aggregation time periods and corresponding multipliers\n\t       * @private\n\t       */\n\t\n\t    }, {\n\t      key: 'getValidAggregation',\n\t      value: function getValidAggregation() {\n\t        var self = this,\n\t            config = self.config,\n\t            tsObject = self.tsObject,\n\t            dataAgg = config.dataAgg,\n\t            i,\n\t            j,\n\t            len1,\n\t            len2,\n\t            avlTimePeriods,\n\t            avlTimeMultiplier,\n\t            maxNumOfPlot = config.composition.reactiveModel.model['max-plot-point'],\n\t            minimumConsecutiveDifference = config.composition.dataset.category.minimumConsecutiveDifference,\n\t            multipliersArr,\n\t            currentTimeLength,\n\t            timePeriod,\n\t            time,\n\t            binSize,\n\t            multiplier,\n\t            globalReactiveModel = tsObject.globalReactiveModel,\n\t            maximumAllowedTicks = globalReactiveModel.prop('x-axis-maximum-allowed-ticks'),\n\t            minBinSize;\n\t\n\t        config.currentTimeLength = globalReactiveModel.model['x-axis-visible-range-end'] - globalReactiveModel.model['x-axis-visible-range-start'];\n\t\n\t        avlTimePeriods = config.avlTimePeriods;\n\t        avlTimeMultiplier = config.avlTimeMultiplier;\n\t        currentTimeLength = config.currentTimeLength;\n\t\n\t        minBinSize = currentTimeLength / maxNumOfPlot;\n\t\n\t        config.validTimePeriod = [];\n\t        config.validTimePeriodMultiplier = [];\n\t        config.avlAggMethods = dataAgg.getAllAggregationMethod();\n\t\n\t        for (i = 0, len1 = avlTimePeriods.length; i < len1; i++) {\n\t          timePeriod = avlTimePeriods[i].name;\n\t          time = avlTimePeriods[i].interval;\n\t          multipliersArr = [];\n\t\n\t          for (j = 0, len2 = avlTimeMultiplier[i].length; j < len2; j++) {\n\t            multiplier = avlTimeMultiplier[i][j];\n\t            binSize = multiplier * time;\n\t\n\t            if (binSize >= minBinSize && binSize > minimumConsecutiveDifference &&\n\t            // Need to revisit\n\t            currentTimeLength > maximumAllowedTicks * binSize * 0.5) {\n\t              multipliersArr.push(avlTimeMultiplier[i][j]);\n\t            }\n\t          }\n\t          if (multipliersArr.length > 0) {\n\t            config.validTimePeriodMultiplier.push(multipliersArr);\n\t            config.validTimePeriod.push(timePeriod);\n\t          }\n\t        }\n\t      }\n\t\n\t      /**\n\t       * Returns current Aggregation applied to timeseries\n\t       * @private\n\t       */\n\t\n\t    }, {\n\t      key: 'getCurrentAggreation',\n\t      value: function getCurrentAggreation() {\n\t        var self = this,\n\t            config = self.config,\n\t            dataAgg = config.dataAgg,\n\t            composition = config.composition,\n\t            model = composition.reactiveModel,\n\t            currentAggMethod,\n\t            suitableInterval,\n\t            binSize;\n\t\n\t        binSize = model.prop('bin-size') - 1;\n\t\n\t        if (isFinite(binSize)) {\n\t          suitableInterval = dataAgg.timeRules.getSuitableInterval(binSize);\n\t          currentAggMethod = model.prop('aggregation-fn');\n\t        }\n\t\n\t        return {\n\t          timePeriod: suitableInterval && suitableInterval.name,\n\t          timePeriodMultiplier: suitableInterval && suitableInterval.step,\n\t          aggregationMethod: {\n\t            value: currentAggMethod && currentAggMethod.nickName,\n\t            text: currentAggMethod && currentAggMethod.formalName\n\t          }\n\t        };\n\t      }\n\t    }, {\n\t      key: 'init',\n\t      value: function init(require) {\n\t        var self = this,\n\t            config = self.config,\n\t            tsObject,\n\t            toolboxComponent = config.toolboxComponent = {},\n\t            api,\n\t            store,\n\t            composition,\n\t            saveTo = 'tsObject',\n\t            requiredParams = ['graphics', 'globalReactiveModel', 'chart', 'spaceManagerInstance', 'chartInstance', 'smartLabel', 'extData', 'parentGroup', 'lib', function acquire() {\n\t          var i = 0,\n\t              ii = requiredParams.length - 1,\n\t              param = '';\n\t          self[saveTo] = self[saveTo] || {};\n\t          self.requiredParams = {};\n\t          for (i = 0; i < ii; ++i) {\n\t            param = requiredParams[i];\n\t            self[saveTo][param] = arguments[i];\n\t          }\n\t        }];\n\t        require(requiredParams);\n\t\n\t        tsObject = self.tsObject;\n\t        config.usrConfig = tsObject.extData;\n\t\n\t        api = tsObject.chartInstance.apiInstance;\n\t        store = api.getComponentStore();\n\t        config.composition = composition = store.getCanvasByIndex(0).composition;\n\t        config.dataAgg = composition.impl.getDataAggregator();\n\t\n\t        toolboxComponent.toolbox = dep.FC.getComponent('api', 'toolbox');\n\t        toolboxComponent.config = {};\n\t\n\t        self.toolbars = [];\n\t\n\t        self.measurement = {};\n\t\n\t        self.toolbars.push(self.createToolbar());\n\t\n\t        composition.reactiveModel.onPropsChange(['bin-size', 'aggregation-fn'], function () {\n\t          if (config.execute) {\n\t            config.execute = false;\n\t            setTimeout(function () {\n\t              self.rangeOnChange();\n\t            }, 200);\n\t          }\n\t        });\n\t\n\t        window.Aggregator = self;\n\t        return self;\n\t      }\n\t\n\t      /**\n\t       * Create toolbar components\n\t       * @private\n\t       */\n\t\n\t    }, {\n\t      key: 'createToolbar',\n\t      value: function createToolbar() {\n\t        var self = this,\n\t            labelGroup,\n\t            selectMenuGroup,\n\t            buttonGroup,\n\t            toolbar,\n\t            timeMulSelectMenu,\n\t            timePeriodSelectMenu,\n\t            aggMethodSelectMenu,\n\t            resetButton,\n\t            applyButton,\n\t            config = self.config,\n\t            tsObject = self.tsObject,\n\t            label,\n\t            toolboxComponent = config.toolboxComponent,\n\t            toolbox = toolboxComponent.toolbox,\n\t            toolboxCompConfig = toolboxComponent.config,\n\t            HorizontalToolbar = toolbox.HorizontalToolbar,\n\t            ComponentGroup = toolbox.ComponentGroup,\n\t            graphics = tsObject.graphics,\n\t            paper = graphics.paper,\n\t            d3 = paper.getInstances().d3,\n\t            container = graphics.container,\n\t            chart = tsObject.chart,\n\t            smartLabel = tsObject.smartLabel,\n\t            multiplierVal,\n\t            timeMulSelectMenuOpt,\n\t            usrConfig,\n\t            style,\n\t            dependencies = {\n\t          paper: paper,\n\t          chart: chart,\n\t          smartLabel: smartLabel,\n\t          chartContainer: container\n\t        },\n\t\n\t\n\t        /**\n\t         * Sets valid time multiplier on time period change from extension toolbox\n\t         * @private\n\t         */\n\t        timePeriodOnChange = function timePeriodOnChange() {\n\t          var timePeriodVal = timePeriodSelectMenu.value(),\n\t              timePeriodMultiplierVal = timeMulSelectMenu.value(),\n\t              prevTimePeroidMulVal = timePeriodMultiplierVal,\n\t              validTimePeriod = config.validTimePeriod,\n\t              validTimePeriodMultiplier = config.validTimePeriodMultiplier,\n\t              indexOfTimeUnit,\n\t              indexOfTimeMul;\n\t\n\t          indexOfTimeUnit = validTimePeriod.indexOf(timePeriodVal);\n\t          indexOfTimeMul = validTimePeriodMultiplier[indexOfTimeUnit].indexOf(Number(timePeriodMultiplierVal));\n\t\n\t          timeMulSelectMenuOpt = [];\n\t          var _iteratorNormalCompletion = true;\n\t          var _didIteratorError = false;\n\t          var _iteratorError = undefined;\n\t\n\t          try {\n\t            for (var _iterator = validTimePeriodMultiplier[indexOfTimeUnit][Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n\t              multiplierVal = _step.value;\n\t\n\t              timeMulSelectMenuOpt.push({\n\t                name: multiplierVal.toString(),\n\t                value: multiplierVal.toString()\n\t              });\n\t            }\n\t          } catch (err) {\n\t            _didIteratorError = true;\n\t            _iteratorError = err;\n\t          } finally {\n\t            try {\n\t              if (!_iteratorNormalCompletion && _iterator.return) {\n\t                _iterator.return();\n\t              }\n\t            } finally {\n\t              if (_didIteratorError) {\n\t                throw _iteratorError;\n\t              }\n\t            }\n\t          }\n\t\n\t          timeMulSelectMenu.updateList(timeMulSelectMenuOpt);\n\t\n\t          if (indexOfTimeMul < 0) {\n\t            timeMulSelectMenu.value(validTimePeriodMultiplier[indexOfTimeUnit][0].toString());\n\t          } else {\n\t            timeMulSelectMenu.value(prevTimePeroidMulVal);\n\t          }\n\t        },\n\t\n\t\n\t        /**\n\t         * Sets state of applyButton(active/inactive) on change in value in toolbox\n\t         * @private\n\t         */\n\t        onChange = function onChange(type) {\n\t          var currentAgg = self.getCurrentAggreation();\n\t          currentAgg.timePeriodMultiplier = currentAgg.timePeriodMultiplier && currentAgg.timePeriodMultiplier.toString();\n\t\n\t          if (currentAgg.timePeriodMultiplier !== timeMulSelectMenu.value() || currentAgg.timePeriod !== timePeriodSelectMenu.value() || currentAgg.aggregationMethod.value !== aggMethodSelectMenu.value()) {\n\t            applyButton.removeState('disabled');\n\t          } else {\n\t            applyButton.setState('disabled');\n\t          }\n\t\n\t          if (!aggMethodSelectMenu.value()) {\n\t            aggMethodSelectMenu.value(config.defaultAggMethod);\n\t          }\n\t          if (!timePeriodSelectMenu.value() && !timeMulSelectMenu.value()) {\n\t            timePeriodSelectMenu.value(config.validTimePeriod[0]);\n\t            timePeriodOnChange();\n\t          }\n\t        };\n\t\n\t        labelGroup = new ComponentGroup(dependencies, {\n\t          hPadding: 4\n\t        });\n\t        selectMenuGroup = new ComponentGroup(dependencies, {\n\t          hPadding: 0\n\t        });\n\t        buttonGroup = new ComponentGroup(dependencies, {\n\t          hPadding: 0\n\t        });\n\t\n\t        toolbar = new HorizontalToolbar(dependencies);\n\t        usrConfig = config.usrConfig;\n\t\n\t        var selectConf = {\n\t          container: {\n\t            style: {\n\t              'fill': '#fff',\n\t              'stroke': '#c8cecd',\n\t              'stroke-width': '1'\n\t            },\n\t            states: {\n\t              selected: {\n\t                stroke: '#1e1f1f'\n\t              },\n\t              hover: {\n\t                cursor: 'pointer'\n\t              }\n\t            }\n\t          },\n\t          text: {\n\t            style: {\n\t              fill: '#696969',\n\t              'fontSize': '11px',\n\t              'fontFamily': '\"Lucida Grande\", sans-serif'\n\t            }\n\t          },\n\t          arrow: {\n\t            style: {\n\t              fill: '#696969'\n\t            }\n\t          },\n\t          attrs: {\n\t            'radius': 2,\n\t            'width': 50,\n\t            'height': 22,\n\t            'margin': {\n\t              right: 3\n\t            }\n\t          }\n\t        };\n\t\n\t        var defaultStyle = {\n\t          label: {\n\t            container: {\n\t              height: 22,\n\t              style: {}\n\t            },\n\t            text: {\n\t              style: {\n\t                'font-size': 13,\n\t                'font-family': '\"Lucida Grande\", sans-serif',\n\t                'font-weight': 'normal',\n\t                'fill': '#4b4b4b'\n\t              }\n\t            }\n\t          },\n\t          timeMulSelectMenu: {\n\t            container: selectConf.container,\n\t            text: selectConf.text,\n\t            arrow: selectConf.arrow,\n\t            attrs: {\n\t              'radius': 2,\n\t              'width': 50,\n\t              'height': 22,\n\t              'margin': {\n\t                right: 3\n\t              }\n\t            },\n\t            eventListeners: [{\n\t              type: 'change',\n\t              cb: onChange\n\t            }]\n\t          },\n\t          timePeriodSelectMenu: {\n\t            container: selectConf.container,\n\t            text: selectConf.text,\n\t            arrow: selectConf.arrow,\n\t            attrs: {\n\t              'radius': 2,\n\t              'width': 90,\n\t              'height': 22,\n\t              'margin': {\n\t                right: 8\n\t              }\n\t            },\n\t            eventListeners: [{\n\t              type: 'change',\n\t              cb: function cb() {\n\t                timePeriodOnChange();\n\t                onChange();\n\t              }\n\t            }]\n\t          },\n\t          aggMethodSelectMenu: {\n\t            container: selectConf.container,\n\t            text: selectConf.text,\n\t            arrow: selectConf.arrow,\n\t            attrs: {\n\t              'radius': 2,\n\t              'width': 100,\n\t              'height': 22,\n\t              margin: {\n\t                right: 11\n\t              }\n\t            },\n\t            eventListeners: [{\n\t              type: 'change',\n\t              cb: onChange\n\t            }]\n\t          },\n\t          dropDown: {\n\t            container: {\n\t              style: {\n\t                background: '#fff',\n\t                'border-color': '#898b8b',\n\t                'border-radius': '1px',\n\t                'border-style': 'solid',\n\t                'border-width': '2px',\n\t                'font-size': '11px',\n\t                'font-family': '\"Lucida Grande\", sans-serif'\n\t              }\n\t            },\n\t            listItem: {\n\t              style: {},\n\t              states: {\n\t                hover: {\n\t                  className: undefined,\n\t                  style: {\n\t                    'background': '#e6e8e8',\n\t                    'color': '#696969',\n\t                    'cursor': 'pointer'\n\t                  }\n\t                },\n\t                selected: {\n\t                  className: undefined,\n\t                  style: {\n\t                    'background': '#898b8b',\n\t                    'color': '#fff'\n\t                  }\n\t                }\n\t              }\n\t            }\n\t          },\n\t          applyButton: {\n\t            container: {\n\t              style: {\n\t                'fill': '#555',\n\t                'stroke': '#ced5d4',\n\t                'stroke-width': 0\n\t              },\n\t              states: {\n\t                disabled: {\n\t                  'fill': '#bebebe',\n\t                  'stroke-width': 0,\n\t                  'stroke': '#ced5d4'\n\t                }\n\t              }\n\t            },\n\t            text: {\n\t              style: {\n\t                'fill': '#f3f3f3',\n\t                'fontSize': '11px',\n\t                'fontFamily': '\"Lucida Grande\", sans-serif'\n\t              },\n\t              states: {\n\t                hover: {\n\t                  'fill': '#555',\n\t                  'stroke-width': 0,\n\t                  'stroke': ''\n\t                },\n\t                disabled: {\n\t                  'fill': '#f3f3f3'\n\t                }\n\t              }\n\t            },\n\t            attrs: {\n\t              'radius': 1,\n\t              'width': 54,\n\t              'height': 22,\n\t              margin: {\n\t                right: 3\n\t              },\n\t              label: 'APPLY'\n\t            },\n\t            eventListeners: [{\n\t              type: 'click',\n\t              cb: function cb() {\n\t                self.apply(1);\n\t              }\n\t            }]\n\t          },\n\t          resetButton: {\n\t            container: {\n\t              style: {\n\t                'fill': '#898b8b',\n\t                'stroke': '#ced5d4',\n\t                'strokeWidth': 0\n\t              },\n\t              states: {\n\t                hover: {\n\t                  cursor: 'pointer'\n\t                },\n\t                disabled: {\n\t                  'fill': '#bebebe',\n\t                  'stroke-width': 0,\n\t                  'stroke': '#ced5d4',\n\t                  cursor: 'default'\n\t                }\n\t              }\n\t            },\n\t            text: {\n\t              style: {\n\t                fill: '#f3f3f3',\n\t                'fontSize': '11px',\n\t                'fontFamily': '\"Lucida Grande\", sans-serif'\n\t              },\n\t              states: {\n\t                disabled: {\n\t                  fill: '#f3f3f3'\n\t                }\n\t              }\n\t            },\n\t            attrs: {\n\t              'radius': 1,\n\t              'shadow': {\n\t                'fill': '#000',\n\t                'opacity': 0.35\n\t              },\n\t              'width': 54,\n\t              'height': 22,\n\t              margin: {\n\t                right: 3\n\t              },\n\t              label: 'RESET'\n\t            },\n\t            eventListeners: [{\n\t              type: 'click',\n\t              cb: function cb() {\n\t                self.apply(0);\n\t              }\n\t            }]\n\t          }\n\t        };\n\t\n\t        style = defaultStyle;\n\t\n\t        if (usrConfig.styles) {\n\t          mergeRecursively(usrConfig.styles, defaultStyle, this.tsObject.lib);\n\t          style = usrConfig.styles;\n\t        }\n\t\n\t        label = new toolbox.Label('Aggregate Data:', dependencies, style.label);\n\t\n\t        label.setConfig({\n\t          className: style.label.className\n\t        });\n\t\n\t        applyClassName(label.getIndividualClassNames(label.getClassName()), 'label');\n\t\n\t        var parentGroup = tsObject.parentGroup;\n\t        var count = 0;\n\t\n\t        function applyClassName(obj, prop, state) {\n\t          var _style;\n\t          for (var key in obj) {\n\t            if (style[prop][key]) {\n\t              if (state && style[prop][key].states && style[prop][key].states[state]) {\n\t                _style = style[prop][key].states[state];\n\t              } else {\n\t                _style = style[prop][key].style;\n\t              }\n\t            }\n\t            _style && paper.cssAddRule('.' + obj[key], _style);\n\t          }\n\t        }\n\t\n\t        function factory(prop, cb, options) {\n\t          var sm = toolboxCompConfig[prop] = cb(options).setConfig(style[prop].attrs);\n\t\n\t          sm.setParentGroup(parentGroup);\n\t          sm.setConfig({\n\t            className: style[prop].className\n\t          });\n\t\n\t          sm.namespace('fusioncharts');\n\t          sm.appendSelector('ext1-' + count++);\n\t\n\t          applyClassName(sm.getIndividualClassNames(sm.getClassName()), prop);\n\t          var classNames = sm.config.states;\n\t          for (var key in classNames) {\n\t            applyClassName(sm.getIndividualClassNames(classNames[key]), prop, key);\n\t          }\n\t\n\t          var dm = sm.config.dropDownMenu;\n\t          for (var components in dm) {\n\t            var component = dm[components];\n\t            switch (components) {\n\t              case 'container':\n\t                paper.cssAddRule('.' + component.className, style.dropDown.container.style);\n\t                break;\n\t              case 'listItem':\n\t                paper.cssAddRule('.' + component.className, style.dropDown.listItem.style);\n\t                var states = component.states;\n\t                for (var state in states) {\n\t                  paper.cssAddRule('.' + states[state], style.dropDown.listItem.states[state].style);\n\t                }\n\t                break;\n\t            }\n\t          }\n\t\n\t          var eventListeners = style[prop].eventListeners;\n\t          for (var i = 0, len = eventListeners.length; i < len; i += 1) {\n\t            var event = eventListeners[i];\n\t            var obj = {};\n\t            obj[event.type] = event.cb;\n\t            sm.attachEventHandlers(obj);\n\t          }\n\t          return sm;\n\t        }\n\t\n\t        function createSelectButton(prop) {\n\t          return factory(prop, d3.selectButton, []);\n\t        }\n\t\n\t        function createButton(prop) {\n\t          return factory(prop, d3.button, style[prop].attrs.label);\n\t        }\n\t\n\t        labelGroup.addSymbol(label);\n\t\n\t        timeMulSelectMenu = createSelectButton('timeMulSelectMenu');\n\t        timePeriodSelectMenu = createSelectButton('timePeriodSelectMenu');\n\t        aggMethodSelectMenu = createSelectButton('aggMethodSelectMenu');\n\t\n\t        applyButton = createButton('applyButton');\n\t        resetButton = createButton('resetButton');\n\t\n\t        selectMenuGroup.addSymbol(timeMulSelectMenu);\n\t        selectMenuGroup.addSymbol(timePeriodSelectMenu);\n\t        selectMenuGroup.addSymbol(aggMethodSelectMenu);\n\t        buttonGroup.addSymbol(applyButton);\n\t        buttonGroup.addSymbol(resetButton);\n\t\n\t        toolbar.addComponent(labelGroup);\n\t        toolbar.addComponent(selectMenuGroup);\n\t        toolbar.addComponent(buttonGroup);\n\t        return toolbar;\n\t      }\n\t    }, {\n\t      key: 'getLogicalSpace',\n\t      value: function getLogicalSpace(availableWidth, availableHeight) {\n\t        var logicalSpace,\n\t            width = 0,\n\t            height = 0,\n\t            i,\n\t            ln;\n\t\n\t        for (i = 0, ln = this.toolbars.length; i < ln; i++) {\n\t          logicalSpace = this.toolbars[i].getLogicalSpace(availableWidth, availableHeight);\n\t          width = Math.max(logicalSpace.width, width);\n\t          height += logicalSpace.height;\n\t          this.toolbars[i].width = logicalSpace.width;\n\t          this.toolbars[i].height = logicalSpace.height;\n\t        }\n\t        height += this.padding;\n\t        return {\n\t          width: width,\n\t          height: height\n\t        };\n\t      }\n\t    }, {\n\t      key: 'placeInCanvas',\n\t      value: function placeInCanvas(containerInstance) {\n\t        var _self = this,\n\t            tsObject = _self.tsObject,\n\t            usrConfig = _self.config.usrConfig;\n\t\n\t        _self.padding = 5;\n\t        tsObject.spaceManagerInstance.add([{\n\t          name: function name() {\n\t            return 'data-aggregator';\n\t          },\n\t          ref: function ref(obj) {\n\t            return obj['0'];\n\t          },\n\t          self: function self() {\n\t            return _self;\n\t          },\n\t          priority: function priority() {\n\t            return 2;\n\t          },\n\t          layout: function layout(obj) {\n\t            return obj[usrConfig.layout || 'inline'];\n\t          },\n\t          orientation: [{\n\t            type: function type(obj) {\n\t              return obj[usrConfig.orientation || 'horizontal'];\n\t            },\n\t            position: [{\n\t              type: function type(obj) {\n\t                return obj[usrConfig.position || 'bottom'];\n\t              },\n\t              alignment: [{\n\t                type: function type(obj) {\n\t                  return obj[usrConfig.alignment || 'right'];\n\t                },\n\t                dimensions: [function () {\n\t                  var parent = this.getParentComponentGroup();\n\t                  return _self.getLogicalSpace(parent.getWidth(), parent.getHeight());\n\t                }]\n\t              }]\n\t            }]\n\t          }]\n\t        }]);\n\t      }\n\t    }, {\n\t      key: 'setDrawingConfiguration',\n\t      value: function setDrawingConfiguration(x, y, width, height, group) {\n\t        var mes = this.measurement;\n\t        mes.x = x;\n\t        mes.y = y;\n\t        mes.width = width;\n\t        mes.height = height;\n\t\n\t        this.parentGroup = group;\n\t\n\t        return this;\n\t      }\n\t\n\t      /**\n\t       * Apply or Reset Aggregation applied through extension in timeseries\n\t       * @param {number} set - Flag to set or reset. '1' to set, '0' to reset\n\t       * @private\n\t       */\n\t\n\t    }, {\n\t      key: 'apply',\n\t      value: function apply(set) {\n\t        var self = this,\n\t            config = self.config,\n\t            toolboxCompConfig = config.toolboxComponent.config,\n\t            timePeriodSelectMenu = toolboxCompConfig.timePeriodSelectMenu,\n\t            timeMulSelectMenu = toolboxCompConfig.timeMulSelectMenu,\n\t            aggMethodSelectMenu = toolboxCompConfig.aggMethodSelectMenu,\n\t            applyButton = toolboxCompConfig.applyButton,\n\t            resetButton = toolboxCompConfig.resetButton,\n\t            aggregate = self.tsObject.extData.aggregate || {},\n\t            validTimePeriod,\n\t            validTimePeriodMultiplier,\n\t            avlAggMethods,\n\t            indexOfTimeUnit,\n\t            validTimeBin,\n\t            validMethod,\n\t            model = config.composition.reactiveModel,\n\t            timePeriodVal,\n\t            timePeriodMultiplierVal,\n\t            aggMethod,\n\t            keys,\n\t            binSize,\n\t            timeInterval,\n\t            aggregation = self.aggregation,\n\t            canvas = config.composition.impl;\n\t\n\t        if (set) {\n\t          if (!config.drawn) {\n\t            timePeriodVal = aggregate.timeUnit && aggregate.timeUnit.toString().toLowerCase();\n\t            timePeriodMultiplierVal = aggregate.timeMultiplier;\n\t            aggMethod = aggregate.method && aggregate.method.toString();\n\t\n\t            self.getValidAggregation();\n\t            validTimePeriod = config.validTimePeriod;\n\t            validTimePeriodMultiplier = config.validTimePeriodMultiplier;\n\t            avlAggMethods = config.avlAggMethods;\n\t\n\t            if (validTimePeriod.includes(timePeriodVal)) {\n\t              indexOfTimeUnit = validTimePeriod.indexOf(timePeriodVal);\n\t              if (!validTimePeriodMultiplier[indexOfTimeUnit].includes(Number(timePeriodMultiplierVal))) {\n\t                timePeriodMultiplierVal = validTimePeriodMultiplier[indexOfTimeUnit][0];\n\t              }\n\t              validTimeBin = true;\n\t            }\n\t\n\t            if (avlAggMethods[aggMethod]) {\n\t              validMethod = true;\n\t            }\n\t\n\t            if (validTimeBin || validMethod) {\n\t              if (validTimeBin) {\n\t                var _iteratorNormalCompletion2 = true;\n\t                var _didIteratorError2 = false;\n\t                var _iteratorError2 = undefined;\n\t\n\t                try {\n\t                  for (var _iterator2 = config.avlTimePeriods[Symbol.iterator](), _step2; !(_iteratorNormalCompletion2 = (_step2 = _iterator2.next()).done); _iteratorNormalCompletion2 = true) {\n\t                    keys = _step2.value;\n\t\n\t                    if (keys.name === timePeriodVal) {\n\t                      timeInterval = keys.interval;\n\t                      break;\n\t                    }\n\t                  }\n\t                } catch (err) {\n\t                  _didIteratorError2 = true;\n\t                  _iteratorError2 = err;\n\t                } finally {\n\t                  try {\n\t                    if (!_iteratorNormalCompletion2 && _iterator2.return) {\n\t                      _iterator2.return();\n\t                    }\n\t                  } finally {\n\t                    if (_didIteratorError2) {\n\t                      throw _iteratorError2;\n\t                    }\n\t                  }\n\t                }\n\t\n\t                binSize = timeInterval * Number(timePeriodMultiplierVal);\n\t                model.lock().prop('bin-size-ext', binSize).unlock();\n\t                aggregation.binSize = binSize;\n\t              }\n\t\n\t              if (validMethod) {\n\t                model.lock().prop('aggregation-fn-ext', config.avlAggMethods[aggMethod]).unlock();\n\t                aggregation.aggregationMethod = aggMethod;\n\t              }\n\t              applyButton.setState('disabled');\n\t              resetButton.removeState('disabled');\n\t            }\n\t          } else {\n\t            timePeriodVal = timePeriodSelectMenu.value();\n\t            timePeriodMultiplierVal = timeMulSelectMenu.value();\n\t            aggMethod = aggMethodSelectMenu.value();\n\t\n\t            var _iteratorNormalCompletion3 = true;\n\t            var _didIteratorError3 = false;\n\t            var _iteratorError3 = undefined;\n\t\n\t            try {\n\t              for (var _iterator3 = config.avlTimePeriods[Symbol.iterator](), _step3; !(_iteratorNormalCompletion3 = (_step3 = _iterator3.next()).done); _iteratorNormalCompletion3 = true) {\n\t                keys = _step3.value;\n\t\n\t                if (keys.name === timePeriodVal) {\n\t                  timeInterval = keys.interval;\n\t                  break;\n\t                }\n\t              }\n\t            } catch (err) {\n\t              _didIteratorError3 = true;\n\t              _iteratorError3 = err;\n\t            } finally {\n\t              try {\n\t                if (!_iteratorNormalCompletion3 && _iterator3.return) {\n\t                  _iterator3.return();\n\t                }\n\t              } finally {\n\t                if (_didIteratorError3) {\n\t                  throw _iteratorError3;\n\t                }\n\t              }\n\t            }\n\t\n\t            binSize = timeInterval * Number(timePeriodMultiplierVal);\n\t            model.lock().prop('bin-size-ext', binSize).prop('aggregation-fn-ext', config.avlAggMethods[aggMethod]).unlock();\n\t            aggregation.binSize = binSize;\n\t            aggregation.aggregationMethod = aggMethod;\n\t            applyButton.setState('disabled');\n\t            resetButton.removeState('disabled');\n\t          }\n\t        } else {\n\t          canvas.resetAggregation();\n\t          aggregation.binSize = null;\n\t          aggregation.aggregationMethod = null;\n\t          resetButton.setState('disabled');\n\t        }\n\t      }\n\t\n\t      /**\n\t       * Compute and populate toolboxes with valid values on change in range of visual window\n\t       * @private\n\t       */\n\t\n\t    }, {\n\t      key: 'rangeOnChange',\n\t      value: function rangeOnChange() {\n\t        var self = this,\n\t            config = self.config,\n\t            toolboxCompConfig = config.toolboxComponent.config,\n\t            timePeriodSelectMenu = toolboxCompConfig.timePeriodSelectMenu,\n\t            timeMulSelectMenu = toolboxCompConfig.timeMulSelectMenu,\n\t            aggMethodSelectMenu = toolboxCompConfig.aggMethodSelectMenu,\n\t            applyButton = toolboxCompConfig.applyButton,\n\t            resetButton = toolboxCompConfig.resetButton,\n\t            model = config.composition.reactiveModel,\n\t            timePeriodVal,\n\t            timePeriodSelectMenuOpt,\n\t            validTimePeriod,\n\t            indexOfTimeUnit,\n\t            multiplierVal,\n\t            timeMulSelectMenuOpt,\n\t            validTimePeriodMultiplier,\n\t            aggVal,\n\t            aggMethodSelectMenuOpt,\n\t            avlAggMethods,\n\t            aggregation = self.aggregation,\n\t            currentAggregationObj,\n\t            timePeriod,\n\t            timePeriodMultiplier,\n\t            aggregationMethod;\n\t\n\t        self.getValidAggregation();\n\t        currentAggregationObj = self.getCurrentAggreation();\n\t        timePeriod = currentAggregationObj.timePeriod;\n\t        timePeriodMultiplier = currentAggregationObj.timePeriodMultiplier;\n\t        aggregationMethod = currentAggregationObj.aggregationMethod;\n\t\n\t        timePeriodSelectMenuOpt = [];\n\t        timeMulSelectMenuOpt = [];\n\t        aggMethodSelectMenuOpt = [];\n\t\n\t        validTimePeriod = config.validTimePeriod;\n\t        validTimePeriodMultiplier = config.validTimePeriodMultiplier;\n\t        avlAggMethods = config.avlAggMethods;\n\t\n\t        applyButton.setState('disabled');\n\t\n\t        if (aggregation.binSize !== model.prop('bin-size') && (aggregationMethod.value === config.defaultAggMethod || !aggregationMethod.value)) {\n\t          aggregation.binSize = null;\n\t          aggregation.aggregationMethod = null;\n\t          resetButton.setState('disabled');\n\t        } else {\n\t          resetButton.removeState('disabled');\n\t        }\n\t\n\t        var _iteratorNormalCompletion4 = true;\n\t        var _didIteratorError4 = false;\n\t        var _iteratorError4 = undefined;\n\t\n\t        try {\n\t          for (var _iterator4 = validTimePeriod[Symbol.iterator](), _step4; !(_iteratorNormalCompletion4 = (_step4 = _iterator4.next()).done); _iteratorNormalCompletion4 = true) {\n\t            timePeriodVal = _step4.value;\n\t\n\t            timePeriodSelectMenuOpt.push({\n\t              name: capitalize(timePeriodVal),\n\t              value: timePeriodVal\n\t            });\n\t          }\n\t        } catch (err) {\n\t          _didIteratorError4 = true;\n\t          _iteratorError4 = err;\n\t        } finally {\n\t          try {\n\t            if (!_iteratorNormalCompletion4 && _iterator4.return) {\n\t              _iterator4.return();\n\t            }\n\t          } finally {\n\t            if (_didIteratorError4) {\n\t              throw _iteratorError4;\n\t            }\n\t          }\n\t        }\n\t\n\t        timePeriodSelectMenu.updateList(timePeriodSelectMenuOpt);\n\t        timePeriod ? timePeriodSelectMenu.value(timePeriod) : timePeriodSelectMenu.setPlaceHolderValue('');\n\t\n\t        indexOfTimeUnit = validTimePeriod.indexOf(timePeriod);\n\t\n\t        if (indexOfTimeUnit >= 0) {\n\t          var _iteratorNormalCompletion5 = true;\n\t          var _didIteratorError5 = false;\n\t          var _iteratorError5 = undefined;\n\t\n\t          try {\n\t            for (var _iterator5 = validTimePeriodMultiplier[indexOfTimeUnit][Symbol.iterator](), _step5; !(_iteratorNormalCompletion5 = (_step5 = _iterator5.next()).done); _iteratorNormalCompletion5 = true) {\n\t              multiplierVal = _step5.value;\n\t\n\t              timeMulSelectMenuOpt.push({\n\t                name: multiplierVal.toString(),\n\t                value: multiplierVal.toString()\n\t              });\n\t            }\n\t          } catch (err) {\n\t            _didIteratorError5 = true;\n\t            _iteratorError5 = err;\n\t          } finally {\n\t            try {\n\t              if (!_iteratorNormalCompletion5 && _iterator5.return) {\n\t                _iterator5.return();\n\t              }\n\t            } finally {\n\t              if (_didIteratorError5) {\n\t                throw _iteratorError5;\n\t              }\n\t            }\n\t          }\n\t        }\n\t\n\t        timeMulSelectMenu.updateList(timeMulSelectMenuOpt);\n\t        timePeriodMultiplier ? timeMulSelectMenu.value(timePeriodMultiplier.toString()) : timeMulSelectMenu.setPlaceHolderValue('');\n\t\n\t        for (aggVal in avlAggMethods) {\n\t          aggMethodSelectMenuOpt.push({\n\t            name: capitalize(avlAggMethods[aggVal].formalName),\n\t            value: avlAggMethods[aggVal].nickName\n\t          });\n\t        }\n\t\n\t        aggMethodSelectMenu.updateList(aggMethodSelectMenuOpt);\n\t        aggregationMethod.value ? aggMethodSelectMenu.value(aggregationMethod.value) : aggMethodSelectMenu.setPlaceHolderValue('');\n\t        config.execute = true;\n\t      }\n\t    }, {\n\t      key: 'draw',\n\t      value: function draw(x, y, width, height, group) {\n\t        var self = this,\n\t            config = self.config,\n\t            measurement = self.measurement,\n\t            toolbars = self.toolbars,\n\t            ln,\n\t            i,\n\t            toolbar,\n\t            dataAgg = config.dataAgg;\n\t\n\t        self.getAvailablelAggreagation();\n\t\n\t        x = x === undefined ? measurement.x : x;\n\t        y = y === undefined ? measurement.y : y;\n\t        width = width === undefined ? measurement.width : width;\n\t        height = height === undefined ? measurement.height : height;\n\t        group = group === undefined ? self.parentGroup : group;\n\t        if (width && height) {\n\t          for (i = 0, ln = toolbars.length; i < ln; i++) {\n\t            toolbar = toolbars[i];\n\t            toolbar.draw(x, y, group);\n\t          }\n\t\n\t          config.defaultAggMethod = dataAgg.getDefaultAggregationMethod().nickName;\n\t          !config.drawn && self.apply(1);\n\t          self.rangeOnChange();\n\t          config.drawn = true;\n\t        }\n\t      }\n\t    }, {\n\t      key: 'dispose',\n\t      value: function dispose() {\n\t        // dispose extension\n\t      }\n\t    }, {\n\t      key: 'aggregation',\n\t      get: function get() {\n\t        return this.appliedAggregation;\n\t      },\n\t      set: function set(obj) {\n\t        this.appliedAggregation.timePeriod = obj.timePeriod;\n\t        this.appliedAggregation.timePeriodMultiplier = obj.timePeriodMultiplier;\n\t        this.appliedAggregation.aggregationMethod = obj.aggregationMethod;\n\t      }\n\t    }]);\n\t\n\t    return Aggregator;\n\t  }();\n\t\n\t  return Aggregator;\n\t};\n\n/***/ }\n/******/ ]);\n\n\n// WEBPACK FOOTER //\n// data-aggregator-es5.min.js"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 6c8d12cc7cf0b6f410a8","'use strict';\nconst AggregatorGetter = require('./data-aggregator-ext');\n\n;(function (env, factory) {\n  if (typeof module === 'object' && module.exports) {\n    module.exports = env.document\n       ? factory(env) : function (win) {\n         if (!win.document) {\n           throw new Error('Window with document not present');\n         }\n         return factory(win, true);\n       };\n  } else {\n    env.Aggregator = factory(env, true);\n  }\n})(typeof window !== 'undefined' ? window : this, function (_window, windowExists) {\n  var FC = _window.FusionCharts;\n\n  FC.register('extension', ['private', 'data-aggregator', function () {\n    FC.registerComponent('extensions', 'data-aggregator', AggregatorGetter({FC: FC}));\n  }]);\n});\n\n\n\n// WEBPACK FOOTER //\n// ./src/index.js","module.exports = function(module) {\r\n\tif(!module.webpackPolyfill) {\r\n\t\tmodule.deprecate = function() {};\r\n\t\tmodule.paths = [];\r\n\t\t// module.parent = undefined by default\r\n\t\tmodule.children = [];\r\n\t\tmodule.webpackPolyfill = 1;\r\n\t}\r\n\treturn module;\r\n}\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// (webpack)/buildin/module.js\n// module id = 1\n// module chunks = 0","'use strict';\n\nmodule.exports = function (dep) {\n  /**\n   * Capitalize the first letter of a given string and return the string\n   * @private\n   */\n  var capitalize = function (string) {\n      return string.charAt(0).toUpperCase() + string.slice(1);\n    },\n    isPlainObject = function (o) {\n      return typeof o === 'object' && o.constructor === Object;\n    },\n    mergeRecursively = function recParsing (sink, source, lib) {\n      var prop;\n      for (prop in source) {\n        if (prop in sink) {\n          if (typeof source[prop] === 'object') {\n            recParsing(sink[prop], source[prop], lib);\n          }\n        } else {\n          if (isPlainObject(source[prop])) {\n            sink[prop] = lib.extend2({}, source[prop]);\n          } else {\n            sink[prop] = source[prop];\n          }\n        }\n      }\n    };\n  /**\n   * Class representing the Data Aggregator.\n   */\n  class Aggregator {\n    /**\n     * Create a Aggregator.\n     * @typedef {object} Aggregator.aggregation\n     * @property {string} binSize - The binSize applied to aggregate.\n     * @property {string} aggregationMethod - The method applied to aggregate.\n     */\n    constructor () {\n      /**\n       * @private\n       */\n      this.appliedAggregation = {\n        binSize: null,\n        aggregationMethod: null\n      };\n      this.config = {};\n    }\n\n    /**\n     * An object representing the binSize, aggregationMethod.\n     * @type {Aggregator.aggregation}\n     */\n    get aggregation () {\n      return this.appliedAggregation;\n    }\n\n    set aggregation (obj) {\n      this.appliedAggregation.timePeriod = obj.timePeriod;\n      this.appliedAggregation.timePeriodMultiplier = obj.timePeriodMultiplier;\n      this.appliedAggregation.aggregationMethod = obj.aggregationMethod;\n    }\n\n    /**\n     * Sets available aggregation options in configuration of extension\n     * @private\n     */\n    getAvailablelAggreagation () {\n      var config = this.config,\n        dataAgg = config.dataAgg,\n        avlTimePeriods = config.avlTimePeriods = dataAgg.getAggregationTimeRules(),\n        i,\n        len;\n\n      config.avlTimeMultiplier = [];\n      len = avlTimePeriods.length;\n\n      for (i = 0; i < len; i++) {\n        config.avlTimeMultiplier.push(avlTimePeriods[i].possibleFactors);\n      }\n    }\n\n    /**\n     * Calculates valid aggregation time periods and corresponding multipliers\n     * @private\n     */\n    getValidAggregation () {\n      var self = this,\n        config = self.config,\n        tsObject = self.tsObject,\n        dataAgg = config.dataAgg,\n        i,\n        j,\n        len1,\n        len2,\n        avlTimePeriods,\n        avlTimeMultiplier,\n        maxNumOfPlot = config.composition.reactiveModel.model['max-plot-point'],\n        minimumConsecutiveDifference = config.composition.dataset.category.minimumConsecutiveDifference,\n        multipliersArr,\n        currentTimeLength,\n        timePeriod,\n        time,\n        binSize,\n        multiplier,\n        globalReactiveModel = tsObject.globalReactiveModel,\n        maximumAllowedTicks = globalReactiveModel.prop('x-axis-maximum-allowed-ticks'),\n        minBinSize;\n\n      config.currentTimeLength = globalReactiveModel.model['x-axis-visible-range-end'] -\n        globalReactiveModel.model['x-axis-visible-range-start'];\n\n      avlTimePeriods = config.avlTimePeriods;\n      avlTimeMultiplier = config.avlTimeMultiplier;\n      currentTimeLength = config.currentTimeLength;\n\n      minBinSize = currentTimeLength / maxNumOfPlot;\n\n      config.validTimePeriod = [];\n      config.validTimePeriodMultiplier = [];\n      config.avlAggMethods = dataAgg.getAllAggregationMethod();\n\n      for (i = 0, len1 = avlTimePeriods.length; i < len1; i++) {\n        timePeriod = avlTimePeriods[i].name;\n        time = avlTimePeriods[i].interval;\n        multipliersArr = [];\n\n        for (j = 0, len2 = avlTimeMultiplier[i].length; j < len2; j++) {\n          multiplier = avlTimeMultiplier[i][j];\n          binSize = multiplier * time;\n\n          if ((binSize >= minBinSize) && (binSize > minimumConsecutiveDifference) &&\n            // Need to revisit\n            (currentTimeLength > maximumAllowedTicks * binSize * 0.5)) {\n            multipliersArr.push(avlTimeMultiplier[i][j]);\n          }\n        }\n        if (multipliersArr.length > 0) {\n          config.validTimePeriodMultiplier.push(multipliersArr);\n          config.validTimePeriod.push(timePeriod);\n        }\n      }\n    }\n\n    /**\n     * Returns current Aggregation applied to timeseries\n     * @private\n     */\n    getCurrentAggreation () {\n      var self = this,\n        config = self.config,\n        dataAgg = config.dataAgg,\n        composition = config.composition,\n        model = composition.reactiveModel,\n        currentAggMethod,\n        suitableInterval,\n        binSize;\n\n      binSize = model.prop('bin-size') - 1;\n\n      if (isFinite(binSize)) {\n        suitableInterval = dataAgg.timeRules.getSuitableInterval(binSize);\n        currentAggMethod = model.prop('aggregation-fn');\n      }\n\n      return {\n        timePeriod: suitableInterval && suitableInterval.name,\n        timePeriodMultiplier: suitableInterval && suitableInterval.step,\n        aggregationMethod: {\n          value: currentAggMethod && currentAggMethod.nickName,\n          text: currentAggMethod && currentAggMethod.formalName\n        }\n      };\n    }\n\n    init (require) {\n      var self = this,\n        config = self.config,\n        tsObject,\n        toolboxComponent = config.toolboxComponent = {},\n        api,\n        store,\n        composition,\n        saveTo = 'tsObject',\n        requiredParams = [\n          'graphics',\n          'globalReactiveModel',\n          'chart',\n          'spaceManagerInstance',\n          'chartInstance',\n          'smartLabel',\n          'extData',\n          'parentGroup',\n          'lib',\n          function acquire () {\n            let i = 0,\n              ii = requiredParams.length - 1,\n              param = '';\n            self[saveTo] = self[saveTo] || {};\n            self.requiredParams = {};\n            for (i = 0; i < ii; ++i) {\n              param = requiredParams[i];\n              self[saveTo][param] = arguments[i];\n            }\n          }\n        ];\n      require(requiredParams);\n\n      tsObject = self.tsObject;\n      config.usrConfig = tsObject.extData;\n\n      api = tsObject.chartInstance.apiInstance;\n      store = api.getComponentStore();\n      config.composition = composition = store.getCanvasByIndex(0).composition;\n      config.dataAgg = composition.impl.getDataAggregator();\n\n      toolboxComponent.toolbox = dep.FC.getComponent('api', 'toolbox');\n      toolboxComponent.config = {};\n\n      self.toolbars = [];\n\n      self.measurement = {};\n\n      self.toolbars.push(self.createToolbar());\n\n      composition.reactiveModel.onPropsChange(['bin-size', 'aggregation-fn'], function () {\n        if (config.execute) {\n          config.execute = false;\n          setTimeout(() => {\n            self.rangeOnChange();\n          }, 200);\n        }\n      });\n\n      window.Aggregator = self;\n      return self;\n    }\n\n    /**\n     * Create toolbar components\n     * @private\n     */\n    createToolbar () {\n      var self = this,\n        labelGroup,\n        selectMenuGroup,\n        buttonGroup,\n        toolbar,\n        timeMulSelectMenu,\n        timePeriodSelectMenu,\n        aggMethodSelectMenu,\n        resetButton,\n        applyButton,\n        config = self.config,\n        tsObject = self.tsObject,\n        label,\n\n        toolboxComponent = config.toolboxComponent,\n        toolbox = toolboxComponent.toolbox,\n        toolboxCompConfig = toolboxComponent.config,\n        HorizontalToolbar = toolbox.HorizontalToolbar,\n        ComponentGroup = toolbox.ComponentGroup,\n\n        graphics = tsObject.graphics,\n        paper = graphics.paper,\n        d3 = paper.getInstances().d3,\n        container = graphics.container,\n        chart = tsObject.chart,\n        smartLabel = tsObject.smartLabel,\n\n        multiplierVal,\n        timeMulSelectMenuOpt,\n\n        usrConfig,\n        style,\n\n        dependencies = {\n          paper: paper,\n          chart: chart,\n          smartLabel: smartLabel,\n          chartContainer: container\n        },\n\n        /**\n         * Sets valid time multiplier on time period change from extension toolbox\n         * @private\n         */\n        timePeriodOnChange = () => {\n          var timePeriodVal = timePeriodSelectMenu.value(),\n            timePeriodMultiplierVal = timeMulSelectMenu.value(),\n            prevTimePeroidMulVal = timePeriodMultiplierVal,\n            validTimePeriod = config.validTimePeriod,\n            validTimePeriodMultiplier = config.validTimePeriodMultiplier,\n            indexOfTimeUnit,\n            indexOfTimeMul;\n\n          indexOfTimeUnit = validTimePeriod.indexOf(timePeriodVal);\n          indexOfTimeMul = validTimePeriodMultiplier[indexOfTimeUnit].indexOf(Number(timePeriodMultiplierVal));\n\n          timeMulSelectMenuOpt = [];\n          for (multiplierVal of validTimePeriodMultiplier[indexOfTimeUnit]) {\n            timeMulSelectMenuOpt.push({\n              name: multiplierVal.toString(),\n              value: multiplierVal.toString()\n            });\n          }\n\n          timeMulSelectMenu.updateList(timeMulSelectMenuOpt);\n\n          if (indexOfTimeMul < 0) {\n            timeMulSelectMenu.value(validTimePeriodMultiplier[indexOfTimeUnit][0].toString());\n          } else {\n            timeMulSelectMenu.value(prevTimePeroidMulVal);\n          }\n        },\n\n        /**\n         * Sets state of applyButton(active/inactive) on change in value in toolbox\n         * @private\n         */\n        onChange = (type) => {\n          var currentAgg = self.getCurrentAggreation();\n          currentAgg.timePeriodMultiplier = currentAgg.timePeriodMultiplier &&\n            currentAgg.timePeriodMultiplier.toString();\n\n          if (currentAgg.timePeriodMultiplier !== timeMulSelectMenu.value() ||\n            currentAgg.timePeriod !== timePeriodSelectMenu.value() ||\n            currentAgg.aggregationMethod.value !== aggMethodSelectMenu.value()) {\n            applyButton.removeState('disabled');\n          } else {\n            applyButton.setState('disabled');\n          }\n\n          if (!aggMethodSelectMenu.value()) {\n            aggMethodSelectMenu.value(config.defaultAggMethod);\n          }\n          if (!timePeriodSelectMenu.value() && !timeMulSelectMenu.value()) {\n            timePeriodSelectMenu.value(config.validTimePeriod[0]);\n            timePeriodOnChange();\n          }\n        };\n\n      labelGroup = new ComponentGroup(dependencies, {\n        hPadding: 4\n      });\n      selectMenuGroup = new ComponentGroup(dependencies, {\n        hPadding: 0\n      });\n      buttonGroup = new ComponentGroup(dependencies, {\n        hPadding: 0\n      });\n\n      toolbar = new HorizontalToolbar(dependencies);\n      usrConfig = config.usrConfig;\n\n      var selectConf = {\n        container: {\n          style: {\n            'fill': '#fff',\n            'stroke': '#c8cecd',\n            'stroke-width': '1'\n          },\n          states: {\n            selected: {\n              stroke: '#1e1f1f'\n            },\n            hover: {\n              cursor: 'pointer'\n            }\n          }\n        },\n        text: {\n          style: {\n            fill: '#696969',\n            'fontSize': '11px',\n            'fontFamily': '\"Lucida Grande\", sans-serif'\n          }\n        },\n        arrow: {\n          style: {\n            fill: '#696969'\n          }\n        },\n        attrs: {\n          'radius': 2,\n          'width': 50,\n          'height': 22,\n          'margin': {\n            right: 3\n          }\n        }\n      };\n\n      var defaultStyle = {\n        label: {\n          container: {\n            height: 22,\n            style: {\n\n            }\n          },\n          text: {\n            style: {\n              'font-size': 13,\n              'font-family': '\"Lucida Grande\", sans-serif',\n              'font-weight': 'normal',\n              'fill': '#4b4b4b'\n            }\n          }\n        },\n        timeMulSelectMenu: {\n          container: selectConf.container,\n          text: selectConf.text,\n          arrow: selectConf.arrow,\n          attrs: {\n            'radius': 2,\n            'width': 50,\n            'height': 22,\n            'margin': {\n              right: 3\n            }\n          },\n          eventListeners: [{\n            type: 'change',\n            cb: onChange\n          }]\n        },\n        timePeriodSelectMenu: {\n          container: selectConf.container,\n          text: selectConf.text,\n          arrow: selectConf.arrow,\n          attrs: {\n            'radius': 2,\n            'width': 90,\n            'height': 22,\n            'margin': {\n              right: 8\n            }\n          },\n          eventListeners: [{\n            type: 'change',\n            cb: function () {\n              timePeriodOnChange();\n              onChange();\n            }\n          }]\n        },\n        aggMethodSelectMenu: {\n          container: selectConf.container,\n          text: selectConf.text,\n          arrow: selectConf.arrow,\n          attrs: {\n            'radius': 2,\n            'width': 100,\n            'height': 22,\n            margin: {\n              right: 11\n            }\n          },\n          eventListeners: [{\n            type: 'change',\n            cb: onChange\n          }]\n        },\n        dropDown: {\n          container: {\n            style: {\n              background: '#fff',\n              'border-color': '#898b8b',\n              'border-radius': '1px',\n              'border-style': 'solid',\n              'border-width': '2px',\n              'font-size': '11px',\n              'font-family': '\"Lucida Grande\", sans-serif'\n            }\n          },\n          listItem: {\n            style: {\n            },\n            states: {\n              hover: {\n                className: undefined,\n                style: {\n                  'background': '#e6e8e8',\n                  'color': '#696969',\n                  'cursor': 'pointer'\n                }\n              },\n              selected: {\n                className: undefined,\n                style: {\n                  'background': '#898b8b',\n                  'color': '#fff'\n                }\n              }\n            }\n          }\n        },\n        applyButton: {\n          container: {\n            style: {\n              'fill': '#555',\n              'stroke': '#ced5d4',\n              'stroke-width': 0\n            },\n            states: {\n              disabled: {\n                'fill': '#bebebe',\n                'stroke-width': 0,\n                'stroke': '#ced5d4'\n              }\n            }\n          },\n          text: {\n            style: {\n              'fill': '#f3f3f3',\n              'fontSize': '11px',\n              'fontFamily': '\"Lucida Grande\", sans-serif'\n            },\n            states: {\n              hover: {\n                'fill': '#555',\n                'stroke-width': 0,\n                'stroke': ''\n              },\n              disabled: {\n                'fill': '#f3f3f3'\n              }\n            }\n          },\n          attrs: {\n            'radius': 1,\n            'width': 54,\n            'height': 22,\n            margin: {\n              right: 3\n            },\n            label: 'APPLY'\n          },\n          eventListeners: [{\n            type: 'click',\n            cb: function () {\n              self.apply(1);\n            }\n          }]\n        },\n        resetButton: {\n          container: {\n            style: {\n              'fill': '#898b8b',\n              'stroke': '#ced5d4',\n              'strokeWidth': 0\n            },\n            states: {\n              hover: {\n                cursor: 'pointer'\n              },\n              disabled: {\n                'fill': '#bebebe',\n                'stroke-width': 0,\n                'stroke': '#ced5d4',\n                cursor: 'default'\n              }\n            }\n          },\n          text: {\n            style: {\n              fill: '#f3f3f3',\n              'fontSize': '11px',\n              'fontFamily': '\"Lucida Grande\", sans-serif'\n            },\n            states: {\n              disabled: {\n                fill: '#f3f3f3'\n              }\n            }\n          },\n          attrs: {\n            'radius': 1,\n            'shadow': {\n              'fill': '#000',\n              'opacity': 0.35\n            },\n            'width': 54,\n            'height': 22,\n            margin: {\n              right: 3\n            },\n            label: 'RESET'\n          },\n          eventListeners: [{\n            type: 'click',\n            cb: function () {\n              self.apply(0);\n            }\n          }]\n        }\n      };\n\n      style = defaultStyle;\n\n      if (usrConfig.styles) {\n        mergeRecursively(usrConfig.styles, defaultStyle, this.tsObject.lib);\n        style = usrConfig.styles;\n      }\n\n      label = new toolbox.Label('Aggregate Data:', dependencies, style.label);\n\n      label.setConfig({\n        className: style.label.className\n      });\n\n      applyClassName(label.getIndividualClassNames(label.getClassName()), 'label');\n\n      var parentGroup = tsObject.parentGroup;\n      var count = 0;\n\n      function applyClassName (obj, prop, state) {\n        var _style;\n        for (var key in obj) {\n          if (style[prop][key]) {\n            if (state && style[prop][key].states && style[prop][key].states[state]) {\n              _style = style[prop][key].states[state];\n            } else {\n              _style = style[prop][key].style;\n            }\n          }\n          _style && paper.cssAddRule('.' + obj[key], _style);\n        }\n      }\n\n      function factory (prop, cb, options) {\n        var sm = toolboxCompConfig[prop] = cb(options)\n        .setConfig(style[prop].attrs);\n\n        sm.setParentGroup(parentGroup);\n        sm.setConfig({\n          className: style[prop].className\n        });\n\n        sm.namespace('fusioncharts');\n        sm.appendSelector('ext1-' + (count++));\n\n        applyClassName(sm.getIndividualClassNames(sm.getClassName()), prop);\n        var classNames = sm.config.states;\n        for (var key in classNames) {\n          applyClassName(sm.getIndividualClassNames(classNames[key]), prop, key);\n        }\n\n        var dm = sm.config.dropDownMenu;\n        for (var components in dm) {\n          var component = dm[components];\n          switch (components) {\n            case 'container':\n              paper.cssAddRule('.' + component.className, style.dropDown.container.style);\n              break;\n            case 'listItem':\n              paper.cssAddRule('.' + component.className, style.dropDown.listItem.style);\n              var states = component.states;\n              for (var state in states) {\n                paper.cssAddRule('.' + states[state], style.dropDown.listItem.states[state].style);\n              }\n              break;\n          }\n        }\n\n        var eventListeners = style[prop].eventListeners;\n        for (var i = 0, len = eventListeners.length; i < len; i += 1) {\n          var event = eventListeners[i];\n          var obj = {};\n          obj[event.type] = event.cb;\n          sm.attachEventHandlers(obj);\n        }\n        return sm;\n      }\n\n      function createSelectButton (prop) {\n        return factory(prop, d3.selectButton, []);\n      }\n\n      function createButton (prop) {\n        return factory(prop, d3.button, style[prop].attrs.label);\n      }\n\n      labelGroup.addSymbol(label);\n\n      timeMulSelectMenu = createSelectButton('timeMulSelectMenu');\n      timePeriodSelectMenu = createSelectButton('timePeriodSelectMenu');\n      aggMethodSelectMenu = createSelectButton('aggMethodSelectMenu');\n\n      applyButton = createButton('applyButton');\n      resetButton = createButton('resetButton');\n\n      selectMenuGroup.addSymbol(timeMulSelectMenu);\n      selectMenuGroup.addSymbol(timePeriodSelectMenu);\n      selectMenuGroup.addSymbol(aggMethodSelectMenu);\n      buttonGroup.addSymbol(applyButton);\n      buttonGroup.addSymbol(resetButton);\n\n      toolbar.addComponent(labelGroup);\n      toolbar.addComponent(selectMenuGroup);\n      toolbar.addComponent(buttonGroup);\n      return toolbar;\n    }\n\n    getLogicalSpace (availableWidth, availableHeight) {\n      var logicalSpace,\n        width = 0,\n        height = 0,\n        i,\n        ln;\n\n      for (i = 0, ln = this.toolbars.length; i < ln; i++) {\n        logicalSpace = this.toolbars[i].getLogicalSpace(availableWidth, availableHeight);\n        width = Math.max(logicalSpace.width, width);\n        height += logicalSpace.height;\n        this.toolbars[i].width = logicalSpace.width;\n        this.toolbars[i].height = logicalSpace.height;\n      }\n      height += this.padding;\n      return {\n        width: width,\n        height: height\n      };\n    }\n\n    placeInCanvas (containerInstance) {\n      var self = this,\n        tsObject = self.tsObject,\n        usrConfig = self.config.usrConfig;\n\n      self.padding = 5;\n      tsObject.spaceManagerInstance.add([{\n        name: function () {\n          return 'data-aggregator';\n        },\n        ref: function (obj) {\n          return obj['0'];\n        },\n        self: function () {\n          return self;\n        },\n        priority: function () {\n          return 2;\n        },\n        layout: function (obj) {\n          return obj[usrConfig.layout || 'inline'];\n        },\n        orientation: [{\n          type: function (obj) {\n            return obj[usrConfig.orientation || 'horizontal'];\n          },\n          position: [{\n            type: function (obj) {\n              return obj[usrConfig.position || 'bottom'];\n            },\n            alignment: [{\n              type: function (obj) {\n                return obj[usrConfig.alignment || 'right'];\n              },\n              dimensions: [function () {\n                var parent = this.getParentComponentGroup();\n                return self.getLogicalSpace(parent.getWidth(), parent.getHeight());\n              }]\n            }]\n          }]\n        }]\n      }]);\n    }\n\n    setDrawingConfiguration (x, y, width, height, group) {\n      var mes = this.measurement;\n      mes.x = x;\n      mes.y = y;\n      mes.width = width;\n      mes.height = height;\n\n      this.parentGroup = group;\n\n      return this;\n    }\n\n    /**\n     * Apply or Reset Aggregation applied through extension in timeseries\n     * @param {number} set - Flag to set or reset. '1' to set, '0' to reset\n     * @private\n     */\n    apply (set) {\n      var self = this,\n        config = self.config,\n        toolboxCompConfig = config.toolboxComponent.config,\n        timePeriodSelectMenu = toolboxCompConfig.timePeriodSelectMenu,\n        timeMulSelectMenu = toolboxCompConfig.timeMulSelectMenu,\n        aggMethodSelectMenu = toolboxCompConfig.aggMethodSelectMenu,\n        applyButton = toolboxCompConfig.applyButton,\n        resetButton = toolboxCompConfig.resetButton,\n\n        aggregate = self.tsObject.extData.aggregate || {},\n        validTimePeriod,\n        validTimePeriodMultiplier,\n        avlAggMethods,\n\n        indexOfTimeUnit,\n        validTimeBin,\n        validMethod,\n\n        model = config.composition.reactiveModel,\n        timePeriodVal,\n        timePeriodMultiplierVal,\n        aggMethod,\n        keys,\n        binSize,\n        timeInterval,\n        aggregation = self.aggregation,\n        canvas = config.composition.impl;\n\n      if (set) {\n        if (!config.drawn) {\n          timePeriodVal = aggregate.timeUnit && aggregate.timeUnit.toString().toLowerCase();\n          timePeriodMultiplierVal = aggregate.timeMultiplier;\n          aggMethod = aggregate.method && aggregate.method.toString();\n\n          self.getValidAggregation();\n          validTimePeriod = config.validTimePeriod;\n          validTimePeriodMultiplier = config.validTimePeriodMultiplier;\n          avlAggMethods = config.avlAggMethods;\n\n          if (validTimePeriod.includes(timePeriodVal)) {\n            indexOfTimeUnit = validTimePeriod.indexOf(timePeriodVal);\n            if (!validTimePeriodMultiplier[indexOfTimeUnit].includes(Number(timePeriodMultiplierVal))) {\n              timePeriodMultiplierVal = validTimePeriodMultiplier[indexOfTimeUnit][0];\n            }\n            validTimeBin = true;\n          }\n\n          if (avlAggMethods[aggMethod]) {\n            validMethod = true;\n          }\n\n          if (validTimeBin || validMethod) {\n            if (validTimeBin) {\n              for (keys of config.avlTimePeriods) {\n                if (keys.name === timePeriodVal) {\n                  timeInterval = keys.interval;\n                  break;\n                }\n              }\n              binSize = timeInterval * Number(timePeriodMultiplierVal);\n              model\n                .lock()\n                .prop('bin-size-ext', binSize)\n                .unlock();\n              aggregation.binSize = binSize;\n            }\n\n            if (validMethod) {\n              model\n                .lock()\n                .prop('aggregation-fn-ext', config.avlAggMethods[aggMethod])\n                .unlock();\n              aggregation.aggregationMethod = aggMethod;\n            }\n            applyButton.setState('disabled');\n            resetButton.removeState('disabled');\n          }\n        } else {\n          timePeriodVal = timePeriodSelectMenu.value();\n          timePeriodMultiplierVal = timeMulSelectMenu.value();\n          aggMethod = aggMethodSelectMenu.value();\n\n          for (keys of config.avlTimePeriods) {\n            if (keys.name === timePeriodVal) {\n              timeInterval = keys.interval;\n              break;\n            }\n          }\n          binSize = timeInterval * Number(timePeriodMultiplierVal);\n          model\n            .lock()\n            .prop('bin-size-ext', binSize)\n            .prop('aggregation-fn-ext', config.avlAggMethods[aggMethod])\n            .unlock();\n          aggregation.binSize = binSize;\n          aggregation.aggregationMethod = aggMethod;\n          applyButton.setState('disabled');\n          resetButton.removeState('disabled');\n        }\n      } else {\n        canvas.resetAggregation();\n        aggregation.binSize = null;\n        aggregation.aggregationMethod = null;\n        resetButton.setState('disabled');\n      }\n    }\n\n    /**\n     * Compute and populate toolboxes with valid values on change in range of visual window\n     * @private\n     */\n    rangeOnChange () {\n      var self = this,\n        config = self.config,\n        toolboxCompConfig = config.toolboxComponent.config,\n        timePeriodSelectMenu = toolboxCompConfig.timePeriodSelectMenu,\n        timeMulSelectMenu = toolboxCompConfig.timeMulSelectMenu,\n        aggMethodSelectMenu = toolboxCompConfig.aggMethodSelectMenu,\n        applyButton = toolboxCompConfig.applyButton,\n        resetButton = toolboxCompConfig.resetButton,\n        model = config.composition.reactiveModel,\n\n        timePeriodVal,\n        timePeriodSelectMenuOpt,\n        validTimePeriod,\n        indexOfTimeUnit,\n\n        multiplierVal,\n        timeMulSelectMenuOpt,\n        validTimePeriodMultiplier,\n\n        aggVal,\n        aggMethodSelectMenuOpt,\n        avlAggMethods,\n\n        aggregation = self.aggregation,\n        currentAggregationObj,\n        timePeriod,\n        timePeriodMultiplier,\n        aggregationMethod;\n\n      self.getValidAggregation();\n      currentAggregationObj = self.getCurrentAggreation();\n      timePeriod = currentAggregationObj.timePeriod;\n      timePeriodMultiplier = currentAggregationObj.timePeriodMultiplier;\n      aggregationMethod = currentAggregationObj.aggregationMethod;\n\n      timePeriodSelectMenuOpt = [];\n      timeMulSelectMenuOpt = [];\n      aggMethodSelectMenuOpt = [];\n\n      validTimePeriod = config.validTimePeriod;\n      validTimePeriodMultiplier = config.validTimePeriodMultiplier;\n      avlAggMethods = config.avlAggMethods;\n\n      applyButton.setState('disabled');\n\n      if (aggregation.binSize !== model.prop('bin-size') &&\n        (aggregationMethod.value === config.defaultAggMethod || !aggregationMethod.value)) {\n        aggregation.binSize = null;\n        aggregation.aggregationMethod = null;\n        resetButton.setState('disabled');\n      } else {\n        resetButton.removeState('disabled');\n      }\n\n      for (timePeriodVal of validTimePeriod) {\n        timePeriodSelectMenuOpt.push({\n          name: capitalize(timePeriodVal),\n          value: timePeriodVal\n        });\n      }\n      timePeriodSelectMenu.updateList(timePeriodSelectMenuOpt);\n      timePeriod ? timePeriodSelectMenu.value(timePeriod) : timePeriodSelectMenu.setPlaceHolderValue('');\n\n      indexOfTimeUnit = validTimePeriod.indexOf(timePeriod);\n\n      if (indexOfTimeUnit >= 0) {\n        for (multiplierVal of validTimePeriodMultiplier[indexOfTimeUnit]) {\n          timeMulSelectMenuOpt.push({\n            name: multiplierVal.toString(),\n            value: multiplierVal.toString()\n          });\n        }\n      }\n\n      timeMulSelectMenu.updateList(timeMulSelectMenuOpt);\n      timePeriodMultiplier ? timeMulSelectMenu.value(timePeriodMultiplier.toString())\n        : timeMulSelectMenu.setPlaceHolderValue('');\n\n      for (aggVal in avlAggMethods) {\n        aggMethodSelectMenuOpt.push({\n          name: capitalize(avlAggMethods[aggVal].formalName),\n          value: avlAggMethods[aggVal].nickName\n        });\n      }\n\n      aggMethodSelectMenu.updateList(aggMethodSelectMenuOpt);\n      aggregationMethod.value ? aggMethodSelectMenu.value(aggregationMethod.value)\n        : aggMethodSelectMenu.setPlaceHolderValue('');\n      config.execute = true;\n    }\n\n    draw (x, y, width, height, group) {\n      var self = this,\n        config = self.config,\n        measurement = self.measurement,\n        toolbars = self.toolbars,\n        ln,\n        i,\n        toolbar,\n        dataAgg = config.dataAgg;\n\n      self.getAvailablelAggreagation();\n\n      x = x === undefined ? measurement.x : x;\n      y = y === undefined ? measurement.y : y;\n      width = width === undefined ? measurement.width : width;\n      height = height === undefined ? measurement.height : height;\n      group = group === undefined ? self.parentGroup : group;\n      if (width && height) {\n        for (i = 0, ln = toolbars.length; i < ln; i++) {\n          toolbar = toolbars[i];\n          toolbar.draw(x, y, group);\n        }\n\n        config.defaultAggMethod = dataAgg.getDefaultAggregationMethod().nickName;\n        !config.drawn && self.apply(1);\n        self.rangeOnChange();\n        config.drawn = true;\n      }\n    }\n\n    dispose () {\n      // dispose extension\n    }\n  }\n  return Aggregator;\n};\n\n\n\n// WEBPACK FOOTER //\n// ./src/data-aggregator-ext.js"],"sourceRoot":""}