!function(e){function i(n){if(t[n])return t[n].exports;var r=t[n]={exports:{},id:n,loaded:!1};return e[n].call(r.exports,r,r.exports,i),r.loaded=!0,r.exports}var t={};return i.m=e,i.c=t,i.p="",i(0)}([function(e,i,t){"use strict";var n=t(1);!function(e){e(FusionCharts)}(function(e){e.register("extension",["data-aggregator",function(e){var i=this,t=i.extAPI;console.log(e),window.Aggregator=new n,t(window.Aggregator)}])})},function(e,i){(function(i){"use strict";function t(e,i){if(!(e instanceof i))throw new TypeError("Cannot call a class as a function")}var n=function(){function e(e,i){for(var t=0;t<i.length;t++){var n=i[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(i,t,n){return t&&e(i.prototype,t),n&&e(i,n),i}}(),r=function(){function e(){t(this,e),this.appliedAggregation={timePeriod:null,timePeriodMultiplier:1,aggregationMethod:null},this.config={}}return n(e,[{key:"getTimeMultiplier",value:function(){}},{key:"getAvailablelAggreagation",value:function(){var e,t,n,r,o=this.config,a=i.x,l=i.chart;e=l.getAvailableAggregationMethod(),t=t=l.getAvailableTimePeriod(),n=a.getCurrentVisibleRange(),r=n.endDate-n.startDate,o.avlTimePeriods=t,o.avlAggMethods=e,o.currentTimeLength=r}},{key:"getValidTimeMultiplier",value:function(){var e,t,n,r,o,a=this.config,l=i.x,g=l.max-l.min,u=a.avlTimePeriods,c=function(e){return Array.from({length:e},function(e,i){return i+1})};for(a.avlTimeMultiplier=[],t=u.length,e=0;e<t;e++)n=u[e],r=u[e+1],o=r?r[Object.keys(r)[0]]/n[Object.keys(n)[0]]:g/n[Object.keys(n)[0]],a.avlTimeMultiplier.push(c(o))}},{key:"getValidAggregation",value:function(){var e,t,n,r,o,a,l,g,u,c,s,d,f,h,v=i.chart.config,m=this.config,p=v.minNumOfPlot,A=v.minPlotWidth,P=v.canvasWidth,T=function(e){return Array.from({length:e},function(e,i){return i+1})};for(o=m.avlTimePeriods,a=m.avlTimeMultiplier,l=m.currentTimeLength,m.minTime=f=l/P*A,m.maxTime=h=l/p,m.validTimePeriod=[],m.validTimePeriodMultiplier=[],e=0,n=o.length;e<n;e++){for(g=Object.keys(o[e])[0],u=o[e][Object.keys(o[e])[0]],d=0,t=0,r=a[e].length;t<r;t++)s=a[e][t],c=s*u,c>=f&&c<=h&&d++;d&&(m.validTimePeriodMultiplier.push(T(d)),m.validTimePeriod.push(g))}console.log(m.validTimePeriod,m.validTimePeriodMultiplier,m.avlAggMethods)}},{key:"setAggregation",value:function(e){var i,t,n,r,o=this.config;return this.getValidAggregation(),i=o.avlAggMethods,t=o.validTimePeriod,r=o.validTimePeriodMultiplier,i.includes(e.aggregationMethod)&&t.includes(e.timePeriod)?(n=t.indexOf(e.timePeriod),r[n].includes(e.timePeriodMultiplier)?(this.aggregation=e,console.log(this.aggregation,!0),!0):(console.log(this.aggregation,!1),!1)):(console.log(this.aggregation,!1),!1)}},{key:"resetAggregation",value:function(){}},{key:"init",value:function(e){e("X-Axis","chart",function(e,t){i.x=e,i.chart=t}),this.getAvailablelAggreagation(),this.getValidTimeMultiplier()}},{key:"placeInCanvas",value:function(){}},{key:"draw",value:function(){}},{key:"dispose",value:function(){}},{key:"aggregation",get:function(){return this.appliedAggregation},set:function(e){this.appliedAggregation.timePeriod=e.timePeriod,this.appliedAggregation.timePeriodMultiplier=e.timePeriodMultiplier,this.appliedAggregation.aggregationMethod=e.aggregationMethod}}]),e}();e.exports=r}).call(i,function(){return this}())}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vZmN0cy1leHQtZGF0YWFnZ3JlZ2F0b3ItZXM1Lm1pbi5qcyIsIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAgNmQ5MzA4Y2QwZTA1NmVmNDQ2M2MiLCJ3ZWJwYWNrOi8vLy4vc3JjL2luZGV4LmpzIiwid2VicGFjazovLy8uL3NyYy9mY3RzLWV4dC1hZ2dyZWdhdG9yLmpzIl0sIm5hbWVzIjpbIm1vZHVsZXMiLCJfX3dlYnBhY2tfcmVxdWlyZV9fIiwibW9kdWxlSWQiLCJpbnN0YWxsZWRNb2R1bGVzIiwiZXhwb3J0cyIsIm1vZHVsZSIsImlkIiwibG9hZGVkIiwiY2FsbCIsIm0iLCJjIiwicCIsIkFnZ3JlZ2F0b3IiLCJmYWN0b3J5IiwiRnVzaW9uQ2hhcnRzIiwiRkMiLCJyZWdpc3RlciIsImdsb2JhbCIsInRoaXMiLCJleHRBUEkiLCJjb25zb2xlIiwibG9nIiwid2luZG93IiwiX2NsYXNzQ2FsbENoZWNrIiwiaW5zdGFuY2UiLCJDb25zdHJ1Y3RvciIsIlR5cGVFcnJvciIsIl9jcmVhdGVDbGFzcyIsImRlZmluZVByb3BlcnRpZXMiLCJ0YXJnZXQiLCJwcm9wcyIsImkiLCJsZW5ndGgiLCJkZXNjcmlwdG9yIiwiZW51bWVyYWJsZSIsImNvbmZpZ3VyYWJsZSIsIndyaXRhYmxlIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJrZXkiLCJwcm90b1Byb3BzIiwic3RhdGljUHJvcHMiLCJwcm90b3R5cGUiLCJhcHBsaWVkQWdncmVnYXRpb24iLCJ0aW1lUGVyaW9kIiwidGltZVBlcmlvZE11bHRpcGxpZXIiLCJhZ2dyZWdhdGlvbk1ldGhvZCIsImNvbmZpZyIsInZhbHVlIiwiYXZsQWdnTWV0aG9kcyIsImF2bFRpbWVQZXJpb2RzIiwiY3VycmVudFZpc2libGVSYW5nZSIsImN1cnJlbnRUaW1lTGVuZ3RoIiwieEF4aXMiLCJ4IiwiY2hhcnQiLCJnZXRBdmFpbGFibGVBZ2dyZWdhdGlvbk1ldGhvZCIsImdldEF2YWlsYWJsZVRpbWVQZXJpb2QiLCJnZXRDdXJyZW50VmlzaWJsZVJhbmdlIiwiZW5kRGF0ZSIsInN0YXJ0RGF0ZSIsImxlbiIsImN1cnJUaW1lUGVyaW9kIiwibmV4dFRpbWVQZXJpb2QiLCJudW1PZk11bHRpcGxpZXIiLCJtYXgiLCJtaW4iLCJnZXRNdWx0aXBsaWVyQXJyYXkiLCJudW0iLCJBcnJheSIsImZyb20iLCJ2IiwiayIsImF2bFRpbWVNdWx0aXBsaWVyIiwia2V5cyIsInB1c2giLCJqIiwibGVuMSIsImxlbjIiLCJ0aW1lIiwiZXhwZWN0ZWRUaW1lIiwibXVsdGlwbGllciIsIm11bHRpcGxpZXJDb3VudGVyIiwibWluVGltZSIsIm1heFRpbWUiLCJjaGFydENvbmZpZyIsIm1pbk51bU9mUGxvdCIsIm1pblBsb3RXaWR0aCIsImNhbnZhc1dpZHRoIiwidmFsaWRUaW1lUGVyaW9kIiwidmFsaWRUaW1lUGVyaW9kTXVsdGlwbGllciIsIm9iaiIsInRpbWVQZXJpb2RJbmRleCIsImdldFZhbGlkQWdncmVnYXRpb24iLCJpbmNsdWRlcyIsImluZGV4T2YiLCJhZ2dyZWdhdGlvbiIsInJlcXVpcmUiLCJnZXRBdmFpbGFibGVsQWdncmVhZ2F0aW9uIiwiZ2V0VmFsaWRUaW1lTXVsdGlwbGllciIsImdldCIsInNldCJdLCJtYXBwaW5ncyI6IkNBQVMsU0FBVUEsR0NJbkIsUUFBQUMsR0FBQUMsR0FHQSxHQUFBQyxFQUFBRCxHQUNBLE1BQUFDLEdBQUFELEdBQUFFLE9BR0EsSUFBQUMsR0FBQUYsRUFBQUQsSUFDQUUsV0FDQUUsR0FBQUosRUFDQUssUUFBQSxFQVVBLE9BTkFQLEdBQUFFLEdBQUFNLEtBQUFILEVBQUFELFFBQUFDLElBQUFELFFBQUFILEdBR0FJLEVBQUFFLFFBQUEsRUFHQUYsRUFBQUQsUUF2QkEsR0FBQUQsS0FxQ0EsT0FUQUYsR0FBQVEsRUFBQVQsRUFHQUMsRUFBQVMsRUFBQVAsRUFHQUYsRUFBQVUsRUFBQSxHQUdBVixFQUFBLEtETU0sU0FBU0ksRUFBUUQsRUFBU0gsR0U1Q2hDLFlBQ0EsSUFB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MkMsRUFBZ0JLLFNBQVNILEVBQUkvQyxhQUNoRmdELEVBQWtCSCxFQUFnQk0sUUFBUUosRUFBSS9DLFlBQzFDOEMsRUFBMEJFLEdBQWlCRSxTQUFTSCxFQUFJOUMsdUJBQzFEM0IsS0FBSzhFLFlBQWNMLEVBQ25CdkUsUUFBUUMsSUFBSUgsS0FBSzhFLGFBQWEsSUFDdkIsSUFFUDVFLFFBQVFDLElBQUlILEtBQUs4RSxhQUFhLElBQ3ZCLEtBR1Q1RSxRQUFRQyxJQUFJSCxLQUFLOEUsYUFBYSxJQUN2QixNSDJGUnpELElBQUssbUJBQ0xTLE1BQU8sZUFFUFQsSUFBSyxPQUNMUyxNQUFPLFNHcEZKaUQsR0FDSkEsRUFBUSxTQUFVLFFBQVMsU0FBVTNDLEVBQUdDLEdBQ3RDdEMsRUFBT3FDLEVBQUlBLEVBQ1hyQyxFQUFPc0MsTUFBUUEsSUFHakJyQyxLQUFLZ0YsNEJBQ0xoRixLQUFLaUYsNEJId0ZKNUQsSUFBSyxnQkFDTFMsTUFBTyxlQUlQVCxJQUFLLE9BQ0xTLE1BQU8sZUFJUFQsSUFBSyxVQUNMUyxNQUFPLGVBSVBULElBQUssY0FDTDZELElBQUssV0cxUU4sTUFBT2xGLE1BQUt5QixvQkg2UVgwRCxJQUFLLFNHMVFTVixHQUNmekUsS0FBS3lCLG1CQUFtQkMsV0FBYStDLEVBQUkvQyxXQUN6QzFCLEtBQUt5QixtQkFBbUJFLHFCQUF1QjhDLEVBQUk5QyxxQkFDbkQzQixLQUFLeUIsbUJBQW1CRyxrQkFBb0I2QyxFQUFJN0Msc0JIOFExQ2xDLElHakdWUCxHQUFPRCxRQUFVUSxJSHFHYUosS0FBS0osRUFBVSxXQUFhLE1BQU9jIiwiZmlsZSI6ImZjdHMtZXh0LWRhdGFhZ2dyZWdhdG9yLWVzNS5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyIvKioqKioqLyAoZnVuY3Rpb24obW9kdWxlcykgeyAvLyB3ZWJwYWNrQm9vdHN0cmFwXG4vKioqKioqLyBcdC8vIFRoZSBtb2R1bGUgY2FjaGVcbi8qKioqKiovIFx0dmFyIGluc3RhbGxlZE1vZHVsZXMgPSB7fTtcbi8qKioqKiovXG4vKioqKioqLyBcdC8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG4vKioqKioqLyBcdGZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcbi8qKioqKiovXG4vKioqKioqLyBcdFx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG4vKioqKioqLyBcdFx0aWYoaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0pXG4vKioqKioqLyBcdFx0XHRyZXR1cm4gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0uZXhwb3J0cztcbi8qKioqKiovXG4vKioqKioqLyBcdFx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcbi8qKioqKiovIFx0XHR2YXIgbW9kdWxlID0gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0gPSB7XG4vKioqKioqLyBcdFx0XHRleHBvcnRzOiB7fSxcbi8qKioqKiovIFx0XHRcdGlkOiBtb2R1bGVJZCxcbi8qKioqKiovIFx0XHRcdGxvYWRlZDogZmFsc2Vcbi8qKioqKiovIFx0XHR9O1xuLyoqKioqKi9cbi8qKioqKiovIFx0XHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cbi8qKioqKiovIFx0XHRtb2R1bGVzW21vZHVsZUlkXS5jYWxsKG1vZHVsZS5leHBvcnRzLCBtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcbi8qKioqKiovXG4vKioqKioqLyBcdFx0Ly8gRmxhZyB0aGUgbW9kdWxlIGFzIGxvYWRlZFxuLyoqKioqKi8gXHRcdG1vZHVsZS5sb2FkZWQgPSB0cnVlO1xuLyoqKioqKi9cbi8qKioqKiovIFx0XHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuLyoqKioqKi8gXHRcdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbi8qKioqKiovIFx0fVxuLyoqKioqKi9cbi8qKioqKiovXG4vKioqKioqLyBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlcyBvYmplY3QgKF9fd2VicGFja19tb2R1bGVzX18pXG4vKioqKioqLyBcdF9fd2VicGFja19yZXF1aXJlX18ubSA9IG1vZHVsZXM7XG4vKioqKioqL1xuLyoqKioqKi8gXHQvLyBleHBvc2UgdGhlIG1vZHVsZSBjYWNoZVxuLyoqKioqKi8gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmMgPSBpbnN0YWxsZWRNb2R1bGVzO1xuLyoqKioqKi9cbi8qKioqKiovIFx0Ly8gX193ZWJwYWNrX3B1YmxpY19wYXRoX19cbi8qKioqKiovIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5wID0gXCJcIjtcbi8qKioqKiovXG4vKioqKioqLyBcdC8vIExvYWQgZW50cnkgbW9kdWxlIGFuZCByZXR1cm4gZXhwb3J0c1xuLyoqKioqKi8gXHRyZXR1cm4gX193ZWJwYWNrX3JlcXVpcmVfXygwKTtcbi8qKioqKiovIH0pXG4vKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xuLyoqKioqKi8gKFtcbi8qIDAgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdHZhciBBZ2dyZWdhdG9yID0gX193ZWJwYWNrX3JlcXVpcmVfXygxKTtcblx0XG5cdDsoZnVuY3Rpb24gKGZhY3RvcnkpIHtcblx0ICBmYWN0b3J5KEZ1c2lvbkNoYXJ0cyk7XG5cdH0pKGZ1bmN0aW9uIChGQykge1xuXHQgIEZDLnJlZ2lzdGVyKCdleHRlbnNpb24nLCBbJ2RhdGEtYWdncmVnYXRvcicsIGZ1bmN0aW9uIChpZCkge1xuXHQgICAgdmFyIGdsb2JhbCA9IHRoaXM7XG5cdCAgICB2YXIgZXh0QVBJID0gZ2xvYmFsLmV4dEFQSTtcblx0ICAgIGNvbnNvbGUubG9nKGlkKTtcblx0XG5cdCAgICAvLyB2YXIgb3RoZXJBUEkgPSBGdXNpb25DaGFydHMuZ2V0RXh0Q29tcG9uZW50KGlkLCAnYXBpJywgJ2xlZ2FjeWV4dGFwaScpO1xuXHQgICAgLy8gdmFyIHRvb2xCb3hBcGkgPSBGdXNpb25DaGFydHMuZ2V0Q29tcG9uZW50KCdhcGknLCAndG9vbGJveCcpO1xuXHRcblx0ICAgIHdpbmRvdy5BZ2dyZWdhdG9yID0gbmV3IEFnZ3JlZ2F0b3IoKTtcblx0XG5cdCAgICBleHRBUEkod2luZG93LkFnZ3JlZ2F0b3IpO1xuXHQgIH1dKTtcblx0fSk7XG5cbi8qKiovIH0sXG4vKiAxICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHtcblxuXHQvKiBXRUJQQUNLIFZBUiBJTkpFQ1RJT04gKi8oZnVuY3Rpb24oZ2xvYmFsKSB7J3VzZSBzdHJpY3QnO1xuXHQvKipcblx0ICogQ2xhc3MgcmVwcmVzZW50aW5nIHRoZSBEYXRhIEFnZ3JlZ2F0b3IuXG5cdCAqL1xuXHRcblx0dmFyIF9jcmVhdGVDbGFzcyA9IGZ1bmN0aW9uICgpIHsgZnVuY3Rpb24gZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIHByb3BzKSB7IGZvciAodmFyIGkgPSAwOyBpIDwgcHJvcHMubGVuZ3RoOyBpKyspIHsgdmFyIGRlc2NyaXB0b3IgPSBwcm9wc1tpXTsgZGVzY3JpcHRvci5lbnVtZXJhYmxlID0gZGVzY3JpcHRvci5lbnVtZXJhYmxlIHx8IGZhbHNlOyBkZXNjcmlwdG9yLmNvbmZpZ3VyYWJsZSA9IHRydWU7IGlmIChcInZhbHVlXCIgaW4gZGVzY3JpcHRvcikgZGVzY3JpcHRvci53cml0YWJsZSA9IHRydWU7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGRlc2NyaXB0b3Iua2V5LCBkZXNjcmlwdG9yKTsgfSB9IHJldHVybiBmdW5jdGlvbiAoQ29uc3RydWN0b3IsIHByb3RvUHJvcHMsIHN0YXRpY1Byb3BzKSB7IGlmIChwcm90b1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLnByb3RvdHlwZSwgcHJvdG9Qcm9wcyk7IGlmIChzdGF0aWNQcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvciwgc3RhdGljUHJvcHMpOyByZXR1cm4gQ29uc3RydWN0b3I7IH07IH0oKTtcblx0XG5cdGZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHsgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKTsgfSB9XG5cdFxuXHR2YXIgQWdncmVnYXRvciA9IGZ1bmN0aW9uICgpIHtcblx0ICAvKipcblx0ICAgKiBDcmVhdGUgYSBBZ2dyZWdhdG9yLlxuXHQgICAqIEB0eXBlZGVmIHtvYmplY3R9IEFnZ3JlZ2F0b3IuYWdncmVnYXRpb25cblx0ICAgKiBAcHJvcGVydHkge3N0cmluZ30gdGltZVBlcmlvZCAtIFRoZSB0aW1lIGludGVydmFsIG9mIGFnZ3JlZ2F0aW9uLlxuXHQgICAqIEBwcm9wZXJ0eSB7bnVtYmVyfSB0aW1lUGVyaW9kTXVsdGlwbGllciAtIFRoZSBtdWx0aXBsaWVyIG9mIHRpbWUgaW50ZXJ2YWwuXG5cdCAgICogQHByb3BlcnR5IHtzdHJpbmd9IGFnZ3JlZ2F0aW9uTWV0aG9kIC0gVGhlIG1ldGhvZCBhcHBsaWVkIHRvIGFnZ3JlZ2F0ZS5cblx0ICAgKi9cblx0ICBmdW5jdGlvbiBBZ2dyZWdhdG9yKCkge1xuXHQgICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIEFnZ3JlZ2F0b3IpO1xuXHRcblx0ICAgIC8qKlxuXHQgICAgICogQHByaXZhdGVcblx0ICAgICAqL1xuXHQgICAgdGhpcy5hcHBsaWVkQWdncmVnYXRpb24gPSB7XG5cdCAgICAgIHRpbWVQZXJpb2Q6IG51bGwsXG5cdCAgICAgIHRpbWVQZXJpb2RNdWx0aXBsaWVyOiAxLFxuXHQgICAgICBhZ2dyZWdhdGlvbk1ldGhvZDogbnVsbFxuXHQgICAgfTtcblx0ICAgIHRoaXMuY29uZmlnID0ge307XG5cdCAgfVxuXHRcblx0ICAvKipcblx0ICAgKiBBbiBvYmplY3QgcmVwcmVzZW50aW5nIHRoZSB0aW1lUGVyaW9kLCB0aW1lUGVyaW9kTXVsdGlwbGllciwgYWdncmVnYXRpb25NZXRob2QuXG5cdCAgICogQHR5cGUge0FnZ3JlZ2F0b3IuYWdncmVnYXRpb259XG5cdCAgICovXG5cdFxuXHRcblx0ICBfY3JlYXRlQ2xhc3MoQWdncmVnYXRvciwgW3tcblx0ICAgIGtleTogJ2dldFRpbWVNdWx0aXBsaWVyJyxcblx0ICAgIHZhbHVlOiBmdW5jdGlvbiBnZXRUaW1lTXVsdGlwbGllcigpIHt9XG5cdCAgfSwge1xuXHQgICAga2V5OiAnZ2V0QXZhaWxhYmxlbEFnZ3JlYWdhdGlvbicsXG5cdCAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0QXZhaWxhYmxlbEFnZ3JlYWdhdGlvbigpIHtcblx0ICAgICAgdmFyIGNvbmZpZyA9IHRoaXMuY29uZmlnLFxuXHQgICAgICAgICAgYXZsQWdnTWV0aG9kcyxcblx0ICAgICAgICAgIGF2bFRpbWVQZXJpb2RzLFxuXHQgICAgICAgICAgY3VycmVudFZpc2libGVSYW5nZSxcblx0ICAgICAgICAgIGN1cnJlbnRUaW1lTGVuZ3RoLFxuXHQgICAgICAgICAgeEF4aXMgPSBnbG9iYWwueCxcblx0ICAgICAgICAgIGNoYXJ0ID0gZ2xvYmFsLmNoYXJ0O1xuXHRcblx0ICAgICAgYXZsQWdnTWV0aG9kcyA9IGNoYXJ0LmdldEF2YWlsYWJsZUFnZ3JlZ2F0aW9uTWV0aG9kKCk7XG5cdCAgICAgIGF2bFRpbWVQZXJpb2RzID0gYXZsVGltZVBlcmlvZHMgPSBjaGFydC5nZXRBdmFpbGFibGVUaW1lUGVyaW9kKCk7XG5cdFxuXHQgICAgICBjdXJyZW50VmlzaWJsZVJhbmdlID0geEF4aXMuZ2V0Q3VycmVudFZpc2libGVSYW5nZSgpO1xuXHQgICAgICBjdXJyZW50VGltZUxlbmd0aCA9IGN1cnJlbnRWaXNpYmxlUmFuZ2UuZW5kRGF0ZSAtIGN1cnJlbnRWaXNpYmxlUmFuZ2Uuc3RhcnREYXRlO1xuXHRcblx0ICAgICAgY29uZmlnLmF2bFRpbWVQZXJpb2RzID0gYXZsVGltZVBlcmlvZHM7XG5cdCAgICAgIGNvbmZpZy5hdmxBZ2dNZXRob2RzID0gYXZsQWdnTWV0aG9kcztcblx0ICAgICAgY29uZmlnLmN1cnJlbnRUaW1lTGVuZ3RoID0gY3VycmVudFRpbWVMZW5ndGg7XG5cdCAgICB9XG5cdCAgfSwge1xuXHQgICAga2V5OiAnZ2V0VmFsaWRUaW1lTXVsdGlwbGllcicsXG5cdCAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0VmFsaWRUaW1lTXVsdGlwbGllcigpIHtcblx0ICAgICAgdmFyIGNvbmZpZyA9IHRoaXMuY29uZmlnLFxuXHQgICAgICAgICAgeEF4aXMgPSBnbG9iYWwueCxcblx0ICAgICAgICAgIGksXG5cdCAgICAgICAgICBsZW4sXG5cdCAgICAgICAgICBjdXJyVGltZVBlcmlvZCxcblx0ICAgICAgICAgIG5leHRUaW1lUGVyaW9kLFxuXHQgICAgICAgICAgbnVtT2ZNdWx0aXBsaWVyLFxuXHQgICAgICAgICAgY3VycmVudFRpbWVMZW5ndGggPSB4QXhpcy5tYXggLSB4QXhpcy5taW4sXG5cdCAgICAgICAgICBhdmxUaW1lUGVyaW9kcyA9IGNvbmZpZy5hdmxUaW1lUGVyaW9kcyxcblx0ICAgICAgICAgIGdldE11bHRpcGxpZXJBcnJheSA9IGZ1bmN0aW9uIGdldE11bHRpcGxpZXJBcnJheShudW0pIHtcblx0ICAgICAgICByZXR1cm4gQXJyYXkuZnJvbSh7IGxlbmd0aDogbnVtIH0sIGZ1bmN0aW9uICh2LCBrKSB7XG5cdCAgICAgICAgICByZXR1cm4gayArIDE7XG5cdCAgICAgICAgfSk7XG5cdCAgICAgIH07XG5cdFxuXHQgICAgICBjb25maWcuYXZsVGltZU11bHRpcGxpZXIgPSBbXTtcblx0ICAgICAgbGVuID0gYXZsVGltZVBlcmlvZHMubGVuZ3RoO1xuXHRcblx0ICAgICAgZm9yIChpID0gMDsgaSA8IGxlbjsgaSsrKSB7XG5cdCAgICAgICAgY3VyclRpbWVQZXJpb2QgPSBhdmxUaW1lUGVyaW9kc1tpXTtcblx0ICAgICAgICBuZXh0VGltZVBlcmlvZCA9IGF2bFRpbWVQZXJpb2RzW2kgKyAxXTtcblx0XG5cdCAgICAgICAgaWYgKG5leHRUaW1lUGVyaW9kKSB7XG5cdCAgICAgICAgICBudW1PZk11bHRpcGxpZXIgPSBuZXh0VGltZVBlcmlvZFtPYmplY3Qua2V5cyhuZXh0VGltZVBlcmlvZClbMF1dIC8gY3VyclRpbWVQZXJpb2RbT2JqZWN0LmtleXMoY3VyclRpbWVQZXJpb2QpWzBdXTtcblx0ICAgICAgICB9IGVsc2Uge1xuXHQgICAgICAgICAgbnVtT2ZNdWx0aXBsaWVyID0gY3VycmVudFRpbWVMZW5ndGggLyBjdXJyVGltZVBlcmlvZFtPYmplY3Qua2V5cyhjdXJyVGltZVBlcmlvZClbMF1dO1xuXHQgICAgICAgIH1cblx0ICAgICAgICBjb25maWcuYXZsVGltZU11bHRpcGxpZXIucHVzaChnZXRNdWx0aXBsaWVyQXJyYXkobnVtT2ZNdWx0aXBsaWVyKSk7XG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICB9LCB7XG5cdCAgICBrZXk6ICdnZXRWYWxpZEFnZ3JlZ2F0aW9uJyxcblx0ICAgIHZhbHVlOiBmdW5jdGlvbiBnZXRWYWxpZEFnZ3JlZ2F0aW9uKCkge1xuXHQgICAgICB2YXIgY2hhcnRDb25maWcgPSBnbG9iYWwuY2hhcnQuY29uZmlnLFxuXHQgICAgICAgICAgY29uZmlnID0gdGhpcy5jb25maWcsXG5cdCAgICAgICAgICBpLFxuXHQgICAgICAgICAgaixcblx0ICAgICAgICAgIGxlbjEsXG5cdCAgICAgICAgICBsZW4yLFxuXHQgICAgICAgICAgYXZsVGltZVBlcmlvZHMsXG5cdCAgICAgICAgICBhdmxUaW1lTXVsdGlwbGllcixcblx0ICAgICAgICAgIG1pbk51bU9mUGxvdCA9IGNoYXJ0Q29uZmlnLm1pbk51bU9mUGxvdCxcblx0ICAgICAgICAgIG1pblBsb3RXaWR0aCA9IGNoYXJ0Q29uZmlnLm1pblBsb3RXaWR0aCxcblx0ICAgICAgICAgIGNhbnZhc1dpZHRoID0gY2hhcnRDb25maWcuY2FudmFzV2lkdGgsXG5cdCAgICAgICAgICBjdXJyZW50VGltZUxlbmd0aCxcblx0ICAgICAgICAgIHRpbWVQZXJpb2QsXG5cdCAgICAgICAgICB0aW1lLFxuXHQgICAgICAgICAgZXhwZWN0ZWRUaW1lLFxuXHQgICAgICAgICAgbXVsdGlwbGllcixcblx0ICAgICAgICAgIG11bHRpcGxpZXJDb3VudGVyLFxuXHQgICAgICAgICAgZ2V0TXVsdGlwbGllckFycmF5ID0gZnVuY3Rpb24gZ2V0TXVsdGlwbGllckFycmF5KG51bSkge1xuXHQgICAgICAgIHJldHVybiBBcnJheS5mcm9tKHsgbGVuZ3RoOiBudW0gfSwgZnVuY3Rpb24gKHYsIGspIHtcblx0ICAgICAgICAgIHJldHVybiBrICsgMTtcblx0ICAgICAgICB9KTtcblx0ICAgICAgfSxcblx0ICAgICAgICAgIG1pblRpbWUsXG5cdCAgICAgICAgICBtYXhUaW1lO1xuXHRcblx0ICAgICAgYXZsVGltZVBlcmlvZHMgPSBjb25maWcuYXZsVGltZVBlcmlvZHM7XG5cdCAgICAgIGF2bFRpbWVNdWx0aXBsaWVyID0gY29uZmlnLmF2bFRpbWVNdWx0aXBsaWVyO1xuXHQgICAgICBjdXJyZW50VGltZUxlbmd0aCA9IGNvbmZpZy5jdXJyZW50VGltZUxlbmd0aDtcblx0XG5cdCAgICAgIGNvbmZpZy5taW5UaW1lID0gbWluVGltZSA9IGN1cnJlbnRUaW1lTGVuZ3RoIC8gY2FudmFzV2lkdGggKiBtaW5QbG90V2lkdGg7XG5cdCAgICAgIGNvbmZpZy5tYXhUaW1lID0gbWF4VGltZSA9IGN1cnJlbnRUaW1lTGVuZ3RoIC8gbWluTnVtT2ZQbG90O1xuXHRcblx0ICAgICAgY29uZmlnLnZhbGlkVGltZVBlcmlvZCA9IFtdO1xuXHQgICAgICBjb25maWcudmFsaWRUaW1lUGVyaW9kTXVsdGlwbGllciA9IFtdO1xuXHRcblx0ICAgICAgZm9yIChpID0gMCwgbGVuMSA9IGF2bFRpbWVQZXJpb2RzLmxlbmd0aDsgaSA8IGxlbjE7IGkrKykge1xuXHQgICAgICAgIHRpbWVQZXJpb2QgPSBPYmplY3Qua2V5cyhhdmxUaW1lUGVyaW9kc1tpXSlbMF07XG5cdCAgICAgICAgdGltZSA9IGF2bFRpbWVQZXJpb2RzW2ldW09iamVjdC5rZXlzKGF2bFRpbWVQZXJpb2RzW2ldKVswXV07XG5cdCAgICAgICAgbXVsdGlwbGllckNvdW50ZXIgPSAwO1xuXHRcblx0ICAgICAgICBmb3IgKGogPSAwLCBsZW4yID0gYXZsVGltZU11bHRpcGxpZXJbaV0ubGVuZ3RoOyBqIDwgbGVuMjsgaisrKSB7XG5cdCAgICAgICAgICBtdWx0aXBsaWVyID0gYXZsVGltZU11bHRpcGxpZXJbaV1bal07XG5cdCAgICAgICAgICBleHBlY3RlZFRpbWUgPSBtdWx0aXBsaWVyICogdGltZTtcblx0XG5cdCAgICAgICAgICBpZiAoZXhwZWN0ZWRUaW1lID49IG1pblRpbWUgJiYgZXhwZWN0ZWRUaW1lIDw9IG1heFRpbWUpIHtcblx0ICAgICAgICAgICAgbXVsdGlwbGllckNvdW50ZXIrKztcblx0ICAgICAgICAgIH1cblx0ICAgICAgICB9XG5cdCAgICAgICAgaWYgKG11bHRpcGxpZXJDb3VudGVyKSB7XG5cdCAgICAgICAgICBjb25maWcudmFsaWRUaW1lUGVyaW9kTXVsdGlwbGllci5wdXNoKGdldE11bHRpcGxpZXJBcnJheShtdWx0aXBsaWVyQ291bnRlcikpO1xuXHQgICAgICAgICAgY29uZmlnLnZhbGlkVGltZVBlcmlvZC5wdXNoKHRpbWVQZXJpb2QpO1xuXHQgICAgICAgIH1cblx0ICAgICAgfVxuXHQgICAgICBjb25zb2xlLmxvZyhjb25maWcudmFsaWRUaW1lUGVyaW9kLCBjb25maWcudmFsaWRUaW1lUGVyaW9kTXVsdGlwbGllciwgY29uZmlnLmF2bEFnZ01ldGhvZHMpO1xuXHQgICAgfVxuXHRcblx0ICAgIC8qKlxuXHQgICAgICogU2V0IEFnZ3JlZ2F0aW9uIG9uIHRpbWUgc2VyaWVzXG5cdCAgICAgKi9cblx0XG5cdCAgfSwge1xuXHQgICAga2V5OiAnc2V0QWdncmVnYXRpb24nLFxuXHQgICAgdmFsdWU6IGZ1bmN0aW9uIHNldEFnZ3JlZ2F0aW9uKG9iaikge1xuXHQgICAgICB2YXIgYXZsQWdnTWV0aG9kcyxcblx0ICAgICAgICAgIHZhbGlkVGltZVBlcmlvZCxcblx0ICAgICAgICAgIHRpbWVQZXJpb2RJbmRleCxcblx0ICAgICAgICAgIHZhbGlkVGltZVBlcmlvZE11bHRpcGxpZXIsXG5cdCAgICAgICAgICBjb25maWcgPSB0aGlzLmNvbmZpZztcblx0XG5cdCAgICAgIHRoaXMuZ2V0VmFsaWRBZ2dyZWdhdGlvbigpO1xuXHRcblx0ICAgICAgYXZsQWdnTWV0aG9kcyA9IGNvbmZpZy5hdmxBZ2dNZXRob2RzO1xuXHQgICAgICB2YWxpZFRpbWVQZXJpb2QgPSBjb25maWcudmFsaWRUaW1lUGVyaW9kO1xuXHQgICAgICB2YWxpZFRpbWVQZXJpb2RNdWx0aXBsaWVyID0gY29uZmlnLnZhbGlkVGltZVBlcmlvZE11bHRpcGxpZXI7XG5cdFxuXHQgICAgICBpZiAoYXZsQWdnTWV0aG9kcy5pbmNsdWRlcyhvYmouYWdncmVnYXRpb25NZXRob2QpICYmIHZhbGlkVGltZVBlcmlvZC5pbmNsdWRlcyhvYmoudGltZVBlcmlvZCkpIHtcblx0ICAgICAgICB0aW1lUGVyaW9kSW5kZXggPSB2YWxpZFRpbWVQZXJpb2QuaW5kZXhPZihvYmoudGltZVBlcmlvZCk7XG5cdCAgICAgICAgaWYgKHZhbGlkVGltZVBlcmlvZE11bHRpcGxpZXJbdGltZVBlcmlvZEluZGV4XS5pbmNsdWRlcyhvYmoudGltZVBlcmlvZE11bHRpcGxpZXIpKSB7XG5cdCAgICAgICAgICB0aGlzLmFnZ3JlZ2F0aW9uID0gb2JqO1xuXHQgICAgICAgICAgY29uc29sZS5sb2codGhpcy5hZ2dyZWdhdGlvbiwgdHJ1ZSk7XG5cdCAgICAgICAgICByZXR1cm4gdHJ1ZTtcblx0ICAgICAgICB9IGVsc2Uge1xuXHQgICAgICAgICAgY29uc29sZS5sb2codGhpcy5hZ2dyZWdhdGlvbiwgZmFsc2UpO1xuXHQgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuXHQgICAgICAgIH1cblx0ICAgICAgfSBlbHNlIHtcblx0ICAgICAgICBjb25zb2xlLmxvZyh0aGlzLmFnZ3JlZ2F0aW9uLCBmYWxzZSk7XG5cdCAgICAgICAgcmV0dXJuIGZhbHNlO1xuXHQgICAgICB9XG5cdCAgICB9XG5cdFxuXHQgICAgLyoqXG5cdCAgICAgKiBSZXNldCBBcHBsaWVkIEFnZ3JlZ2F0aW9uXG5cdCAgICAgKi9cblx0XG5cdCAgfSwge1xuXHQgICAga2V5OiAncmVzZXRBZ2dyZWdhdGlvbicsXG5cdCAgICB2YWx1ZTogZnVuY3Rpb24gcmVzZXRBZ2dyZWdhdGlvbigpIHt9XG5cdCAgfSwge1xuXHQgICAga2V5OiAnaW5pdCcsXG5cdCAgICB2YWx1ZTogZnVuY3Rpb24gaW5pdChyZXF1aXJlKSB7XG5cdCAgICAgIHJlcXVpcmUoJ1gtQXhpcycsICdjaGFydCcsIGZ1bmN0aW9uICh4LCBjaGFydCkge1xuXHQgICAgICAgIGdsb2JhbC54ID0geDtcblx0ICAgICAgICBnbG9iYWwuY2hhcnQgPSBjaGFydDtcblx0ICAgICAgfSk7XG5cdFxuXHQgICAgICB0aGlzLmdldEF2YWlsYWJsZWxBZ2dyZWFnYXRpb24oKTtcblx0ICAgICAgdGhpcy5nZXRWYWxpZFRpbWVNdWx0aXBsaWVyKCk7XG5cdCAgICAgIC8vIHRoaXMuZ2V0VmFsaWRBZ2dyZWdhdGlvbigpO1xuXHQgICAgfVxuXHQgIH0sIHtcblx0ICAgIGtleTogJ3BsYWNlSW5DYW52YXMnLFxuXHQgICAgdmFsdWU6IGZ1bmN0aW9uIHBsYWNlSW5DYW52YXMoKSB7XG5cdCAgICAgIC8vIHNwYWNlIG1hbmFnZW1lbnRcblx0ICAgIH1cblx0ICB9LCB7XG5cdCAgICBrZXk6ICdkcmF3Jyxcblx0ICAgIHZhbHVlOiBmdW5jdGlvbiBkcmF3KCkge1xuXHQgICAgICAvLyBkcmF3IGV4dGVuc2lvblxuXHQgICAgfVxuXHQgIH0sIHtcblx0ICAgIGtleTogJ2Rpc3Bvc2UnLFxuXHQgICAgdmFsdWU6IGZ1bmN0aW9uIGRpc3Bvc2UoKSB7XG5cdCAgICAgIC8vIGRpc3Bvc2UgZXh0ZW5zaW9uXG5cdCAgICB9XG5cdCAgfSwge1xuXHQgICAga2V5OiAnYWdncmVnYXRpb24nLFxuXHQgICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG5cdCAgICAgIHJldHVybiB0aGlzLmFwcGxpZWRBZ2dyZWdhdGlvbjtcblx0ICAgIH0sXG5cdCAgICBzZXQ6IGZ1bmN0aW9uIHNldChvYmopIHtcblx0ICAgICAgdGhpcy5hcHBsaWVkQWdncmVnYXRpb24udGltZVBlcmlvZCA9IG9iai50aW1lUGVyaW9kO1xuXHQgICAgICB0aGlzLmFwcGxpZWRBZ2dyZWdhdGlvbi50aW1lUGVyaW9kTXVsdGlwbGllciA9IG9iai50aW1lUGVyaW9kTXVsdGlwbGllcjtcblx0ICAgICAgdGhpcy5hcHBsaWVkQWdncmVnYXRpb24uYWdncmVnYXRpb25NZXRob2QgPSBvYmouYWdncmVnYXRpb25NZXRob2Q7XG5cdCAgICB9XG5cdCAgfV0pO1xuXHRcblx0ICByZXR1cm4gQWdncmVnYXRvcjtcblx0fSgpO1xuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSBBZ2dyZWdhdG9yO1xuXHQvKiBXRUJQQUNLIFZBUiBJTkpFQ1RJT04gKi99LmNhbGwoZXhwb3J0cywgKGZ1bmN0aW9uKCkgeyByZXR1cm4gdGhpczsgfSgpKSkpXG5cbi8qKiovIH1cbi8qKioqKiovIF0pO1xuXG5cbi8qKiBXRUJQQUNLIEZPT1RFUiAqKlxuICoqIGZjdHMtZXh0LWRhdGFhZ2dyZWdhdG9yLWVzNS5taW4uanNcbiAqKi8iLCIgXHQvLyBUaGUgbW9kdWxlIGNhY2hlXG4gXHR2YXIgaW5zdGFsbGVkTW9kdWxlcyA9IHt9O1xuXG4gXHQvLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuIFx0ZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuXG4gXHRcdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuIFx0XHRpZihpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSlcbiBcdFx0XHRyZXR1cm4gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0uZXhwb3J0cztcblxuIFx0XHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuIFx0XHR2YXIgbW9kdWxlID0gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0gPSB7XG4gXHRcdFx0ZXhwb3J0czoge30sXG4gXHRcdFx0aWQ6IG1vZHVsZUlkLFxuIFx0XHRcdGxvYWRlZDogZmFsc2VcbiBcdFx0fTtcblxuIFx0XHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cbiBcdFx0bW9kdWxlc1ttb2R1bGVJZF0uY2FsbChtb2R1bGUuZXhwb3J0cywgbW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cbiBcdFx0Ly8gRmxhZyB0aGUgbW9kdWxlIGFzIGxvYWRlZFxuIFx0XHRtb2R1bGUubG9hZGVkID0gdHJ1ZTtcblxuIFx0XHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuIFx0XHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG4gXHR9XG5cblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGVzIG9iamVjdCAoX193ZWJwYWNrX21vZHVsZXNfXylcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubSA9IG1vZHVsZXM7XG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlIGNhY2hlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmMgPSBpbnN0YWxsZWRNb2R1bGVzO1xuXG4gXHQvLyBfX3dlYnBhY2tfcHVibGljX3BhdGhfX1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5wID0gXCJcIjtcblxuIFx0Ly8gTG9hZCBlbnRyeSBtb2R1bGUgYW5kIHJldHVybiBleHBvcnRzXG4gXHRyZXR1cm4gX193ZWJwYWNrX3JlcXVpcmVfXygwKTtcblxuXG5cbi8qKiBXRUJQQUNLIEZPT1RFUiAqKlxuICoqIHdlYnBhY2svYm9vdHN0cmFwIDZkOTMwOGNkMGUwNTZlZjQ0NjNjXG4gKiovIiwiJ3VzZSBzdHJpY3QnO1xuY29uc3QgQWdncmVnYXRvciA9IHJlcXVpcmUoJy4vZmN0cy1leHQtYWdncmVnYXRvcicpO1xuXG47KGZ1bmN0aW9uIChmYWN0b3J5KSB7XG4gIGZhY3RvcnkoRnVzaW9uQ2hhcnRzKTtcbn0pKGZ1bmN0aW9uIChGQykge1xuICBGQy5yZWdpc3RlcignZXh0ZW5zaW9uJywgWydkYXRhLWFnZ3JlZ2F0b3InLCBmdW5jdGlvbiAoaWQpIHtcbiAgICB2YXIgZ2xvYmFsID0gdGhpcztcbiAgICB2YXIgZXh0QVBJID0gZ2xvYmFsLmV4dEFQSTtcbiAgICBjb25zb2xlLmxvZyhpZCk7XG5cbiAgICAvLyB2YXIgb3RoZXJBUEkgPSBGdXNpb25DaGFydHMuZ2V0RXh0Q29tcG9uZW50KGlkLCAnYXBpJywgJ2xlZ2FjeWV4dGFwaScpO1xuICAgIC8vIHZhciB0b29sQm94QXBpID0gRnVzaW9uQ2hhcnRzLmdldENvbXBvbmVudCgnYXBpJywgJ3Rvb2xib3gnKTtcblxuICAgIHdpbmRvdy5BZ2dyZWdhdG9yID0gbmV3IEFnZ3JlZ2F0b3IoKTtcblxuICAgIGV4dEFQSSh3aW5kb3cuQWdncmVnYXRvcik7XG4gIH1dKTtcbn0pO1xuXG5cblxuLyoqIFdFQlBBQ0sgRk9PVEVSICoqXG4gKiogLi9zcmMvaW5kZXguanNcbiAqKi8iLCIndXNlIHN0cmljdCc7XG4vKipcbiAqIENsYXNzIHJlcHJlc2VudGluZyB0aGUgRGF0YSBBZ2dyZWdhdG9yLlxuICovXG5jbGFzcyBBZ2dyZWdhdG9yIHtcbiAgLyoqXG4gICAqIENyZWF0ZSBhIEFnZ3JlZ2F0b3IuXG4gICAqIEB0eXBlZGVmIHtvYmplY3R9IEFnZ3JlZ2F0b3IuYWdncmVnYXRpb25cbiAgICogQHByb3BlcnR5IHtzdHJpbmd9IHRpbWVQZXJpb2QgLSBUaGUgdGltZSBpbnRlcnZhbCBvZiBhZ2dyZWdhdGlvbi5cbiAgICogQHByb3BlcnR5IHtudW1iZXJ9IHRpbWVQZXJpb2RNdWx0aXBsaWVyIC0gVGhlIG11bHRpcGxpZXIgb2YgdGltZSBpbnRlcnZhbC5cbiAgICogQHByb3BlcnR5IHtzdHJpbmd9IGFnZ3JlZ2F0aW9uTWV0aG9kIC0gVGhlIG1ldGhvZCBhcHBsaWVkIHRvIGFnZ3JlZ2F0ZS5cbiAgICovXG4gIGNvbnN0cnVjdG9yICgpIHtcbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIHRoaXMuYXBwbGllZEFnZ3JlZ2F0aW9uID0ge1xuICAgICAgdGltZVBlcmlvZDogbnVsbCxcbiAgICAgIHRpbWVQZXJpb2RNdWx0aXBsaWVyOiAxLFxuICAgICAgYWdncmVnYXRpb25NZXRob2Q6IG51bGxcbiAgICB9O1xuICAgIHRoaXMuY29uZmlnID0ge307XG4gIH1cblxuICAvKipcbiAgICogQW4gb2JqZWN0IHJlcHJlc2VudGluZyB0aGUgdGltZVBlcmlvZCwgdGltZVBlcmlvZE11bHRpcGxpZXIsIGFnZ3JlZ2F0aW9uTWV0aG9kLlxuICAgKiBAdHlwZSB7QWdncmVnYXRvci5hZ2dyZWdhdGlvbn1cbiAgICovXG4gIGdldCBhZ2dyZWdhdGlvbiAoKSB7XG4gICAgcmV0dXJuIHRoaXMuYXBwbGllZEFnZ3JlZ2F0aW9uO1xuICB9XG5cbiAgc2V0IGFnZ3JlZ2F0aW9uIChvYmopIHtcbiAgICB0aGlzLmFwcGxpZWRBZ2dyZWdhdGlvbi50aW1lUGVyaW9kID0gb2JqLnRpbWVQZXJpb2Q7XG4gICAgdGhpcy5hcHBsaWVkQWdncmVnYXRpb24udGltZVBlcmlvZE11bHRpcGxpZXIgPSBvYmoudGltZVBlcmlvZE11bHRpcGxpZXI7XG4gICAgdGhpcy5hcHBsaWVkQWdncmVnYXRpb24uYWdncmVnYXRpb25NZXRob2QgPSBvYmouYWdncmVnYXRpb25NZXRob2Q7XG4gIH1cblxuICBnZXRUaW1lTXVsdGlwbGllciAoKSB7XG5cbiAgfVxuXG4gIGdldEF2YWlsYWJsZWxBZ2dyZWFnYXRpb24gKCkge1xuICAgIHZhciBjb25maWcgPSB0aGlzLmNvbmZpZyxcbiAgICAgIGF2bEFnZ01ldGhvZHMsXG4gICAgICBhdmxUaW1lUGVyaW9kcyxcbiAgICAgIGN1cnJlbnRWaXNpYmxlUmFuZ2UsXG4gICAgICBjdXJyZW50VGltZUxlbmd0aCxcbiAgICAgIHhBeGlzID0gZ2xvYmFsLngsXG4gICAgICBjaGFydCA9IGdsb2JhbC5jaGFydDtcblxuICAgIGF2bEFnZ01ldGhvZHMgPSBjaGFydC5nZXRBdmFpbGFibGVBZ2dyZWdhdGlvbk1ldGhvZCgpO1xuICAgIGF2bFRpbWVQZXJpb2RzID0gYXZsVGltZVBlcmlvZHMgPSBjaGFydC5nZXRBdmFpbGFibGVUaW1lUGVyaW9kKCk7XG5cbiAgICBjdXJyZW50VmlzaWJsZVJhbmdlID0geEF4aXMuZ2V0Q3VycmVudFZpc2libGVSYW5nZSgpO1xuICAgIGN1cnJlbnRUaW1lTGVuZ3RoID0gY3VycmVudFZpc2libGVSYW5nZS5lbmREYXRlIC0gY3VycmVudFZpc2libGVSYW5nZS5zdGFydERhdGU7XG5cbiAgICBjb25maWcuYXZsVGltZVBlcmlvZHMgPSBhdmxUaW1lUGVyaW9kcztcbiAgICBjb25maWcuYXZsQWdnTWV0aG9kcyA9IGF2bEFnZ01ldGhvZHM7XG4gICAgY29uZmlnLmN1cnJlbnRUaW1lTGVuZ3RoID0gY3VycmVudFRpbWVMZW5ndGg7XG4gIH1cblxuICBnZXRWYWxpZFRpbWVNdWx0aXBsaWVyICgpIHtcbiAgICB2YXIgY29uZmlnID0gdGhpcy5jb25maWcsXG4gICAgICB4QXhpcyA9IGdsb2JhbC54LFxuICAgICAgaSxcbiAgICAgIGxlbixcbiAgICAgIGN1cnJUaW1lUGVyaW9kLFxuICAgICAgbmV4dFRpbWVQZXJpb2QsXG4gICAgICBudW1PZk11bHRpcGxpZXIsXG4gICAgICBjdXJyZW50VGltZUxlbmd0aCA9IHhBeGlzLm1heCAtIHhBeGlzLm1pbixcbiAgICAgIGF2bFRpbWVQZXJpb2RzID0gY29uZmlnLmF2bFRpbWVQZXJpb2RzLFxuICAgICAgZ2V0TXVsdGlwbGllckFycmF5ID0gbnVtID0+IEFycmF5LmZyb20oe2xlbmd0aDogbnVtfSwgKHYsIGspID0+IGsgKyAxKTtcblxuICAgIGNvbmZpZy5hdmxUaW1lTXVsdGlwbGllciA9IFtdO1xuICAgIGxlbiA9IGF2bFRpbWVQZXJpb2RzLmxlbmd0aDtcblxuICAgIGZvciAoaSA9IDA7IGkgPCBsZW47IGkrKykge1xuICAgICAgY3VyclRpbWVQZXJpb2QgPSBhdmxUaW1lUGVyaW9kc1tpXTtcbiAgICAgIG5leHRUaW1lUGVyaW9kID0gYXZsVGltZVBlcmlvZHNbKGkgKyAxKV07XG5cbiAgICAgIGlmIChuZXh0VGltZVBlcmlvZCkge1xuICAgICAgICBudW1PZk11bHRpcGxpZXIgPVxuICAgICAgICAgIG5leHRUaW1lUGVyaW9kW09iamVjdC5rZXlzKG5leHRUaW1lUGVyaW9kKVswXV0gLyBjdXJyVGltZVBlcmlvZFtPYmplY3Qua2V5cyhjdXJyVGltZVBlcmlvZClbMF1dO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgbnVtT2ZNdWx0aXBsaWVyID1cbiAgICAgICAgICBjdXJyZW50VGltZUxlbmd0aCAvIGN1cnJUaW1lUGVyaW9kW09iamVjdC5rZXlzKGN1cnJUaW1lUGVyaW9kKVswXV07XG4gICAgICB9XG4gICAgICBjb25maWcuYXZsVGltZU11bHRpcGxpZXIucHVzaChnZXRNdWx0aXBsaWVyQXJyYXkobnVtT2ZNdWx0aXBsaWVyKSk7XG4gICAgfVxuICB9XG5cbiAgZ2V0VmFsaWRBZ2dyZWdhdGlvbiAoKSB7XG4gICAgdmFyIGNoYXJ0Q29uZmlnID0gZ2xvYmFsLmNoYXJ0LmNvbmZpZyxcbiAgICAgIGNvbmZpZyA9IHRoaXMuY29uZmlnLFxuICAgICAgaSxcbiAgICAgIGosXG4gICAgICBsZW4xLFxuICAgICAgbGVuMixcbiAgICAgIGF2bFRpbWVQZXJpb2RzLFxuICAgICAgYXZsVGltZU11bHRpcGxpZXIsXG4gICAgICBtaW5OdW1PZlBsb3QgPSBjaGFydENvbmZpZy5taW5OdW1PZlBsb3QsXG4gICAgICBtaW5QbG90V2lkdGggPSBjaGFydENvbmZpZy5taW5QbG90V2lkdGgsXG4gICAgICBjYW52YXNXaWR0aCA9IGNoYXJ0Q29uZmlnLmNhbnZhc1dpZHRoLFxuICAgICAgY3VycmVudFRpbWVMZW5ndGgsXG4gICAgICB0aW1lUGVyaW9kLFxuICAgICAgdGltZSxcbiAgICAgIGV4cGVjdGVkVGltZSxcbiAgICAgIG11bHRpcGxpZXIsXG4gICAgICBtdWx0aXBsaWVyQ291bnRlcixcbiAgICAgIGdldE11bHRpcGxpZXJBcnJheSA9IG51bSA9PiBBcnJheS5mcm9tKHtsZW5ndGg6IG51bX0sICh2LCBrKSA9PiBrICsgMSksXG4gICAgICBtaW5UaW1lLFxuICAgICAgbWF4VGltZTtcblxuICAgIGF2bFRpbWVQZXJpb2RzID0gY29uZmlnLmF2bFRpbWVQZXJpb2RzO1xuICAgIGF2bFRpbWVNdWx0aXBsaWVyID0gY29uZmlnLmF2bFRpbWVNdWx0aXBsaWVyO1xuICAgIGN1cnJlbnRUaW1lTGVuZ3RoID0gY29uZmlnLmN1cnJlbnRUaW1lTGVuZ3RoO1xuXG4gICAgY29uZmlnLm1pblRpbWUgPSBtaW5UaW1lID0gKGN1cnJlbnRUaW1lTGVuZ3RoIC8gY2FudmFzV2lkdGgpICogbWluUGxvdFdpZHRoO1xuICAgIGNvbmZpZy5tYXhUaW1lID0gbWF4VGltZSA9IGN1cnJlbnRUaW1lTGVuZ3RoIC8gbWluTnVtT2ZQbG90O1xuXG4gICAgY29uZmlnLnZhbGlkVGltZVBlcmlvZCA9IFtdO1xuICAgIGNvbmZpZy52YWxpZFRpbWVQZXJpb2RNdWx0aXBsaWVyID0gW107XG5cbiAgICBmb3IgKGkgPSAwLCBsZW4xID0gYXZsVGltZVBlcmlvZHMubGVuZ3RoOyBpIDwgbGVuMTsgaSsrKSB7XG4gICAgICB0aW1lUGVyaW9kID0gT2JqZWN0LmtleXMoYXZsVGltZVBlcmlvZHNbaV0pWzBdO1xuICAgICAgdGltZSA9IGF2bFRpbWVQZXJpb2RzW2ldW09iamVjdC5rZXlzKGF2bFRpbWVQZXJpb2RzW2ldKVswXV07XG4gICAgICBtdWx0aXBsaWVyQ291bnRlciA9IDA7XG5cbiAgICAgIGZvciAoaiA9IDAsIGxlbjIgPSBhdmxUaW1lTXVsdGlwbGllcltpXS5sZW5ndGg7IGogPCBsZW4yOyBqKyspIHtcbiAgICAgICAgbXVsdGlwbGllciA9IGF2bFRpbWVNdWx0aXBsaWVyW2ldW2pdO1xuICAgICAgICBleHBlY3RlZFRpbWUgPSBtdWx0aXBsaWVyICogdGltZTtcblxuICAgICAgICBpZiAoKGV4cGVjdGVkVGltZSA+PSBtaW5UaW1lKSAmJiAoZXhwZWN0ZWRUaW1lIDw9IG1heFRpbWUpKSB7XG4gICAgICAgICAgbXVsdGlwbGllckNvdW50ZXIrKztcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgaWYgKG11bHRpcGxpZXJDb3VudGVyKSB7XG4gICAgICAgIGNvbmZpZy52YWxpZFRpbWVQZXJpb2RNdWx0aXBsaWVyLnB1c2goZ2V0TXVsdGlwbGllckFycmF5KG11bHRpcGxpZXJDb3VudGVyKSk7XG4gICAgICAgIGNvbmZpZy52YWxpZFRpbWVQZXJpb2QucHVzaCh0aW1lUGVyaW9kKTtcbiAgICAgIH1cbiAgICB9XG4gICAgY29uc29sZS5sb2coY29uZmlnLnZhbGlkVGltZVBlcmlvZCwgY29uZmlnLnZhbGlkVGltZVBlcmlvZE11bHRpcGxpZXIsIGNvbmZpZy5hdmxBZ2dNZXRob2RzKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBTZXQgQWdncmVnYXRpb24gb24gdGltZSBzZXJpZXNcbiAgICovXG4gIHNldEFnZ3JlZ2F0aW9uIChvYmopIHtcbiAgICB2YXIgYXZsQWdnTWV0aG9kcyxcbiAgICAgIHZhbGlkVGltZVBlcmlvZCxcbiAgICAgIHRpbWVQZXJpb2RJbmRleCxcbiAgICAgIHZhbGlkVGltZVBlcmlvZE11bHRpcGxpZXIsXG4gICAgICBjb25maWcgPSB0aGlzLmNvbmZpZztcblxuICAgIHRoaXMuZ2V0VmFsaWRBZ2dyZWdhdGlvbigpO1xuXG4gICAgYXZsQWdnTWV0aG9kcyA9IGNvbmZpZy5hdmxBZ2dNZXRob2RzO1xuICAgIHZhbGlkVGltZVBlcmlvZCA9IGNvbmZpZy52YWxpZFRpbWVQZXJpb2Q7XG4gICAgdmFsaWRUaW1lUGVyaW9kTXVsdGlwbGllciA9IGNvbmZpZy52YWxpZFRpbWVQZXJpb2RNdWx0aXBsaWVyO1xuXG4gICAgaWYgKGF2bEFnZ01ldGhvZHMuaW5jbHVkZXMob2JqLmFnZ3JlZ2F0aW9uTWV0aG9kKSAmJiB2YWxpZFRpbWVQZXJpb2QuaW5jbHVkZXMob2JqLnRpbWVQZXJpb2QpKSB7XG4gICAgICB0aW1lUGVyaW9kSW5kZXggPSB2YWxpZFRpbWVQZXJpb2QuaW5kZXhPZihvYmoudGltZVBlcmlvZCk7XG4gICAgICBpZiAodmFsaWRUaW1lUGVyaW9kTXVsdGlwbGllclt0aW1lUGVyaW9kSW5kZXhdLmluY2x1ZGVzKG9iai50aW1lUGVyaW9kTXVsdGlwbGllcikpIHtcbiAgICAgICAgdGhpcy5hZ2dyZWdhdGlvbiA9IG9iajtcbiAgICAgICAgY29uc29sZS5sb2codGhpcy5hZ2dyZWdhdGlvbiwgdHJ1ZSk7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY29uc29sZS5sb2codGhpcy5hZ2dyZWdhdGlvbiwgZmFsc2UpO1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIGNvbnNvbGUubG9nKHRoaXMuYWdncmVnYXRpb24sIGZhbHNlKTtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogUmVzZXQgQXBwbGllZCBBZ2dyZWdhdGlvblxuICAgKi9cbiAgcmVzZXRBZ2dyZWdhdGlvbiAoKSB7XG5cbiAgfVxuXG4gIGluaXQgKHJlcXVpcmUpIHtcbiAgICByZXF1aXJlKCdYLUF4aXMnLCAnY2hhcnQnLCBmdW5jdGlvbiAoeCwgY2hhcnQpIHtcbiAgICAgIGdsb2JhbC54ID0geDtcbiAgICAgIGdsb2JhbC5jaGFydCA9IGNoYXJ0O1xuICAgIH0pO1xuXG4gICAgdGhpcy5nZXRBdmFpbGFibGVsQWdncmVhZ2F0aW9uKCk7XG4gICAgdGhpcy5nZXRWYWxpZFRpbWVNdWx0aXBsaWVyKCk7XG4gICAgLy8gdGhpcy5nZXRWYWxpZEFnZ3JlZ2F0aW9uKCk7XG4gIH1cblxuICBwbGFjZUluQ2FudmFzICgpIHtcbiAgICAvLyBzcGFjZSBtYW5hZ2VtZW50XG4gIH1cblxuICBkcmF3ICgpIHtcbiAgICAvLyBkcmF3IGV4dGVuc2lvblxuICB9XG5cbiAgZGlzcG9zZSAoKSB7XG4gICAgLy8gZGlzcG9zZSBleHRlbnNpb25cbiAgfVxufVxuXG5tb2R1bGUuZXhwb3J0cyA9IEFnZ3JlZ2F0b3I7XG5cblxuXG4vKiogV0VCUEFDSyBGT09URVIgKipcbiAqKiAuL3NyYy9mY3RzLWV4dC1hZ2dyZWdhdG9yLmpzXG4gKiovIl0sInNvdXJjZVJvb3QiOiIifQ==