{"version":3,"sources":["webpack:///webpack/bootstrap 196ed9cc6efbabc6ee14","webpack:///./src/index.js","webpack:///./src/data-aggregator-ext.js"],"names":[],"mappings":"YACA,cAMA,MACA,eAGA,mBACA,CACA,cACA,EAIA,kDAGA,KAGA,YACA,OAIA,IAzBA,iBA4BA,MAGA,MAGA,0BCtCA,CACA,uBAEA,GAAC,cACD,uBACA,oBACA,yBACA,OACA,yBAEA,6CACA,KAEA,iBAEA,KAAC,qDACD,SAEA,2EACA,uDAA4E,GAC5E,IACA,GAAC,eCrBD,CAEA,kCAKA,kBACA,0CACA,EAIA,SAOA,cAIA,yBACA,SACA,uBAEA,WACA,SAMA,kBACA,aACA,kBAEA,mBACA,sCACA,0DACA,iEACA,iBAMA,4BACA,IAIA,GAEA,SALA,WACA,6BACA,gCAIA,yBAEA,SAAiB,IAAS,EAC1B,kCAEA,gBAMA,sBACA,IAKA,GACA,EACA,EACA,EACA,EACA,EAGA,EACA,EACA,EACA,EACA,EACA,EAEA,IAnBA,SACA,WACA,aACA,4CAOA,mDACA,iFASA,wDAEA,kCACA,mBACA,sBAEA,mCAEA,IACA,qBACA,+CAEA,mCAA+C,UAAU,MACzD,YACA,YACA,SAEA,iBAAuD,UAAU,EACjE,WACA,OAEA,UACA,eAGA,IACA,8CACA,0BAEA,GACA,CAMA,uBACA,IAMA,GACA,EAEA,IARA,SACA,WACA,YACA,gBACA,0CAMA,WACA,uCACA,YAGA,mBACA,iBACA,+BACA,uBACA,YACA,mBAGA,YAEA,QACA,IAGA,GAEA,EACA,EACA,IANA,SACA,WAEA,sBAIA,aACA,CACA,WACA,sBACA,QACA,uBACA,gBACA,aACA,oBACA,OACA,aACA,IACA,cACA,SACA,oBAAuB,IAAQ,IAC/B,MACA,qBAEA,EAEA,YAEA,OACA,uBAEA,0BACA,gBACA,0DACA,6BAEA,sDACA,aAEA,YAEA,cAEA,iCAEA,uFACA,GACA,YACA,0BACA,GACA,eAAW,EAEX,KAEA,qBACA,EACA,CAMA,gBACA,IAEA,GACA,EACA,EACA,EACA,EACA,EACA,EACA,EACA,EAIA,EAcA,EACA,EACA,EACA,EACA,EAEA,EACA,EACA,EAEA,EACA,EAEA,IAxCA,SAUA,WACA,aAGA,qBACA,YACA,WACA,sBACA,mBAEA,gBACA,aACA,UACA,cACA,UAEA,aAeA,OACA,QACA,aACA,iBAOA,SACA,IAMA,GAEA,MAPA,YACA,YAEA,oBACA,sCAIA,mBAEA,GACA,gBACA,UACA,QACA,mBAIA,0BAEA,GACA,oBAEA,cAEA,MAvBA,EA6BA,QACA,SAEA,gDACA,6CAEA,sCACA,0BACA,uCACA,uBAEA,0BAGA,cACA,mBAEA,+BACA,oCACA,IAEA,IAEA,mBACA,UAEA,cACA,UAEA,cACA,UAGA,YAEA,OACA,wBACA,wBAEA,mBACA,YACO,uBACP,iBAGA,mBACA,CAOA,4IACA,CAeA,4JACA,CAeA,mKACA,CAeA,iJACA,CAIA,yCASA,0HACA,CAgBA,yLAOA,6FACA,CAgBA,+LAOA,sFACA,CASA,gEAEA,QACA,SACA,mCACA,+DAEA,iCACA,uDAEA,wCACA,qEAEA,qBACA,+BACA,yCAEA,wBACA,qCACA,iDAEA,0BACA,qCACA,iDAEA,mBACA,qBAIA,uBACA,MACA,uBAEA,gBACA,MACA,uBAEA,gBACA,MACA,uBAGA,gBACA,MACA,uBAGA,MACA,UACA,QACA,wBAKA,cACA,UACA,QACA,wBAKA,cACA,UACA,WACA,OACA,wBAGA,YACA,OACA,wBAIA,oBACA,WACA,OACA,wBACA,8BACA,gCAGA,cACA,OACA,wBAIA,mBACA,WACA,OACA,wBAGA,iBACA,OACA,wBAMA,qDACA,WACA,gBAEA,aACA,SAIA,wCAAiG,gBACjG,iDACA,qBACA,kBACA,6DACA,SACA,OAIA,kCAA2F,gBAC3F,qDACA,qBACA,kBACA,iEACA,SACA,OAIA,oCAA+F,gBAC/F,wDACA,qBACA,uEACA,SACA,OAEA,iBAGA,6CACA,qCACA,qBACA,YACA,OAGA,0BACA,iBACA,SACA,EAEA,qBAEA,2CACA,qCACA,qBACA,YACA,OAGA,0BACA,iBACA,SACA,EAEA,qBAEA,eACA,eACA,eACA,eACA,eACA,eAEA,oDACA,gBACA,aACA,cACA,cAEA,iDACA,IAEA,yBACA,wBACA,CACA,IACA,GAGA,0BACA,wBACA,CACA,GAGA,0BACA,wBACA,CACA,GAGA,mBACA,kBACA,kBAEA,GACA,CAEA,qBACA,IACA,GAGA,EAEA,IAJA,IACA,0BAG4C,SAAQ,EACpD,yCACA,sBACA,QACA,gCACA,gCAEA,sBACA,QACA,OACA,SAEA,EAEA,gBACA,OACA,SACA,oBAEA,oBACA,8BACA,gBACA,OACA,iBACA,iBACA,UACA,IACA,iBACA,OACA,EACA,qBACA,OACA,EACA,oBACA,oBACA,SACA,eACA,iBACA,yBACA,aACA,YACA,iBACA,sBACA,SACA,aACA,iBACA,uBACA,QACA,wBACA,YACA,kEACA,YAKA,WAEA,mCACA,YACA,uBACA,MACA,UACA,WAEA,mBAEA,EACA,IAOA,SACA,IAWA,GACA,EAEA,EACA,EACA,EAEA,EAEA,EACA,EACA,EACA,EACA,EACA,IAxBA,SACA,4BACA,WACA,yBACA,sBACA,wBACA,gBAEA,iCACA,8BASA,kBAOA,4BAEA,SACA,IAwEA,6BACA,yBACA,oBAEA,wBA3EA,MAgDA,KACA,YACA,YAEA,mBACA,6BACA,KACA,SACA,KAEA,MACA,EACA,EACA,2BACA,6CACA,IACA,mBACA,sBACA,iBACA,2BACA,UAEA,6CArEA,kBACA,+CAEA,gBACA,0BACA,oBACA,8BAEA,yBACA,iBACA,mBACA,YAEA,IAGA,QACA,KAGA,WACA,MACA,YACA,6BACA,KACA,SACA,KAEA,MACA,EACA,EACA,2BACA,GACA,mBACA,CAEA,CACA,IACA,EACA,iDACA,IACA,6BAEA,kBACA,2BACA,UACS,CAkCT,gBACA,IAWA,GACA,EACA,EAEA,EACA,EACA,EAEA,EACA,EACA,EAEA,EAEA,EACA,EACA,EAEA,IA5BA,SACA,4BACA,WACA,yBACA,sBACA,wBACA,gBACA,4BAEA,kBAcA,cAMA,0BACA,2BACA,eACA,yBAEA,kBACA,KACA,KAEA,SACA,oBACA,8BAEA,6BAEA,+BACA,6CACA,qBAOA,sBANA,yBACA,oBAEA,qBAIA,UACA,QACA,SAIA,oBACA,sCAEA,gBAEA,GACA,gBACA,UACA,QACA,mBAKA,mCACA,eACA,kCAEA,IACA,SACA,aACA,uBAIA,wBACA,qBACA,6BACA,MACA,UAEA,gBACA,IAKA,GACA,EACA,IANA,SACA,WACA,gBACA,aAKA,aAEA,6CACA,mBACA,uBACA,wBACA,6BACA,KACA,cAAyC,SAAQ,EACjD,QACA,cAGA,sDACA,0BACA,KACA,kBACA,QAEA,UAEA,CAEA,QACA","file":"data-aggregator.min.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 196ed9cc6efbabc6ee14","'use strict';\nconst AggregatorGetter = require('./data-aggregator-ext');\n\n;(function (env, factory) {\n  if (typeof module === 'object' && module.exports) {\n    module.exports = env.document\n       ? factory(env) : function (win) {\n         if (!win.document) {\n           throw new Error('Window with document not present');\n         }\n         return factory(win, true);\n       };\n  } else {\n    env.Aggregator = factory(env, true);\n  }\n})(typeof window !== 'undefined' ? window : this, function (_window, windowExists) {\n  var FC = _window.FusionCharts;\n\n  FC.register('extension', ['private', 'data-aggregator', function () {\n    FC.registerComponent('extensions', 'data-aggregator', AggregatorGetter({FC: FC}));\n  }]);\n});\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/index.js\n// module id = 0\n// module chunks = 0","'use strict';\n\nmodule.exports = function (dep) {\n  /**\n   * Capitalize the first letter of a given string and return the string\n   * @private\n   */\n  var capitalize = function (string) {\n    return string.charAt(0).toUpperCase() + string.slice(1);\n  };\n  /**\n   * Class representing the Data Aggregator.\n   */\n  class Aggregator {\n    /**\n     * Create a Aggregator.\n     * @typedef {object} Aggregator.aggregation\n     * @property {string} binSize - The binSize applied to aggregate.\n     * @property {string} aggregationMethod - The method applied to aggregate.\n     */\n    constructor () {\n      /**\n       * @private\n       */\n      this.appliedAggregation = {\n        binSize: null,\n        aggregationMethod: null\n      };\n      this.config = {};\n    }\n\n    /**\n     * An object representing the binSize, aggregationMethod.\n     * @type {Aggregator.aggregation}\n     */\n    get aggregation () {\n      return this.appliedAggregation;\n    }\n\n    set aggregation (obj) {\n      this.appliedAggregation.timePeriod = obj.timePeriod;\n      this.appliedAggregation.timePeriodMultiplier = obj.timePeriodMultiplier;\n      this.appliedAggregation.aggregationMethod = obj.aggregationMethod;\n    }\n\n    /**\n     * Sets available aggregation options in configuration of extension\n     * @private\n     */\n    getAvailablelAggreagation () {\n      var config = this.config,\n        dataAgg = config.dataAgg,\n        avlTimePeriods = config.avlTimePeriods = dataAgg.getAggregationTimeRules(),\n        i,\n        len;\n\n      config.avlTimeMultiplier = [];\n      len = avlTimePeriods.length;\n\n      for (i = 0; i < len; i++) {\n        config.avlTimeMultiplier.push(avlTimePeriods[i].possibleFactors);\n      }\n    }\n\n    /**\n     * Calculates valid aggregation time periods and corresponding multipliers\n     * @private\n     */\n    getValidAggregation () {\n      var self = this,\n        config = self.config,\n        tsObject = self.tsObject,\n        dataAgg = config.dataAgg,\n        i,\n        j,\n        len1,\n        len2,\n        avlTimePeriods,\n        avlTimeMultiplier,\n        maxNumOfPlot = config.composition.reactiveModel.model['max-plot-point'],\n        minimumConsecutiveDifference = config.composition.dataset.category.minimumConsecutiveDifference,\n        multipliersArr,\n        currentTimeLength,\n        timePeriod,\n        time,\n        binSize,\n        multiplier,\n        minBinSize;\n\n      config.currentTimeLength = tsObject.globalReactiveModel.model['x-axis-visible-range-end'] -\n        tsObject.globalReactiveModel.model['x-axis-visible-range-start'];\n\n      avlTimePeriods = config.avlTimePeriods;\n      avlTimeMultiplier = config.avlTimeMultiplier;\n      currentTimeLength = config.currentTimeLength;\n\n      config.minBinSize = minBinSize = currentTimeLength / maxNumOfPlot;\n\n      config.validTimePeriod = [];\n      config.validTimePeriodMultiplier = [];\n      config.avlAggMethods = dataAgg.getAllAggregationMethod();\n\n      for (i = 0, len1 = avlTimePeriods.length; i < len1; i++) {\n        timePeriod = avlTimePeriods[i].name;\n        time = avlTimePeriods[i].interval;\n        multipliersArr = [];\n\n        for (j = 0, len2 = avlTimeMultiplier[i].length; j < len2; j++) {\n          multiplier = avlTimeMultiplier[i][j];\n          binSize = multiplier * time;\n\n          if ((binSize >= minBinSize) && (binSize > minimumConsecutiveDifference)) {\n            multipliersArr.push(avlTimeMultiplier[i][j]);\n          }\n        }\n        if (multipliersArr.length > 0) {\n          config.validTimePeriodMultiplier.push(multipliersArr);\n          config.validTimePeriod.push(timePeriod);\n        }\n      }\n    }\n\n    /**\n     * Returns current Aggregation applied to timeseries\n     * @private\n     */\n    getCurrentAggreation () {\n      var self = this,\n        config = self.config,\n        dataAgg = config.dataAgg,\n        composition = config.composition,\n        model = composition.reactiveModel,\n        currentAggMethod,\n        suitableInterval,\n        binSize;\n\n      binSize = model.prop('bin-size') - 1;\n\n      if (isFinite(binSize)) {\n        suitableInterval = dataAgg.timeRules.getSuitableInterval(binSize);\n        currentAggMethod = model.prop('aggregation-fn');\n      }\n\n      return {\n        timePeriod: suitableInterval && suitableInterval.name,\n        timePeriodMultiplier: suitableInterval && suitableInterval.step,\n        aggregationMethod: {\n          value: currentAggMethod && currentAggMethod.nickName,\n          text: currentAggMethod && currentAggMethod.formalName\n        }\n      };\n    }\n\n    init (require) {\n      var self = this,\n        config = self.config,\n        tsObject,\n        toolboxComponent = config.toolboxComponent = {},\n        api,\n        store,\n        composition,\n        saveTo = 'tsObject',\n        requiredParams = [\n          'graphics',\n          'globalReactiveModel',\n          'chart',\n          'spaceManagerInstance',\n          'chartInstance',\n          'smartLabel',\n          'extData',\n          function acquire () {\n            let i = 0,\n              ii = requiredParams.length - 1,\n              param = '';\n            self[saveTo] = self[saveTo] || {};\n            self.requiredParams = {};\n            for (i = 0; i < ii; ++i) {\n              param = requiredParams[i];\n              self[saveTo][param] = arguments[i];\n            }\n          }\n        ];\n      require(requiredParams);\n\n      tsObject = self.tsObject;\n      config.usrConfig = tsObject.extData;\n\n      api = tsObject.chartInstance.apiInstance;\n      store = api.getComponentStore();\n      config.composition = composition = store.getCanvasByIndex(0).composition;\n      config.dataAgg = composition.impl.getDataAggregator();\n\n      toolboxComponent.toolbox = dep.FC.getComponent('api', 'toolbox');\n      toolboxComponent.config = {};\n\n      self.toolbars = [];\n\n      self.measurement = {};\n\n      self.toolbars.push(self.createToolbar());\n\n      composition.reactiveModel.onPropsChange(['bin-size', 'aggregation-fn'], function () {\n        if (config.execute) {\n          config.execute = false;\n          setTimeout(() => {\n            self.rangeOnChange();\n          }, 200);\n        }\n      });\n\n      window.Aggregator = self;\n      return self;\n    }\n\n    /**\n     * Create toolbar components\n     * @private\n     */\n    createToolbar () {\n      var self = this,\n        labelGroup,\n        selectMenuGroup,\n        buttonGroup,\n        toolbar,\n        timeMulSelectMenu,\n        timePeriodSelectMenu,\n        aggMethodSelectMenu,\n        resetButton,\n        applyButton,\n        config = self.config,\n        tsObject = self.tsObject,\n        label,\n\n        toolboxComponent = config.toolboxComponent,\n        toolbox = toolboxComponent.toolbox,\n        toolboxCompConfig = toolboxComponent.config,\n        HorizontalToolbar = toolbox.HorizontalToolbar,\n        ComponentGroup = toolbox.ComponentGroup,\n        SymbolStore = toolbox.SymbolStore,\n\n        graphics = tsObject.graphics,\n        paper = graphics.paper,\n        container = graphics.container,\n        chart = tsObject.chart,\n        smartLabel = tsObject.smartLabel,\n\n        multiplierVal,\n        timeMulSelectMenuOpt,\n        dropDownMenuStyle,\n        applyButtonDisableConfig,\n        resetButtonDisableConfig,\n        displayListAt,\n\n        usrConfig,\n        position,\n        alignment,\n\n        style,\n        usrConfigStyle,\n\n        dependencies = {\n          paper: paper,\n          chart: chart,\n          smartLabel: smartLabel,\n          chartContainer: container\n        },\n\n        /**\n         * Sets valid time multiplier on time period change from extension toolbox\n         * @private\n         */\n        timePeriodOnChange = () => {\n          var timePeriodVal = timePeriodSelectMenu.value(),\n            timePeriodMultiplierVal = timeMulSelectMenu.value(),\n            prevTimePeroidMulVal = timePeriodMultiplierVal,\n            validTimePeriod = config.validTimePeriod,\n            validTimePeriodMultiplier = config.validTimePeriodMultiplier,\n            indexOfTimeUnit,\n            indexOfTimeMul;\n\n          indexOfTimeUnit = validTimePeriod.indexOf(timePeriodVal);\n          indexOfTimeMul = validTimePeriodMultiplier[indexOfTimeUnit].indexOf(Number(timePeriodMultiplierVal));\n\n          timeMulSelectMenuOpt = [];\n          for (multiplierVal of validTimePeriodMultiplier[indexOfTimeUnit]) {\n            timeMulSelectMenuOpt.push({\n              name: multiplierVal.toString(),\n              value: multiplierVal.toString()\n            });\n          }\n\n          timeMulSelectMenu.updateList(timeMulSelectMenuOpt);\n\n          if (indexOfTimeMul < 0) {\n            timeMulSelectMenu.value(validTimePeriodMultiplier[indexOfTimeUnit][0].toString());\n          } else {\n            timeMulSelectMenu.value(prevTimePeroidMulVal);\n          }\n        },\n\n        /**\n         * Sets state of applyButton(active/inactive) on change in value in toolbox\n         * @private\n         */\n        onChange = (type) => {\n          var currentAgg = self.getCurrentAggreation();\n\n          currentAgg.timePeriodMultiplier = currentAgg.timePeriodMultiplier &&\n            currentAgg.timePeriodMultiplier.toString();\n\n          if (currentAgg.timePeriodMultiplier !== timeMulSelectMenu.value() ||\n            currentAgg.timePeriod !== timePeriodSelectMenu.value() ||\n            currentAgg.aggregationMethod.value !== aggMethodSelectMenu.value()) {\n            applyButton.updateVisual('enabled');\n          } else {\n            applyButton.updateVisual('disabled');\n          }\n\n          if (!aggMethodSelectMenu.value()) {\n            aggMethodSelectMenu.value(config.defaultAggMethod);\n          }\n          if (!timePeriodSelectMenu.value() && !timeMulSelectMenu.value()) {\n            timePeriodSelectMenu.value(config.validTimePeriod[0]);\n            timePeriodOnChange();\n          }\n        };\n\n      labelGroup = new ComponentGroup(dependencies, {\n        hPadding: 4\n      });\n      selectMenuGroup = new ComponentGroup(dependencies, {\n        hPadding: 0\n      });\n      buttonGroup = new ComponentGroup(dependencies, {\n        hPadding: 0\n      });\n\n      toolbar = new HorizontalToolbar(dependencies);\n\n      usrConfig = config.usrConfig;\n      position = usrConfig.position || 'bottom';\n      alignment = usrConfig.alignment || 'right';\n\n      if (position === 'top' || alignment === 'top') {\n        displayListAt = 'bottom';\n      } else if (position === 'bottom' || alignment === 'bottom') {\n        displayListAt = 'top';\n      }\n\n      usrConfigStyle = usrConfig.styles || {\n        label: {\n          'font-size': 13,\n          'font-family': '\"Lucida Grande\", sans-serif',\n          'font-weight': 'normal',\n          'fill': '#4b4b4b',\n          'height': 22\n        },\n        timeMultiplierInputField: {\n          active: {\n            'fill': '#fff',\n            'labelFill': '#696969',\n            'stroke': '#c8cecd',\n            'strokeWidth': 1,\n            'radius': 1,\n            // 'displayListAt': 'top',\n            'shadow': {\n              'fill': '#000',\n              'opacity': 0.35\n            },\n            'width': 50,\n            'height': 22\n          }\n        },\n        timePeriodInputField: {\n          active: {\n            'fill': '#fff',\n            'labelFill': '#696969',\n            'stroke': '#c8cecd',\n            'strokeWidth': 1,\n            'radius': 1,\n            // 'displayListAt': 'top',\n            'shadow': {\n              'fill': '#000',\n              'opacity': 0.35\n            },\n            'width': 90,\n            'height': 22\n          }\n        },\n        aggregationMethodInputField: {\n          active: {\n            'fill': '#fff',\n            'labelFill': '#696969',\n            'stroke': '#c8cecd',\n            'strokeWidth': 1,\n            'radius': 1,\n            // 'displayListAt': 'top',\n            'shadow': {\n              'fill': '#000',\n              'opacity': 0.35\n            },\n            'width': 100,\n            'height': 22\n          }\n        },\n        dropDown: {\n          active: {\n            'fill': '#898b8b',\n            'labelFill': '#fff'\n          },\n          normal: {\n            'fill': '#fff',\n            'stroke': '#898b8b',\n            'radius': 2,\n            'labelFill': '#000',\n            'hoverFill': '#e6e8e8',\n            'hoverLabelFill': '#696969'\n          }\n        },\n        applyButton: {\n          active: {\n            'fill': '#555',\n            'labelFill': '#f3f3f3',\n            'stroke': '#ced5d4',\n            'strokeWidth': 0,\n            'hoverFill': '#555',\n            'hoverStrokeWidth': 0,\n            'hoverStroke': '',\n            'radius': 1,\n            'shadow': {\n              'fill': '#000',\n              'opacity': 0.35\n            },\n            'width': 54,\n            'height': 22\n          },\n          inactive: {\n            'fill': '#bebebe',\n            'stroke-width': 0,\n            'stroke': '#ced5d4',\n            'labelFill': '#f3f3f3'\n          }\n        },\n        resetButton: {\n          active: {\n            'fill': '#898b8b',\n            'labelFill': '#f3f3f3',\n            'stroke': '#ced5d4',\n            'strokeWidth': 0,\n            'hoverFill': '#898b8b',\n            'hoverStrokeWidth': 0,\n            'hoverStroke': '',\n            'radius': 1,\n            'shadow': {\n              'fill': '#000',\n              'opacity': 0.35\n            },\n            'width': 54,\n            'height': 22\n          },\n          inactive: {\n            'fill': '#bebebe',\n            'stroke-width': 0,\n            'stroke': '#ced5d4',\n            'labelFill': '#f3f3f3'\n          }\n        },\n        base: {\n          font: {\n            'fontSize': 11,\n            // 'fontWeight': 'bold',\n            'fontFamily': '\"Lucida Grande\", sans-serif'\n            // 'fontStyle': 'italic'\n          }\n        }\n      };\n\n      style = usrConfigStyle || {};\n\n      style = {\n        label: style.label || {},\n        timeMultiplierInputField: {\n          active: (style.timeMultiplierInputField && style.timeMultiplierInputField.active) || {}\n        },\n        timePeriodInputField: {\n          active: (style.timePeriodInputField && style.timePeriodInputField.active) || {}\n        },\n        aggregationMethodInputField: {\n          active: (style.aggregationMethodInputField && style.aggregationMethodInputField.active) || {}\n        },\n        dropDown: {\n          active: (style.dropDown && style.dropDown.active) || {},\n          normal: (style.dropDown && style.dropDown.normal) || {}\n        },\n        applyButton: {\n          active: (style.applyButton && style.applyButton.active) || {},\n          inactive: (style.applyButton && style.applyButton.inactive) || {}\n        },\n        resetButton: {\n          active: (style.resetButton && style.resetButton.active) || {},\n          inactive: (style.resetButton && style.resetButton.inactive) || {}\n        },\n        base: {\n          font: (style.base && style.base.font) || {}\n        }\n      };\n\n      labelGroup.setConfig({\n        fill: '#fff',\n        borderThickness: 0\n      });\n      selectMenuGroup.setConfig({\n        fill: '#fff',\n        borderThickness: 0\n      });\n      buttonGroup.setConfig({\n        fill: '#fff',\n        borderThickness: 0\n      });\n\n      toolbar.setConfig({\n        fill: '#fff',\n        borderThickness: 0\n      });\n\n      applyButtonDisableConfig = {\n        disabled: {\n          config: {\n            disabled: style.applyButton.inactive\n          }\n        }\n      };\n\n      resetButtonDisableConfig = {\n        disabled: {\n          config: {\n            disabled: style.resetButton.inactive\n          }\n        }\n      };\n\n      dropDownMenuStyle = {\n        selected: {\n          container: {\n            style: {\n              fill: style.dropDown.active.fill\n            }\n          },\n          text: {\n            style: {\n              fill: style.dropDown.active.labelFill\n            }\n          }\n        },\n        normal: {\n          container: {\n            style: {\n              fill: style.dropDown.normal.fill,\n              stroke: style.dropDown.normal.stroke,\n              radius: style.dropDown.normal.radius\n            }\n          },\n          text: {\n            style: {\n              fill: style.dropDown.normal.labelFill\n            }\n          }\n        },\n        hover: {\n          container: {\n            style: {\n              fill: style.dropDown.normal.hoverFill\n            }\n          },\n          text: {\n            style: {\n              fill: style.dropDown.normal.hoverLabelFill\n            }\n          }\n        }\n      };\n\n      label = new toolbox.Label('Aggregate Data:', dependencies, {\n        container: {\n          height: style.label.height\n        },\n        text: {\n          style: style.label\n        }\n      });\n\n      toolboxCompConfig.timePeriodSelectMenu = timePeriodSelectMenu = new toolbox.SelectSymbol({}, dependencies, [],\n      Object.assign(style.timePeriodInputField.active, {\n        btnTextStyle: style.base.font,\n        dropDownMenu: dropDownMenuStyle,\n        displayListAt: style.timePeriodInputField.active.displayListAt || displayListAt,\n        margin: {\n          right: 8\n        }\n      }));\n\n      toolboxCompConfig.timeMulSelectMenu = timeMulSelectMenu = new toolbox.SelectSymbol({}, dependencies, [],\n      Object.assign(style.timeMultiplierInputField.active, {\n        btnTextStyle: style.base.font,\n        dropDownMenu: dropDownMenuStyle,\n        displayListAt: style.timeMultiplierInputField.active.displayListAt || displayListAt,\n        margin: {\n          right: 3\n        }\n      }));\n\n      toolboxCompConfig.aggMethodSelectMenu = aggMethodSelectMenu = new toolbox.SelectSymbol({}, dependencies, [],\n      Object.assign(style.aggregationMethodInputField.active, {\n        btnTextStyle: style.base.font,\n        displayListAt: style.aggregationMethodInputField.active.displayListAt || displayListAt,\n        margin: {\n          right: 11\n        },\n        dropDownMenu: dropDownMenuStyle\n      }));\n\n      toolboxCompConfig.applyButton = applyButton = new toolbox.Symbol('APPLY', true, dependencies,\n        Object.assign(style.applyButton.active, {\n          btnTextStyle: style.base.font,\n          margin: {\n            right: 3\n          }\n        }))\n        .attachEventHandlers({\n          click: function () {\n            self.apply(1);\n          }\n        });\n      applyButton.setStateConfig(applyButtonDisableConfig);\n\n      toolboxCompConfig.resetButton = resetButton = new toolbox.Symbol('RESET', true, dependencies,\n        Object.assign(style.resetButton.active, {\n          btnTextStyle: style.base.font,\n          margin: {\n            right: 3\n          }\n        }))\n        .attachEventHandlers({\n          click: function () {\n            self.apply(0);\n          }\n        });\n      resetButton.setStateConfig(resetButtonDisableConfig);\n\n      labelGroup.addSymbol(label);\n      selectMenuGroup.addSymbol(timeMulSelectMenu);\n      selectMenuGroup.addSymbol(timePeriodSelectMenu);\n      selectMenuGroup.addSymbol(aggMethodSelectMenu);\n      buttonGroup.addSymbol(applyButton);\n      buttonGroup.addSymbol(resetButton);\n\n      SymbolStore.register('textBoxIcon', function (x, y, rad, w, h, padX, padY) {\n        var x1 = x - w / 2 + padX / 2,\n          x2 = x + w / 2 - padX / 2,\n          y1 = y - h / 2 + padY / 2,\n          y2 = y + h / 2 - padY / 2;\n\n        return ['M', x1, y1, 'L', x2, y1, 'L', x2, y2, 'L', x1, y2, 'Z'];\n      });\n\n      timePeriodSelectMenu.attachEventHandlers({\n        textOnChange: function () {\n          timePeriodOnChange();\n          onChange();\n        }\n      });\n\n      timeMulSelectMenu.attachEventHandlers({\n        textOnChange: function () {\n          onChange();\n        }\n      });\n\n      aggMethodSelectMenu.attachEventHandlers({\n        textOnChange: function () {\n          onChange();\n        }\n      });\n\n      toolbar.addComponent(labelGroup);\n      toolbar.addComponent(selectMenuGroup);\n      toolbar.addComponent(buttonGroup);\n\n      return toolbar;\n    }\n\n    getLogicalSpace (availableWidth, availableHeight) {\n      var logicalSpace,\n        width = 0,\n        height = 0,\n        i,\n        ln;\n\n      for (i = 0, ln = this.toolbars.length; i < ln; i++) {\n        logicalSpace = this.toolbars[i].getLogicalSpace(availableWidth, availableHeight);\n        width = Math.max(logicalSpace.width, width);\n        height += logicalSpace.height;\n        this.toolbars[i].width = logicalSpace.width;\n        this.toolbars[i].height = logicalSpace.height;\n      }\n      height += this.padding;\n      return {\n        width: width,\n        height: height\n      };\n    }\n\n    placeInCanvas (containerInstance) {\n      var self = this,\n        tsObject = self.tsObject,\n        usrConfig = self.config.usrConfig;\n\n      self.padding = 5;\n      tsObject.spaceManagerInstance.add([{\n        name: function () {\n          return 'data-aggregator';\n        },\n        ref: function (obj) {\n          return obj['0'];\n        },\n        self: function () {\n          return self;\n        },\n        priority: function () {\n          return 2;\n        },\n        layout: function (obj) {\n          return obj[usrConfig.layout || 'inline'];\n        },\n        orientation: [{\n          type: function (obj) {\n            return obj[usrConfig.orientation || 'horizontal'];\n          },\n          position: [{\n            type: function (obj) {\n              return obj[usrConfig.position || 'bottom'];\n            },\n            alignment: [{\n              type: function (obj) {\n                return obj[usrConfig.alignment || 'right'];\n              },\n              dimensions: [function () {\n                var parent = this.getParentComponentGroup();\n                return self.getLogicalSpace(parent.getWidth(), parent.getHeight());\n              }]\n            }]\n          }]\n        }]\n      }]);\n    }\n\n    setDrawingConfiguration (x, y, width, height, group) {\n      var mes = this.measurement;\n      mes.x = x;\n      mes.y = y;\n      mes.width = width;\n      mes.height = height;\n\n      this.parentGroup = group;\n\n      return this;\n    }\n\n    /**\n     * Apply or Reset Aggregation applied through extension in timeseries\n     * @param {number} set - Flag to set or reset. '1' to set, '0' to reset\n     * @private\n     */\n    apply (set) {\n      var self = this,\n        config = self.config,\n        toolboxCompConfig = config.toolboxComponent.config,\n        timePeriodSelectMenu = toolboxCompConfig.timePeriodSelectMenu,\n        timeMulSelectMenu = toolboxCompConfig.timeMulSelectMenu,\n        aggMethodSelectMenu = toolboxCompConfig.aggMethodSelectMenu,\n        applyButton = toolboxCompConfig.applyButton,\n        resetButton = toolboxCompConfig.resetButton,\n\n        aggregate = self.tsObject.extData.aggregate || {},\n        validTimePeriod,\n        validTimePeriodMultiplier,\n        avlAggMethods,\n\n        indexOfTimeUnit,\n        validTimeBin,\n        validMethod,\n\n        model = config.composition.reactiveModel,\n        timePeriodVal,\n        timePeriodMultiplierVal,\n        aggMethod,\n        keys,\n        binSize,\n        timeInterval,\n        aggregation = self.aggregation,\n        canvas = config.composition.impl;\n\n      if (set) {\n        if (!config.drawn) {\n          timePeriodVal = aggregate.timeUnit && aggregate.timeUnit.toString().toLowerCase();\n          timePeriodMultiplierVal = aggregate.timeMultiplier;\n          aggMethod = aggregate.method && aggregate.method.toString().toLowerCase();\n\n          self.getValidAggregation();\n          validTimePeriod = config.validTimePeriod;\n          validTimePeriodMultiplier = config.validTimePeriodMultiplier;\n          avlAggMethods = config.avlAggMethods;\n\n          if (validTimePeriod.includes(timePeriodVal)) {\n            indexOfTimeUnit = validTimePeriod.indexOf(timePeriodVal);\n            if (!validTimePeriodMultiplier[indexOfTimeUnit].includes(Number(timePeriodMultiplierVal))) {\n              timePeriodMultiplierVal = validTimePeriodMultiplier[indexOfTimeUnit][0];\n            }\n            validTimeBin = true;\n          }\n\n          if (avlAggMethods[aggMethod]) {\n            validMethod = true;\n          }\n\n          if (validTimeBin || validMethod) {\n            if (validTimeBin) {\n              for (keys of config.avlTimePeriods) {\n                if (keys.name === timePeriodVal) {\n                  timeInterval = keys.interval;\n                  break;\n                }\n              }\n              binSize = timeInterval * Number(timePeriodMultiplierVal);\n              model\n                .lock()\n                .prop('bin-size-ext', binSize)\n                .unlock();\n              aggregation.binSize = binSize;\n            }\n\n            if (validMethod) {\n              model\n                .lock()\n                .prop('aggregation-fn-ext', config.avlAggMethods[aggMethod])\n                .unlock();\n              aggregation.aggregationMethod = aggMethod;\n            }\n            applyButton.updateVisual('disabled');\n            resetButton.updateVisual('enabled');\n          }\n        } else {\n          timePeriodVal = timePeriodSelectMenu.value();\n          timePeriodMultiplierVal = timeMulSelectMenu.value();\n          aggMethod = aggMethodSelectMenu.value();\n\n          for (keys of config.avlTimePeriods) {\n            if (keys.name === timePeriodVal) {\n              timeInterval = keys.interval;\n              break;\n            }\n          }\n          binSize = timeInterval * Number(timePeriodMultiplierVal);\n          model\n            .lock()\n            .prop('bin-size-ext', binSize)\n            .prop('aggregation-fn-ext', config.avlAggMethods[aggMethod])\n            .unlock();\n          aggregation.binSize = binSize;\n          aggregation.aggregationMethod = aggMethod;\n          applyButton.updateVisual('disabled');\n          resetButton.updateVisual('enabled');\n        }\n      } else {\n        canvas.resetAggregation();\n        aggregation.binSize = null;\n        aggregation.aggregationMethod = null;\n        resetButton.updateVisual('disabled');\n      }\n    }\n\n    /**\n     * Compute and populate toolboxes with valid values on change in range of visual window\n     * @private\n     */\n    rangeOnChange () {\n      var self = this,\n        config = self.config,\n        toolboxCompConfig = config.toolboxComponent.config,\n        timePeriodSelectMenu = toolboxCompConfig.timePeriodSelectMenu,\n        timeMulSelectMenu = toolboxCompConfig.timeMulSelectMenu,\n        aggMethodSelectMenu = toolboxCompConfig.aggMethodSelectMenu,\n        applyButton = toolboxCompConfig.applyButton,\n        resetButton = toolboxCompConfig.resetButton,\n        model = config.composition.reactiveModel,\n\n        timePeriodVal,\n        timePeriodSelectMenuOpt,\n        validTimePeriod,\n        indexOfTimeUnit,\n\n        multiplierVal,\n        timeMulSelectMenuOpt,\n        validTimePeriodMultiplier,\n\n        aggVal,\n        aggMethodSelectMenuOpt,\n        avlAggMethods,\n\n        aggregation = self.aggregation,\n        currentAggregationObj,\n        timePeriod,\n        timePeriodMultiplier,\n        aggregationMethod;\n\n      self.getValidAggregation();\n      currentAggregationObj = self.getCurrentAggreation();\n      timePeriod = currentAggregationObj.timePeriod;\n      timePeriodMultiplier = currentAggregationObj.timePeriodMultiplier;\n      aggregationMethod = currentAggregationObj.aggregationMethod;\n\n      timePeriodSelectMenuOpt = [];\n      timeMulSelectMenuOpt = [];\n      aggMethodSelectMenuOpt = [];\n\n      validTimePeriod = config.validTimePeriod;\n      validTimePeriodMultiplier = config.validTimePeriodMultiplier;\n      avlAggMethods = config.avlAggMethods;\n\n      applyButton.updateVisual('disabled');\n\n      if (aggregation.binSize !== model.prop('bin-size') &&\n        (aggregationMethod.value === config.defaultAggMethod || !aggregationMethod.value)) {\n        aggregation.binSize = null;\n        aggregation.aggregationMethod = null;\n        resetButton.updateVisual('disabled');\n      } else {\n        resetButton.updateVisual('enabled');\n      }\n\n      for (timePeriodVal of validTimePeriod) {\n        timePeriodSelectMenuOpt.push({\n          name: capitalize(timePeriodVal),\n          value: timePeriodVal\n        });\n      }\n\n      timePeriodSelectMenu.updateList(timePeriodSelectMenuOpt);\n      timePeriod ? timePeriodSelectMenu.value(timePeriod) : timePeriodSelectMenu.setPlaceHolderValue('');\n\n      indexOfTimeUnit = validTimePeriod.indexOf(timePeriod);\n\n      if (indexOfTimeUnit >= 0) {\n        for (multiplierVal of validTimePeriodMultiplier[indexOfTimeUnit]) {\n          timeMulSelectMenuOpt.push({\n            name: multiplierVal.toString(),\n            value: multiplierVal.toString()\n          });\n        }\n      }\n\n      timeMulSelectMenu.updateList(timeMulSelectMenuOpt);\n      timePeriodMultiplier ? timeMulSelectMenu.value(timePeriodMultiplier.toString())\n        : timeMulSelectMenu.setPlaceHolderValue('');\n\n      for (aggVal in avlAggMethods) {\n        aggMethodSelectMenuOpt.push({\n          name: capitalize(avlAggMethods[aggVal].formalName),\n          value: avlAggMethods[aggVal].nickName\n        });\n      }\n\n      aggMethodSelectMenu.updateList(aggMethodSelectMenuOpt);\n      aggregationMethod.value ? aggMethodSelectMenu.value(aggregationMethod.value)\n        : aggMethodSelectMenu.setPlaceHolderValue('');\n      config.execute = true;\n    }\n\n    draw (x, y, width, height, group) {\n      var self = this,\n        config = self.config,\n        measurement = self.measurement,\n        toolbars = self.toolbars,\n        ln,\n        i,\n        toolbar,\n        dataAgg = config.dataAgg;\n\n      self.getAvailablelAggreagation();\n\n      x = x === undefined ? measurement.x : x;\n      y = y === undefined ? measurement.y : y;\n      width = width === undefined ? measurement.width : width;\n      height = height === undefined ? measurement.height : height;\n      group = group === undefined ? self.parentGroup : group;\n      if (width && height) {\n        for (i = 0, ln = toolbars.length; i < ln; i++) {\n          toolbar = toolbars[i];\n          toolbar.draw(x, y, group);\n        }\n      }\n      config.defaultAggMethod = dataAgg.getDefaultAggregationMethod().nickName;\n      !config.drawn && self.apply(1);\n      self.rangeOnChange();\n      config.drawn = true;\n    }\n\n    dispose () {\n      // dispose extension\n    }\n  }\n  return Aggregator;\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/data-aggregator-ext.js\n// module id = 1\n// module chunks = 0"],"sourceRoot":""}